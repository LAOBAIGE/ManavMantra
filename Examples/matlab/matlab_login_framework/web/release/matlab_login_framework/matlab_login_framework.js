//>>built
/*
 Copyright 2013 The MathWorks, Inc.
 Copyright 2014 The MathWorks, Inc.
 Copyright 2015 The MathWorks, Inc.
 @exports MW/utils/deprecation
*/
require({cache:{"matlab_login_framework/js/MatlabLoginFramework":function(){define("dojo/_base/declare dojo/on dojo/_base/lang dojo/Evented dojo/string ./LoginPanel matlab_login_framework/LoginStatusUpdate matlab_login/matlab_login dojo/i18n!../l10n/nls/matlab_login_framework".split(" "),function(l,h,g,b,a,c,d,f,e){return l([b],{_CLASSIFIER:"MATLABLoginFramework",_clientNonce:"",_token:"",_clientString:"",_userInfo:{},_allowedLoginLevels:[0,1,2,3,4],_loginPanel:null,_statusIndicator:null,_frameLink:null,
_options:{},_initData:{},_isEmbeddedLoginInfoSet:!1,constructor:function(a){this.inherited(arguments);a._isTest?(this._clientNonce=this._getInitMockData().transactionId,this._frameLink=this._getInitMockData().endpoint,this._initData=this._getInitMockData(),this.emit("initData",JSON.stringify(this._getInitMockData()))):(this.matlabLogin=new f,this.matlabLogin.getInfoToCallEmbeddedLogin(g.hitch(this,"_init"),g.hitch(this,this._handleUnexpectedError)))},_init:function(a,b){!1===navigator.onLine?this._handleUnexpectedError():
(this._clientNonce=a.transactionId,this._frameLink=a.endpoint,this._initData=a,this._isEmbeddedLoginInfoSet=!0,this.emit("initData",JSON.stringify(a)),!0===b&&this.emit("loginpanelready"))},_configProperties:function(a){if(!a.clientString||""===a.clientString)throw Error("Error: Client String is required and cannot be empty");this._clientString=a.clientString||"defaultClientString";a.options&&(this._options=a.options)},_configContainers:function(a){if(!a.loginPanel)throw Error("Error: Login Panel configurations not provided");
a.loginPanel&&(this._loginContainerNode=a.loginPanel.container,this._configureLoginPanel(a.loginPanel))},_configureLoginPanel:function(a){this._isEmbeddedLoginInfoSet?(this._loginPanel=new c,this._attachLoginPanelHandlers(),this._loginPanel._getCloseNode().style.display="none",this._loginPanel.placeAt(a.container),this._loginPanel.startup(),this.emit("loginpanelready")):this._configureLoginPanelTimer=setTimeout(this._configureLoginPanel.bind(this,a),200)},_attachLoginPanelHandlers:function(){h(this._loginPanel,
"sendNonce",g.hitch(this,"_sendInitialNonceData"));h(this._loginPanel,"mwLoginCloseClicked",g.hitch(this,"_hidePanel"));h(this._loginPanel,"mwServerNonce",g.hitch(this,"_handleMwServerNonce"));h(this._loginPanel,"mwLogin",g.hitch(this,"_handleMwLogin"));h(this._loginPanel,"mwRetryLoginClicked",g.hitch(this,"_handleReTryLogin"))},_requestLogin:function(a,b,c,e,d){var f=!0===e;if(-1===this._allowedLoginLevels.indexOf(a))throw Error("Error: Unsupported login level requested");this._level=a;if(!b||"function"!==
typeof b)throw Error("Error: No callback function provided");this.logincb=b;d?this._mockMatlabIsUserLoggedIn(this._level,this._clientString,g.hitch(this,function(a){!0===a.isUserLoggedIn?(b(a),this._hidePanel()):this._loginPanel.set("frameLink",this._frameLink)})):!0===c?this._requestLoginForIframe(this._level,f):(this._loginPanel._showSpinner(),this.matlabLogin.isUserLoggedIn(this._level,this._clientString,g.hitch(this,function(a){this._initData.cachedRememberMe=a.userLoginInfo.cachedRememberMe;
this._initData.cachedUsername=a.userLoginInfo.cachedUsername;!0===a.isUserLoggedIn?(b(a),this._hidePanel()):0==a.loginErrors.length?this._loginPanel.set("frameLink",this._frameLink):this._checkForErrors(a,f)}),g.hitch(this,this._handleUnexpectedError)))},_requestLoginForIframe:function(a,b){this.matlabLogin.isUserLoggedIn(a,this._clientString,g.hitch(this,function(a){0==a.loginErrors.length?this.logincb(a):this._checkForErrors(a,b)}),g.hitch(this,this._handleUnexpectedError))},_checkForErrors:function(b,
c){var d={tryAgain:e.tryAgain,cancel:e.cancel};"Connection Error"===b.loginErrors[0].localName?(d.error=e.connectionError,d.errorMsg=a.substitute(e.connectionErrorMsg,{"0":this._initData.release,1:this._initData.platform})):(d.error=e.unexpectedError,d.errorMsg=e.unexpectedErrorMsg);this._loginPanel&&(this._loginPanel._displayError(d),this._showPanel());!1===c&&this.emit("mwHandleError",d)},_logout:function(a){this.matlabLogin.logout(function(b){a(b)})},_sendInitialNonceData:function(){var a={event:"init",
transactionId:this._clientNonce,clientTransactionId:"",release:this._initData.release,platform:this._initData.platform,clientString:this._getFormattedClientString(),clientID:"",locale:"",profileTier:"extended",showCreateAccount:!1===this._options.showCreateAccount?!1:!0,showRememberMe:!1===this._options.showRememberMe?!1:!0,entitlementId:"",cachedUsername:"",cachedRememberMe:"",contextualProfileText:"",restrictEmailDomain:!0===this._options.restrictEmailDomain?!0:!1,autoAssociate:!1===this._options.autoAssociate?
!1:!0,licenseReference:""};this._loginPanel._sendPostMessage(JSON.stringify(a))},_handleMwServerNonce:function(a){a={event:"load",transactionId:a.transactionId,clientTransactionId:this._clientNonce,release:this._initData.release,platform:this._initData.platform,clientString:this._getFormattedClientString(),clientID:"",locale:this._initData.locale,profileTier:"extended",showCreateAccount:!1===this._options.showCreateAccount?!1:!0,showRememberMe:!1===this._options.showRememberMe?!1:!0,entitlementId:this._initData.entitlementId,
cachedUsername:this._initData.cachedUsername,cachedRememberMe:this._initData.cachedRememberMe,contextualText:this._options.contextualText||"",legalText:this._options.legalText||"",contextualProfileText:this._options.contextualProfileText||"",restrictEmailDomain:!0===this._options.restrictEmailDomain?!0:!1,autoAssociate:!1===this._options.autoAssociate?!1:!0,licenseReference:this._options.licenseReference||""};this._loginPanel._sendPostMessage(JSON.stringify(a));this._showPanel();this._loginPanel._hideSpinner()},
_handleReTryLogin:function(){!1===this._isEmbeddedLoginInfoSet?(this._loginPanel._hideError(),this._loginPanel._showSpinner(),this.matlabLogin.getInfoToCallEmbeddedLogin(g.hitch(this,function(a){this._loginPanel._hideSpinner();this._loginPanel._hideError();this._init(a,!0)}),g.hitch(this,this._handleUnexpectedError))):(this._loginPanel._hideError(),this._requestLogin(this._level||2,this.logincb,!1,!1))},_handleIFrameRetry:function(){!1===this._isEmbeddedLoginInfoSet&&this.matlabLogin.getInfoToCallEmbeddedLogin(g.hitch(this,
function(a){this._init(a);this.emit("_retryLoginAfterResolve")}),g.hitch(this,this._handleUnexpectedError))},_showPanel:function(a){this.emit("willshowpanel")},_hidePanel:function(){this.emit("willhidepanel")},_handleMwLogin:function(a,b){this.matlabLogin.saveCacheLoginInfo(a.firstName,a.lastName,a.emailAddress,a.userID,a.token,a.profileId,this._level,a.cachedRememberMe,a.cachedUsername,a.displayName,g.hitch(this,function(a){a&&(this.logincb(a),this._hidePanel(),b&&"function"===typeof b&&b(a))}),
g.hitch(this,this._handleUnexpectedError))},_getFormattedClientString:function(){var a="";this._clientString&&(a="DESKTOP-"+this._clientString+"-"+this._initData.release);return a},_handleUnexpectedError:function(){var a={error:e.unexpectedError,errorMsg:e.unexpectedErrorMsg,tryAgain:e.tryAgain,cancel:e.cancel};this._loginContainerNode&&!this._loginPanel&&(this._loginPanel=new c,this._attachLoginPanelHandlers(),this._loginPanel._getCloseNode().style.display="none",this._loginPanel.placeAt(this._loginContainerNode),
this._loginPanel.startup(),this._configureLoginPanelTimer&&clearTimeout(this._configureLoginPanelTimer));this._loginPanel&&(this._loginPanel._displayError(a),this._showPanel());this.emit("mwHandleError",a)},_getMatlabLoginMockData:function(){return{isUserLoggedIn:!0,loginErrors:[],userLoginInfo:{firstName:"Shraddha",lastName:"Khaire",emailAddress:"shraddha.khaire@mathworks.com",userID:"skhaire",token:"sdjkghkdjfghbneiortueoritdrfyklerymrtiopwermiirtixcviowewerjpwermdawp\x3d\x3d",profileID:"2354456",
uuid:"982374-23423-234234-234234",cachedUsername:"skhaire",cachedRememberMe:!1},loginLevel:2}},_getInitMockData:function(){return{loginMessages:[],locale:"ja_JP",transactionId:"2534534565676786787897808990090345345354656756",endpoint:"https://login.mathworks.com/embedded-login/login.html?locale\x3dja_JP",release:"R2016a",platform:"glnxa64",entitlementId:"1234"}},_mockMatlabIsUserLoggedIn:function(a,b,c){c(this._getMatlabLoginMockData())},configProperties:function(a){this._configProperties(a)},configContainers:function(a){this._configContainers(a)},
requestLogin:function(a,b){this._requestLogin(a,b,!1,!1)},getLoginStatusUpdates:function(a){if(!a||"function"!==typeof a)throw Error("Error: No callback function provided for LoginStatusUpdate");return new d(a)}})})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(l,h){var g=/[&<>'"\/]/g,b={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},a={};h.setObject("dojo.string",a);a.escape=function(a){return!a?"":a.replace(g,function(a){return b[a]})};
a.rep=function(a,b){if(0>=b||!a)return"";for(var f=[];;){b&1&&f.push(a);if(!(b>>=1))break;a+=a}return f.join("")};a.pad=function(b,d,f,e){f||(f="0");b=String(b);d=a.rep(f,Math.ceil((d-b.length)/f.length));return e?b+d:d+b};a.substitute=function(a,b,f,e){e=e||l.global;f=f?h.hitch(e,f):function(a){return a};return a.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(a,c,g){if(""==c)return"$";a=h.getObject(c,!1,b);g&&(a=h.getObject(g,!1,e).call(e,a,c));return f(a,c).toString()})};a.trim=String.prototype.trim?
h.trim:function(a){a=a.replace(/^\s+/,"");for(var b=a.length-1;0<=b;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a};return a})},"matlab_login_framework/js/LoginPanel":function(){define("dojo/_base/declare dojo/dom-style dojo/dom-class dojo/dom-attr dojo/on dojo/_base/lang mw-overlay-utils/BusyOverlay dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dojo/Evented dijit/_TemplatedMixin mw-mixins/property/SizeMixin dojo/text!./Templates/LoginPanel.html".split(" "),
function(l,h,g,b,a,c,d,f,e,m,n,p,k,u,q){return l([f,e,m,n,p,k,u],{baseClass:"mwWidget mwLoginPanel",templateString:q,frameLink:"",constructor:function(a){this.busyIndicator=new d(d.SIZE.MEDIUM)},postCreate:function(){this.inherited(arguments);a(this.frameNode,"load",c.hitch(this,function(){this.get("frameLink")&&(""!==this.get("frameLink")&&this.get("frameLink")===this.frameNode.src)&&this.emit("sendNonce")}));a(this.closeNode,"click",c.hitch(this,function(){this.emit("mwLoginCloseClicked")}));a(this.cancelBtnNode,
"click",c.hitch(this,function(){this.emit("mwLoginCloseClicked")}));a(this.retryBtnNode,"click",c.hitch(this,function(){this.emit("mwRetryLoginClicked")}));a(window,"message",c.hitch(this,function(a){var b=this.get("frameLink").split("/");if(a.origin===b[0]+"//"+b[2]||-1<a.origin.indexOf("mathworks.com"))a=JSON.parse(a.data),a.event&&"nonce"===a.event&&this.emit("mwServerNonce",a),a.event&&"login"===a.event&&this.emit("mwLogin",a)}));this.busyIndicator.set("target",this.spinnerNode)},_updateIFrameLink:function(a){b.set(this.frameNode,
"src",a)},_setFrameLinkAttr:function(a){this._updateIFrameLink(a);this._set("frameLink",a)},_getCloseNode:function(){return this.closeNode},_sendPostMessage:function(a,b){this.frameNode.contentWindow.postMessage(a,b||"*")},_displayError:function(a){this.busyIndicator.hide();this.frameNode.style.display="none";this.errorHeadingNode.innerHTML=a.error;this.errorMsgNode.innerHTML=a.errorMsg;this.retryBtnNode.innerHTML=a.tryAgain;this.cancelBtnNode.innerHTML=a.cancel;this.errorContainerNode.style.display=
"block"},_hideError:function(){this.busyIndicator.hide();this.frameNode.style.display="block";this.errorContainerNode.style.display="none"},_showSpinner:function(){this.busyIndicator.show()},_hideSpinner:function(){this.busyIndicator.hide()}})})},"mw-overlay-utils/BusyOverlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-style dojo/dom-attr dojo/query dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/on dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin spinner/spin mw-log/Log dojo/text!./templates/busyOverlayTemplate.html".split(" "),
function(l,h,g,b,a,c,d,f,e,m,n,p,k,u,q,r){var s={rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,zIndex:2E9,top:"50%",left:"50%"},w={lines:11,length:8,width:4,radius:12,corners:0.5,className:"spinner spinnerLarge"},y={lines:11,length:5,width:3,radius:8,corners:1,className:"spinner spinnerMedium"},x={lines:11,length:4,width:2,radius:6,corners:1,className:"spinner spinnerSmall"},C={lines:9,length:2,width:2,radius:4,corners:0,className:"spinner spinnerXSmall"};h.mixin(w,s);h.mixin(y,
s);h.mixin(x,s);h.mixin(C,s);l=l("MW.utils.BusyOverlay",[p,k],{_displayed:!1,_started:!1,_spinner:null,_size:null,target:null,_text:"",_textSpan:null,_spinnerTextNode:null,templateString:r,constructor:function(a){this._textSpan=f.create("span");this._spinnerTextNode=f.create("div");Object.defineProperty(this,"text",{set:function(a){this._text=a;this._text&&"string"===typeof this._text||(this._text="");this._textSpan.textContent=this._text;this._started&&this._updateTitle()},get:function(){return this._text},
enumerable:!0,configurable:!0});this._setSpinnerSize(a);d.add(this._spinnerTextNode,"spinnerText");a&&a.text&&this.set("text",a.text)},_setSpinnerSize:function(a){try{if(null===a||void 0===a||a.text&&!a.size)this._size=h.clone(w);else if("object"===typeof a)this._size=a.size?h.clone(a.size):h.clone(a);else throw Error("Incorrect argument passed to BusyOverlay Object.");}catch(b){q.error(b.message)}},_updateTitle:function(){d.remove(this._textSpan,"spinnerCenter");this._textSpan.offsetWidth>=this._spinnerTextNode.offsetWidth?
a.set(this._spinnerTextNode,"title",this._text):a.set(this._spinnerTextNode,"title","");d.add(this._textSpan,"spinnerCenter")},_updateTextStyle:function(){var a=e.position(this._underlayNode).h/2+2*this._size.radius+15+"px";b.set(this._spinnerTextNode,"top",a)},startup:function(){if(!this._started){this._spinner=new u(this._size);if(this.target){if("string"===typeof this.target){var a=n.byId(this.target);this.target=a?a.domNode:g.byId(this.target)}f.place(this.domNode,this.target);f.place(this._textSpan,
this._spinnerTextNode);f.place(this._spinnerTextNode,this._busyOverlayNode)}this._text&&(this._updateTitle(),this.own(m(window,"resize",this._updateTextStyle.bind(this))));this._started=!0;this.inherited(arguments)}},postCreate:function(){this._underlayNode.style.zIndex=2E9-1;this.inherited(arguments)},show:function(){this._displayed||(this._started||this.startup(),this._displayed=!0,this._busyOverlayNode.style.display="inline",this._busyOverlayNode.className="mw-busyIndicator",this._updateTextStyle(),
b.set(this._spinnerTextNode,"display","block"),this._spinner.spin(this._spinnerNode),this.onShow())},hide:function(){this._displayed&&(this._displayed=!1,this._busyOverlayNode.style.display="none",this._spinner.stop(),this._spinnerTextNode.style.display="none",this.onHide())},uninitialize:function(){this.hide();this._spinner=this.target=null;this._displayed=!1;c(".spinnerText").forEach(f.destroy);this._spinnerTextNode=this._textSpan=null;this.inherited(arguments)},isVisible:function(){return this._displayed},
onShow:function(){},onHide:function(){this.inherited(arguments)}});l.SIZE={LARGE:w,MEDIUM:y,SMALL:x,XSMALL:C};Object.freeze(l.SIZE);Object.freeze(l.SIZE.LARGE);Object.freeze(l.SIZE.MEDIUM);Object.freeze(l.SIZE.SMALL);Object.freeze(l.SIZE.XSMALL);return l})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(l,h,g){var b={},a={},c={length:0,add:function(b){if(a[b.id])throw Error("Tried to register widget with id\x3d\x3d"+b.id+" but that id is already registered");
a[b.id]=b;this.length++},remove:function(b){a[b]&&(delete a[b],this.length--)},byId:function(b){return"string"==typeof b?a[b]:b},byNode:function(b){return a[b.getAttribute("widgetId")]},toArray:function(){var b=[],c;for(c in a)b.push(a[c]);return b},getUniqueId:function(c){var f;do f=c+"_"+(c in b?++b[c]:b[c]=0);while(a[f]);return"dijit"==g._scopeName?f:g._scopeName+"_"+f},findWidgets:function(b,c){function e(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var d=b.getAttribute("widgetId");
d?(d=a[d])&&m.push(d):b!==c&&e(b)}}var m=[];e(b);return m},_destroyAll:function(){g._curFocus=null;g._prevFocus=null;g._activeStack=[];l.forEach(c.findWidgets(h.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(b){for(;b;){var c=1==b.nodeType&&b.getAttribute("widgetId");if(c)return a[c];b=b.parentNode}return null},_hash:a};return g.registry=c})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable require ./registry".split(" "),
function(l,h,g,b,a,c,d,f,e,m,n,p,k,u,q,r,s,w,y,x,C,F,A){function O(a){return function(b){f[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}k.add("dijit-legacy-requires",!u.isAsync);k("dijit-legacy-requires")&&s(0,function(){l(["dijit/_base/manager"])});var P={};return c("dijit._WidgetBase",[w,C],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:O("lang"),dir:"",_setDirAttr:O("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",
srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:b.blankGif||l.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},e;for(e in b.attributeMap)c.push(e);for(e in b)/^on/.test(e)&&(a[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+e.substr(5,
e.length-9),(!b.attributeMap||!(e in b.attributeMap))&&c.push(e))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=d.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&(this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id)&&(this.id=this.srcNodeRef.id);a&&(this.params=a,q.mixin(this,a));this.postMixInProperties();this.id||(this.id=A.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=x.body(this.ownerDocument);A.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var e=this.srcNodeRef;e&&(e.parentNode&&this.domNode!==e)&&(e.parentNode.replaceChild(this.domNode,e),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);
h.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(h.map(a,function(a){return a+"Rtl"})));e.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=
!0,h.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&q.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();h.forEach(this._connects,q.hitch(this,"disconnect"));h.forEach(this._supportingWidgets,b);this.domNode&&h.forEach(A.findWidgets(this.domNode,
this.containerNode),b);this.destroyRendering(a);A.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?f.remove(this.domNode,"widgetId"):m.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||m.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){h.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=
this.domNode;q.isObject(a)?p.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,c){c=3<=arguments.length?c:this.attributeMap[a];h.forEach(q.isArray(c)?c:[c],function(c){var k=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":q.isFunction(b)&&(b=q.hitch(this,b));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;k.tagName?f.set(k,c,b):k.set(c,b);break;case "innerText":k.innerHTML="";k.appendChild(this.ownerDocument.createTextNode(b));
break;case "textContent":k.textContent=b;break;case "innerHTML":k.innerHTML=b;break;case "class":e.replace(k,b,this[a]);break;case "toggleClass":e.toggle(k,c.className||a,b)}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var e=this[c.s];if(q.isFunction(e))var k=e.apply(this,Array.prototype.slice.call(arguments,1));else{var e=this.focusNode&&
!q.isFunction(this.focusNode)?"focusNode":"domNode",d=this[e]&&this[e].tagName,m;if(m=d)if(!(m=P[d])){m=this[e];var f={},r;for(r in m)f[r.toLowerCase()]=!0;m=P[d]=f}r=m;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:r&&c.l in r&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?e:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return k||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-
1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;if(this._created&&!(c===b||c!==c&&b!==b))this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}})},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var e,k=this["on"+a];
k&&(e=k.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&r.emit(this.domNode,a.toLowerCase(),b);return e},on:function(a,b){var c=this._onMap(a);return c?g.after(this,c,b,!0):this.own(r(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},e;for(e in b.prototype)/^on/.test(e)&&(c[e.replace(/^on/,"").toLowerCase()]=e)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+
"]"},getChildren:function(){return this.containerNode?A.findWidgets(this.containerNode):[]},getParent:function(){return A.getEnclosingWidget(this.domNode.parentNode)},connect:function(b,c,e){return this.own(a.connect(b,c,this,e))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(y.subscribe(a,q.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():n.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&
"none"!=p.get(this.domNode,"display")},placeAt:function(a,b){var c=!a.tagName&&A.byId(a);c&&c.addChild&&(!b||"number"===typeof b)?c.addChild(this,b):(c=c&&"domNode"in c?c.containerNode&&!/after|before|replace/.test(b||"")?c.containerNode:c.domNode:d.byId(a,this.ownerDocument),m.place(this.domNode,c,b),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,b){var c=setTimeout(q.hitch(this,function(){c&&(c=null,this._destroyed||q.hitch(this,a)())}),b||0);return{remove:function(){c&&
(clearTimeout(c),c=null);return null}}}})})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(l,h,g,b){return l("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;return b[a]?b[a]:b[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,b){return"function"===typeof this[b.g]?this[b.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,
c){if("object"===typeof a){for(var d in a)a.hasOwnProperty(d)&&"_watchCallbacks"!=d&&this.set(d,a[d]);return this}d=this._getAttrNames(a);var f=this._get(a,d);d=this[d.s];var e;"function"===typeof d?e=d.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=c;if(this._watchCallbacks){var m=this;b(e,function(){m._watchCallbacks(a,f,c)})}return this},_changeAttrValue:function(a,b){var d=this.get(a);this[a]=b;this._watchCallbacks&&this._watchCallbacks(a,d,b);return this},watch:function(a,b){var d=
this._watchCallbacks;if(!d)var f=this,d=this._watchCallbacks=function(a,b,c,e){var m=function(e){if(e){e=e.slice();for(var d=0,m=e.length;d<m;d++)e[d].call(f,a,b,c)}};m(d["_"+a]);e||m(d["*"])};!b&&"function"===typeof a?(b=a,a="*"):a="_"+a;var e=d[a];"object"!==typeof e&&(e=d[a]=[]);e.push(b);var m={};m.unwatch=m.remove=function(){var a=g.indexOf(e,b);-1<a&&e.splice(a,1)};return m}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(l,h,g){return g("dijit.Destroyable",
null,{destroy:function(b){this._destroyed=!0},own:function(){var b=["destroyRecursive","destroy","remove"];l.forEach(arguments,function(a){function c(){f.remove();l.forEach(e,function(a){a.remove()})}var d,f=h.before(this,"destroy",function(b){a[d](b)}),e=[];a.then?(d="cancel",a.then(c,c)):l.forEach(b,function(b){"function"===typeof a[b]&&(d||(d=b),e.push(h.after(a,b,c,!0)))})},this);return arguments}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),
function(l,h,g,b,a,c,d,f){var e=h("dijit._TemplatedMixin",f,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var c=this.declaredClass,e=this;return d.substitute(a,this,function(a,d){"!"==d.charAt(0)&&(a=b.getObject(d.substr(1),!1,e));if("undefined"==typeof a)throw Error(c+" template:"+d);return null==a?"":"!"==d.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;",
"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=l(this.templatePath,{sanitize:!0}));var a=e.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),c;if(b.isString(a)){if(c=g.toDom(this._stringRepl(a),this.ownerDocument),1!=c.nodeType)throw Error("Invalid template: "+a);}else c=a.cloneNode(!0);this.domNode=c}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);
this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});e._templateCache={};e.getCachedTemplate=function(a,b,c){var k=e._templateCache,f=a,q=k[f];if(q){try{if(!q.ownerDocument||q.ownerDocument==(c||document))return q}catch(r){}g.destroy(q)}a=d.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return k[f]=a;b=g.toDom(a,c);if(1!=b.nodeType)throw Error("Invalid template: "+a);return k[f]=b};c("ie")&&a(window,"unload",function(){var a=
e._templateCache,b;for(b in a){var c=a[b];"object"==typeof c&&g.destroy(c);delete a[b]}});return e})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(l){return l.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(l,h,g,b){var a;a=function(a,c,e){b(a,{sync:!!c,headers:{"X-Requested-With":null}}).then(e)};var c={},d=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
b&&(a=b[1])}else a="";return a},f={},e={};l.cache=function(b,e,f){var k;"string"==typeof b?/\//.test(b)?(k=b,f=e):k=h.toUrl(b.replace(/\./g,"/")+(e?"/"+e:"")):(k=b+"",f=e);b=void 0!=f&&"string"!=typeof f?f.value:f;f=f&&f.sanitize;if("string"==typeof b)return c[k]=b,f?d(b):b;if(null===b)return delete c[k],null;k in c||a(k,!0,function(a){c[k]=a});return f?d(c[k]):c[k]};return{dynamic:!0,normalize:function(a,b){var c=a.split("!"),e=c[0];return(/^\./.test(e)?b(e):e)+(c[1]?"!"+c[1]:"")},load:function(b,
n,g){b=b.split("!");var k=1<b.length,h=b[0],q=n.toUrl(b[0]);b="url:"+q;var r=f,s=function(a){g(k?d(a):a)};h in c?r=c[h]:n.cache&&b in n.cache?r=n.cache[b]:q in c&&(r=c[q]);if(r===f)if(e[q])e[q].push(s);else{var l=e[q]=[s];a(q,!n.async,function(a){c[h]=c[q]=a;for(var b=0;b<l.length;)l[b++](a);delete e[q]})}else s(r)}}})},"dojo/request":function(){define(["./request/default!"],function(l){return l})},"dojo/request/default":function(){define(["exports","require","../has"],function(l,h,g){var b=g("config-requestProvider");
b||(b="./xhr");l.getPlatformDefaultId=function(){return"./xhr"};l.load=function(a,c,d,f){h(["platform"==a?"./xhr":b],function(a){d(a)})}})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(l,h,g,b,a,c,d,f,e){var m=a.delegate(f,{mouseenter:c.enter,mouseleave:c.leave,keypress:g._keypress}),n;g=b("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];
this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(b,c,e){var d=
!0,f=this.attachScope||this,m=c(b,"dojoAttachPoint")||c(b,"data-dojo-attach-point");if(m)for(var n=m.split(/\s*,\s*/);m=n.shift();)a.isArray(f[m])?f[m].push(b):f[m]=b,d="containerNode"!=m,this._attachPoints.push(m);if(c=c(b,"dojoAttachEvent")||c(b,"data-dojo-attach-event")){m=c.split(/\s*,\s*/);for(n=a.trim;c=m.shift();)if(c){var g=null;-1!=c.indexOf(":")?(g=c.split(":"),c=n(g[0]),g=n(g[1])):c=n(c);g||(g=c);this._attachEvents.push(e(b,c,a.hitch(f,g)))}}return d},_attach:function(a,b,c){b=b.replace(/^on/,
"").toLowerCase();b="dijitclick"==b?n||(n=l("./a11yclick")):m[b]||b;return d(a,b,c)},_detachTemplateNodes:function(){var a=this.attachScope||this;h.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];h.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});a.extend(e,{dojoAttachEvent:"",dojoAttachPoint:""});return g})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),
function(l,h,g,b,a,c,d,f,e,m){function n(a,b,e){return q&&e?function(a,b){return c(a,e,b)}:s?function(e,d){var k=c(e,b,function(a){d.call(this,a);K=(new Date).getTime()}),f=c(e,a,function(a){(!K||(new Date).getTime()>K+1E3)&&d.call(this,a)});return{remove:function(){k.remove();f.remove()}}}:function(b,e){return c(b,a,e)}}function p(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function k(a,e,d){if(!f.isRight(a)){var k=p(a.target);if(y=!a.target.disabled&&k&&k.dojoClick)if(C=(x="useTarget"==
y)?k:a.target,x&&a.preventDefault(),F=a.changedTouches?a.changedTouches[0].pageX-m.global.pageXOffset:a.clientX,A=a.changedTouches?a.changedTouches[0].pageY-m.global.pageYOffset:a.clientY,O=("object"==typeof y?y.x:"number"==typeof y?y:0)||4,P=("object"==typeof y?y.y:"number"==typeof y?y:0)||4,!w){w=!0;var r=function(a){y=x?g.isDescendant(m.doc.elementFromPoint(a.changedTouches?a.changedTouches[0].pageX-m.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-m.global.pageYOffset:
a.clientY),C):y&&(a.changedTouches?a.changedTouches[0].target:a.target)==C&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-m.global.pageXOffset:a.clientX)-F)<=O&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-m.global.pageYOffset:a.clientY)-A)<=P};m.doc.addEventListener(e,function(a){f.isRight(a)||(r(a),x&&a.preventDefault())},!0);m.doc.addEventListener(d,function(a){if(!f.isRight(a)&&(r(a),y)){S=(new Date).getTime();var b=x?C:a.target;"LABEL"===b.tagName&&(b=g.byId(b.getAttribute("for"))||
b);var e=a.changedTouches?a.changedTouches[0]:a,d=function(b){var c=document.createEvent("MouseEvents");c._dojo_click=!0;c.initMouseEvent(b,!0,!0,a.view,a.detail,e.screenX,e.screenY,e.clientX,e.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);return c},k=d("mousedown"),m=d("mouseup"),n=d("click");setTimeout(function(){c.emit(b,"mousedown",k);c.emit(b,"mouseup",m);c.emit(b,"click",n);S=(new Date).getTime()},0)}},!0);a=function(a){m.doc.addEventListener(a,function(c){var e=c.target;y&&(!c._dojo_click&&
(new Date).getTime()<=S+1E3&&!("INPUT"==e.tagName&&b.contains(e,"dijitOffScreen")))&&(c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),"click"==a&&(("INPUT"!=e.tagName||"radio"==e.type&&(b.contains(e,"dijitCheckBoxInput")||b.contains(e,"mblRadioButton"))||"checkbox"==e.type&&(b.contains(e,"dijitCheckBoxInput")||b.contains(e,"mblCheckBox")))&&"TEXTAREA"!=e.tagName&&"AUDIO"!=e.tagName&&"VIDEO"!=e.tagName)&&c.preventDefault())},!0)};a("click");a("mousedown");a("mouseup")}}}
var u=5>d("ios"),q=d("pointer-events")||d("MSPointer"),r=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=d("MSPointer")?"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1):"pointer"+b;return a}(),s=d("touch-events"),w,y,x=!1,C,F,A,O,P,S,K,I;d("touch")&&(q?e(function(){m.doc.addEventListener(r.down,function(a){k(a,r.move,r.up)},!0)}):e(function(){function b(c){var e=a.delegate(c,{bubbles:!0});6<=d("ios")&&(e.touches=c.touches,e.altKey=c.altKey,e.changedTouches=c.changedTouches,
e.ctrlKey=c.ctrlKey,e.metaKey=c.metaKey,e.shiftKey=c.shiftKey,e.targetTouches=c.targetTouches);return e}I=m.body();m.doc.addEventListener("touchstart",function(a){K=(new Date).getTime();var b=I;I=a.target;c.emit(b,"dojotouchout",{relatedTarget:I,bubbles:!0});c.emit(I,"dojotouchover",{relatedTarget:b,bubbles:!0});k(a,"touchmove","touchend")},!0);c(m.doc,"touchmove",function(a){K=(new Date).getTime();var e=m.doc.elementFromPoint(a.pageX-(u?0:m.global.pageXOffset),a.pageY-(u?0:m.global.pageYOffset));
e&&(I!==e&&(c.emit(I,"dojotouchout",{relatedTarget:e,bubbles:!0}),c.emit(e,"dojotouchover",{relatedTarget:I,bubbles:!0}),I=e),c.emit(e,"dojotouchmove",b(a))||a.preventDefault())});c(m.doc,"touchend",function(a){K=(new Date).getTime();var e=m.doc.elementFromPoint(a.pageX-(u?0:m.global.pageXOffset),a.pageY-(u?0:m.global.pageYOffset))||m.body();c.emit(e,"dojotouchend",b(a))})}));h={press:n("mousedown","touchstart",r.down),move:n("mousemove","dojotouchmove",r.move),release:n("mouseup","dojotouchend",
r.up),cancel:n(f.leave,"touchcancel",q?r.cancel:null),over:n("mouseover","dojotouchover",r.over),out:n("mouseout","dojotouchout",r.out),enter:f._eventHandler(n("mouseover","dojotouchover",r.over)),leave:f._eventHandler(n("mouseout","dojotouchout",r.out))};return l.touch=h})},"spinner/spin":function(){define([],function(){function l(a,b){var c=document.createElement(a||"div"),e;for(e in b)c[e]=b[e];return c}function h(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function g(a,
b,c,e){var d=["opacity",b,~~(100*a),c,e].join("-");c=0.01+100*(c/e);e=Math.max(1-(1-a)/b*(100-c),a);var k=n.substring(0,n.indexOf("Animation")).toLowerCase();m[d]||(p.insertRule("@"+(k&&"-"+k+"-"||"")+"keyframes "+d+"{0%{opacity:"+e+"}"+c+"%{opacity:"+a+"}"+(c+0.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+a+"}100%{opacity:"+e+"}}",p.cssRules.length),m[d]=1);return d}function b(a,b){var c=a.style,d,k;b=b.charAt(0).toUpperCase()+b.slice(1);for(k=0;k<e.length;k++)if(d=e[k]+b,void 0!==c[d])return d;if(void 0!==
c[b])return b}function a(a,c){for(var e in c)a.style[b(a,e)||e]=c[e];return a}function c(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)void 0===a[e]&&(a[e]=c[e])}return a}function d(a){this.opts=c(a||{},d.defaults,k)}function f(){function b(a,c){return l("\x3c"+a+' xmlns\x3d"urn:schemas-microsoft.com:vml" class\x3d"spin-vml"\x3e',c)}p.addRule(".spin-vml","behavior:url(#default#VML)");d.prototype.lines=function(c,e){function d(){return a(b("group",{coordsize:m+" "+m,coordorigin:-f+
" "+-f}),{width:m,height:m})}function k(c,m,r){h(g,h(a(d(),{rotation:360/e.lines*c+"deg",left:~~m}),h(a(b("roundrect",{arcsize:e.corners}),{width:f,height:e.width,left:e.radius,top:-e.width>>1,filter:r}),b("fill",{color:"string"==typeof e.color?e.color:e.color[c%e.color.length],opacity:e.opacity}),b("stroke",{opacity:0}))))}var f=e.length+e.width,m=2*f,n=2*-(e.width+e.length)+"px",g=a(d(),{position:"absolute",top:n,left:n});if(e.shadow)for(n=1;n<=e.lines;n++)k(n,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius\x3d2,makeshadow\x3d1,shadowopacity\x3d.3)");
for(n=1;n<=e.lines;n++)k(n);return h(c,g)};d.prototype.opacity=function(a,b,c,e){a=a.firstChild;e=e.shadow&&e.lines||0;if(a&&b+e<a.childNodes.length&&(a=(a=(a=a.childNodes[b+e])&&a.firstChild)&&a.firstChild))a.opacity=c}}var e=["webkit","Moz","ms","O"],m={},n,p=function(){var a=l("style",{type:"text/css"});h(document.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}(),k={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,
zIndex:2E9,className:"spinner",top:"50%",left:"50%",position:"absolute"};d.defaults={};c(d.prototype,{spin:function(b){this.stop();var c=this,e=c.opts,d=c.el=a(l(0,{className:e.className}),{position:e.position,width:0,zIndex:e.zIndex});a(d,{left:e.left,top:e.top});b&&b.insertBefore(d,b.firstChild||null);d.setAttribute("role","progressbar");c.lines(d,c.opts);if(!n){var k=0,f=(e.lines-1)*(1-e.direction)/2,m,g=e.fps,h=g/e.speed,p=(1-e.opacity)/(h*e.trail/100),u=h/e.lines;(function K(){k++;for(var a=
0;a<e.lines;a++)m=Math.max(1-(k+(e.lines-a)*u)%h*p,e.opacity),c.opacity(d,a*e.direction+f,m,e);c.timeout=c.el&&setTimeout(K,~~(1E3/g))})()}return c},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0);return this},lines:function(b,c){function e(b,k){return a(l(),{position:"absolute",width:c.length+c.width+"px",height:c.width+"px",background:b,boxShadow:k,transformOrigin:"left",transform:"rotate("+~~(360/c.lines*d+c.rotate)+"deg) translate("+
c.radius+"px,0)",borderRadius:(c.corners*c.width>>1)+"px"})}for(var d=0,k=(c.lines-1)*(1-c.direction)/2,f;d<c.lines;d++)f=a(l(),{position:"absolute",top:1+~(c.width/2)+"px",transform:c.hwaccel?"translate3d(0,0,0)":"",opacity:c.opacity,animation:n&&g(c.opacity,c.trail,k+d*c.direction,c.lines)+" "+1/c.speed+"s linear infinite"}),c.shadow&&h(f,a(e("#000","0 0 4px #000"),{top:"2px"})),h(b,h(f,e("string"==typeof c.color?c.color:c.color[d%c.color.length],"0 0 1px rgba(0,0,0,.1)")));return b},opacity:function(a,
b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var u=a(l("group"),{behavior:"url(#default#VML)"});!b(u,"transform")&&u.adj?f():n=b(u,"animation");return d})},"mw-log/Log":function(){define(["dojo/date/locale"],function(l){return function(){function h(b){f&&(e||!c||!c.log)&&f.apply(a,b)}function g(b){d[b]=function(){if(0!==m&&c&&c[b])if("assert"===b){if(!arguments[0])if(a.ScriptEngine){var e=Array.prototype.slice.call(arguments);e.shift();c[b](!1,e)}else c[b].apply(c,arguments)}else if(a.ScriptEngine)if(-1!==
b.indexOf("profile"))c[b]();else c[b](arguments[0]);else c[b].apply(c,arguments)}}function b(b,e){d[e]=function(){var d=Array.prototype.slice.call(arguments),f=l.format(new Date,{selector:"date",datePattern:"h:m:s.SSS"}),g=[e].concat(d),d=[f].concat(d);n.push(g);n.length>p&&n.shift();h(g);if(c&&(0<m?m>b:k.length+m<=b))if(c.firebug&&"error"!==e)c[e].apply(a,d);else if(c[e])c[e](d);else c.log(d)}}var a=this,c=a.console,d={},f,e,m=9,n=[],p=25,k=["error","warn","info","debug","log"],u="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),
q;for(q=u.length;0<=(q-=1);)g(u[q]);for(q=k.length;0<=(q-=1);)b(q,k[q]);d.setLevel=function(a){m="number"===typeof a?a:9};d.setCallback=function(a,b,c){var d=n.length;f=a||null;e="boolean"===typeof b?b:!1;for(a=d-("number"===c?c:d);a<d;)h(n[a+=1])};return d}()})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(l,h,g,b,a,c,d,f,e){function m(a,c,e,f){return f.replace(/([a-z])\1*/ig,
function(m){var n,g,h=m.charAt(0);m=m.length;var p=["abbr","wide","narrow"];switch(h){case "G":n=c[4>m?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":n=a.getFullYear();switch(m){case 1:break;case 2:if(!e.fullYear){n=String(n);n=n.substr(n.length-2);break}default:g=!0}break;case "Q":case "q":n=Math.ceil((a.getMonth()+1)/3);g=!0;break;case "M":case "L":n=a.getMonth();3>m?(n+=1,g=!0):(h=["months","L"==h?"standAlone":"format",p[m-3]].join("-"),n=c[h][n]);break;case "w":n=k._getWeekOfYear(a,
0);g=!0;break;case "d":n=a.getDate();g=!0;break;case "D":n=k._getDayOfYear(a);g=!0;break;case "e":case "c":if(n=a.getDay(),2>m){n=(n-b.getFirstDayOfWeek(e.locale)+8)%7;break}case "E":n=a.getDay();3>m?(n+=1,g=!0):(h=["days","c"==h?"standAlone":"format",p[m-3]].join("-"),n=c[h][n]);break;case "a":h=12>a.getHours()?"am":"pm";n=e[h]||c["dayPeriods-format-wide-"+h];break;case "h":case "H":case "K":case "k":g=a.getHours();switch(h){case "h":n=g%12||12;break;case "H":n=g;break;case "K":n=g%12;break;case "k":n=
g||24}g=!0;break;case "m":n=a.getMinutes();g=!0;break;case "s":n=a.getSeconds();g=!0;break;case "S":n=Math.round(a.getMilliseconds()*Math.pow(10,m-3));g=!0;break;case "v":case "z":if(n=k._getZone(a,!0,e))break;m=4;case "Z":h=k._getZone(a,!1,e);h=[0>=h?"+":"-",d.pad(Math.floor(Math.abs(h)/60),2),d.pad(Math.abs(h)%60,2)];4==m&&(h.splice(0,0,"GMT"),h.splice(3,0,":"));n=h.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+f);}g&&(n=d.pad(n,m));return n})}function n(a,
b,c,e){var d=function(a){return a};b=b||d;c=c||d;e=e||d;var k=a.match(/(''|[^'])+/g),f="'"==a.charAt(0);h.forEach(k,function(a,e){a?(k[e]=(f?c:b)(a.replace(/''/g,"'")),f=!f):k[e]=""});return e(k.join(""))}function p(a,b,e,d){d=c.escapeString(d);e.strict||(d=d.replace(" a"," ?a"));return d.replace(/([a-z])\1*/ig,function(c){var d;d=c.charAt(0);var k=c.length,f="",m="";e.strict?(1<k&&(f="0{"+(k-1)+"}"),2<k&&(m="0{"+(k-2)+"}")):(f="0?",m="0{0,2}");switch(d){case "y":d="\\d{2,4}";break;case "M":case "L":d=
2<k?"\\S+?":"1[0-2]|"+f+"[1-9]";break;case "D":d="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+f+"[1-9][0-9]|"+m+"[1-9]";break;case "d":d="3[01]|[12]\\d|"+f+"[1-9]";break;case "w":d="[1-4][0-9]|5[0-3]|"+f+"[1-9]";break;case "E":case "e":case "c":d=".+?";break;case "h":d="1[0-2]|"+f+"[1-9]";break;case "k":d="1[01]|"+f+"\\d";break;case "H":d="1\\d|2[0-3]|"+f+"\\d";break;case "K":d="1\\d|2[0-4]|"+f+"[1-9]";break;case "m":case "s":d="[0-5]\\d";break;case "S":d="\\d{"+k+"}";break;case "a":k=e.am||b["dayPeriods-format-wide-am"];
f=e.pm||b["dayPeriods-format-wide-pm"];d=k+"|"+f;e.strict||(k!=k.toLowerCase()&&(d+="|"+k.toLowerCase()),f!=f.toLowerCase()&&(d+="|"+f.toLowerCase()),-1!=d.indexOf(".")&&(d+="|"+d.replace(/\./g,"")));d=d.replace(/\./g,"\\.");break;default:d=".*"}a&&a.push(c);return"("+d+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var k={};l.setObject(e.id.replace(/\//g,"."),k);k._getZone=function(a,b,c){return b?g.getTimezoneName(a):a.getTimezoneOffset()};k.format=function(b,c){c=c||{};var e=a.normalizeLocale(c.locale),
d=c.formatLength||"short",e=k._getGregorianBundle(e),f=[],g=l.hitch(this,m,b,e,c);if("year"==c.selector)return n(e["dateFormatItem-yyyy"]||"yyyy",g);var h;"date"!=c.selector&&(h=c.timePattern||e["timeFormat-"+d])&&f.push(n(h,g));"time"!=c.selector&&(h=c.datePattern||e["dateFormat-"+d])&&f.push(n(h,g));return 1==f.length?f[0]:e["dateTimeFormat-"+d].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return f[b]})};k.regexp=function(a){return k._parseInfo(a).regexp};k._parseInfo=function(b){b=b||{};
var c=a.normalizeLocale(b.locale),c=k._getGregorianBundle(c),e=b.formatLength||"short",d=b.datePattern||c["dateFormat-"+e],f=b.timePattern||c["timeFormat-"+e],e="date"==b.selector?d:"time"==b.selector?f:c["dateTimeFormat-"+e].replace(/\{(\d+)\}/g,function(a,b){return[f,d][b]}),m=[];return{regexp:n(e,l.hitch(this,p,m,c,b)),tokens:m,bundle:c}};k.parse=function(a,b){var c=/[\u200E\u200F\u202A\u202E]/g,e=k._parseInfo(b),d=e.tokens,f=e.bundle,c=RegExp("^"+e.regexp.replace(c,"")+"$",e.strict?"":"i").exec(a&&
a.replace(c,""));if(!c)return null;var m=["abbr","wide","narrow"],n=[1970,0,1,0,0,0,0],p="",c=h.every(c,function(a,c){if(!c)return!0;var e=d[c-1],k=e.length,e=e.charAt(0);switch(e){case "y":if(2!=k&&b.strict)n[0]=a;else if(100>a)a=Number(a),e=""+(new Date).getFullYear(),k=100*e.substring(0,2),e=Math.min(Number(e.substring(2,4))+20,99),n[0]=a<e?k+a:k-100+a;else{if(b.strict)return!1;n[0]=a}break;case "M":case "L":if(2<k){if(k=f["months-"+("L"==e?"standAlone":"format")+"-"+m[k-3]].concat(),b.strict||
(a=a.replace(".","").toLowerCase(),k=h.map(k,function(a){return a.replace(".","").toLowerCase()})),a=h.indexOf(k,a),-1==a)return!1}else a--;n[1]=a;break;case "E":case "e":case "c":k=f["days-"+("c"==e?"standAlone":"format")+"-"+m[k-3]].concat();b.strict||(a=a.toLowerCase(),k=h.map(k,function(a){return a.toLowerCase()}));a=h.indexOf(k,a);if(-1==a)return!1;break;case "D":n[1]=0;case "d":n[2]=a;break;case "a":k=b.am||f["dayPeriods-format-wide-am"];e=b.pm||f["dayPeriods-format-wide-pm"];if(!b.strict){var g=
/\./g;a=a.replace(g,"").toLowerCase();k=k.replace(g,"").toLowerCase();e=e.replace(g,"").toLowerCase()}if(b.strict&&a!=k&&a!=e)return!1;p=a==e?"p":a==k?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;n[3]=a;break;case "m":n[4]=a;break;case "s":n[5]=a;break;case "S":n[6]=a}return!0}),e=+n[3];"p"===p&&12>e?n[3]=e+12:"a"===p&&12==e&&(n[3]=0);e=new Date(n[0],n[1],n[2],n[3],n[4],n[5],n[6]);b.strict&&e.setFullYear(n[0]);var q=d.join(""),l=-1!=q.indexOf("d"),q=-1!=q.indexOf("M");
if(!c||q&&e.getMonth()>n[1]||l&&e.getDate()>n[2])return null;if(q&&e.getMonth()<n[1]||l&&e.getDate()<n[2])e=g.add(e,"hour",1);return e};var u=[],q={};k.addCustomFormats=function(a,b){u.push({pkg:a,name:b});q={}};k._getGregorianBundle=function(b){if(q[b])return q[b];var c={};h.forEach(u,function(e){e=a.getLocalization(e.pkg,e.name,b);c=l.mixin(c,e)},this);return q[b]=c};k.addCustomFormats(e.id.replace(/\/date\/locale$/,".cldr"),"gregorian");k.getNames=function(a,b,c,e){var d;e=k._getGregorianBundle(e);
a=[a,c,b];"standAlone"==c&&(c=a.join("-"),d=e[c],1==d[0]&&(d=void 0));a[1]="format";return(d||e[a.join("-")]).concat()};k.isWeekend=function(a,c){var e=b.getWeekend(c),d=(a||new Date).getDay();e.end<e.start&&(e.end+=7,d<e.start&&(d+=7));return d>=e.start&&d<=e.end};k._getDayOfYear=function(a){return g.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};k._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),e=Math.floor((k._getDayOfYear(a)+
(c-b+7)%7-1)/7);c==b&&e++;return e};return k})},"dojo/date":function(){define(["./has","./_base/lang"],function(l,h){var g={getDaysInMonth:function(b){var a=b.getMonth();return 1==a&&g.isLeapYear(b)?29:[31,28,31,30,31,30,31,31,30,31,30,31][a]},isLeapYear:function(b){b=b.getFullYear();return!(b%400)||!(b%4)&&!!(b%100)},getTimezoneName:function(b){var a=b.toString(),c="",d=a.indexOf("(");if(-1<d)c=a.substring(++d,a.indexOf(")"));else if(d=/([A-Z\/]+) \d{4}$/,a=a.match(d))c=a[1];else if(a=b.toLocaleString(),
d=/ ([A-Z\/]+)$/,a=a.match(d))c=a[1];return"AM"==c||"PM"==c?"":c},compare:function(b,a,c){b=new Date(+b);a=new Date(+(a||new Date));"date"==c?(b.setHours(0,0,0,0),a.setHours(0,0,0,0)):"time"==c&&(b.setFullYear(0,0,0),a.setFullYear(0,0,0));return b>a?1:b<a?-1:0},add:function(b,a,c){var d=new Date(+b),f=!1,e="Date";switch(a){case "day":break;case "weekday":var m;(a=c%5)?m=parseInt(c/5):(a=0<c?5:-5,m=0<c?(c-5)/5:(c+5)/5);var n=b.getDay(),g=0;6==n&&0<c?g=1:0==n&&0>c&&(g=-1);n+=a;if(0==n||6==n)g=0<c?2:
-2;c=7*m+a+g;break;case "year":e="FullYear";f=!0;break;case "week":c*=7;break;case "quarter":c*=3;case "month":f=!0;e="Month";break;default:e="UTC"+a.charAt(0).toUpperCase()+a.substring(1)+"s"}if(e)d["set"+e](d["get"+e]()+c);f&&d.getDate()<b.getDate()&&d.setDate(0);return d},difference:function(b,a,c){a=a||new Date;c=c||"day";var d=a.getFullYear()-b.getFullYear(),f=1;switch(c){case "quarter":b=b.getMonth();a=a.getMonth();b=Math.floor(b/3)+1;a=Math.floor(a/3)+1;f=a+4*d-b;break;case "weekday":d=Math.round(g.difference(b,
a,"day"));c=parseInt(g.difference(b,a,"week"));f=d%7;if(0==f)d=5*c;else{var e=0,m=b.getDay();a=a.getDay();c=parseInt(d/7);f=d%7;b=new Date(b);b.setDate(b.getDate()+7*c);b=b.getDay();if(0<d)switch(!0){case 6==m:e=-1;break;case 0==m:e=0;break;case 6==a:e=-1;break;case 0==a:e=-2;break;case 5<b+f:e=-2}else if(0>d)switch(!0){case 6==m:e=0;break;case 0==m:e=1;break;case 6==a:e=2;break;case 0==a:e=1;break;case 0>b+f:e=2}d=d+e-2*c}f=d;break;case "year":f=d;break;case "month":f=a.getMonth()-b.getMonth()+12*
d;break;case "week":f=parseInt(g.difference(b,a,"day")/7);break;case "day":f/=24;case "hour":f/=60;case "minute":f/=60;case "second":f/=1E3;case "millisecond":f*=a.getTime()-b.getTime()}return Math.round(f)}};h.mixin(h.getObject("dojo.date",!0),g);return g})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(l,h){var g={};l.setObject("dojo.cldr.supplemental",g);g.getFirstDayOfWeek=function(b){b={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,
qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[g._region(b)];return void 0===b?1:b};g._region=function(b){b=h.normalizeLocale(b);b=b.split("-");var a=b[1];a?4==a.length&&(a=b[2]):a={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",
as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",
ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",
sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",
bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",
guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",
luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",
sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",
yav:"cm",zza:"tr"}[b[0]];return a};g.getWeekend=function(b){var a=g._region(b);b={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[a];a={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[a];void 0===b&&(b=6);void 0===a&&(a=0);return{start:b,end:a}};return g})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(l,h){var g={};h.setObject("dojo.regexp",g);g.escapeString=function(b,
a){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(b){return a&&-1!=a.indexOf(b)?b:"\\"+b})};g.buildGroupRE=function(b,a,c){if(!(b instanceof Array))return a(b);for(var d=[],f=0;f<b.length;f++)d.push(a(b[f]));return g.group(d.join("|"),c)};g.group=function(b,a){return"("+(a?"?:":"")+b+")"};return g})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(l,h){return l("dijit._Contained",null,{_getSibling:function(g){var b=this.getParent();return b&&b._getSiblingOfChild&&
b._getSiblingOfChild(this,"previous"==g?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var g=this.getParent();return!g||!g.getIndexOfChild?-1:g.getIndexOfChild(this)}})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),
function(l,h,g,b,a,c,d,f,e,m,n,p){h=h("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);l.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,c.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes||{})this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function a(c){b=b.concat(l.map(b,function(a){return a+c}),"dijit"+c)}var b=this.baseClass.split(" ");
this.isLeftToRight()||a("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(c);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var c=this.stateNode||this.domNode,e={};l.forEach(c.className.split(" "),function(a){e[a]=!0});"_stateClasses"in this&&l.forEach(this._stateClasses,function(a){delete e[a]});l.forEach(b,
function(a){e[a]=!0});var d=[],f;for(f in e)d.push(f);c.className=d.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,c,e){function d(e){b.toggle(a,c+"Active",e)}if(!this.disabled&&!this.readOnly)switch(e.type){case "mouseover":case "MSPointerOver":case "pointerover":b.toggle(a,c+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":b.toggle(a,c+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":d(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":b.toggle(a,c+"Focused",!0);break;case "blur":case "focusout":b.toggle(a,c+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});f(function(){function a(b,c,e){if(!e||!g.isDescendant(e,c))for(;c&&c!=e;c=c.parentNode)if(c._cssState){var d=p.getEnclosingWidget(c);d&&(c==d.domNode?d._cssMouseEvent(b):d._subnodeCssMouseEvent(c,c._cssState,b))}}var b=m.body(),c;d(b,
e.over,function(b){a(b,b.target,b.relatedTarget)});d(b,e.out,function(b){a(b,b.target,b.relatedTarget)});d(b,n.press,function(b){c=b.target;a(b,c)});d(b,n.release,function(b){a(b,c);c=null});d(b,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=p.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return h})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(l,h,g,b){function a(a){if((a.keyCode===
l.ENTER||a.keyCode===l.SPACE)&&!/input|button|textarea/i.test(a.target.nodeName))for(a=a.target;a;a=a.parentNode)if(a.dojoClick)return!0}var c;g(document,"keydown",function(b){a(b)?(c=b.target,b.preventDefault()):c=null});g(document,"keyup",function(b){a(b)&&b.target==c&&(c=null,g.emit(b.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:b.ctrlKey,shiftKey:b.shiftKey,metaKey:b.metaKey,altKey:b.altKey,_origType:b.type}))});var d=function(a,b){a.dojoClick=!0;return g(a,"click",b)};d.click=d;d.press=function(a,
c){var d=g(a,b.press,function(a){("mousedown"!=a.type||h.isLeft(a))&&c(a)}),n=g(a,"keydown",function(a){(a.keyCode===l.ENTER||a.keyCode===l.SPACE)&&c(a)});return{remove:function(){d.remove();n.remove()}}};d.release=function(a,c){var d=g(a,b.release,function(a){("mouseup"!=a.type||h.isLeft(a))&&c(a)}),n=g(a,"keyup",function(a){(a.keyCode===l.ENTER||a.keyCode===l.SPACE)&&c(a)});return{remove:function(){d.remove();n.remove()}}};d.move=b.move;return d})},"dijit/_FocusMixin":function(){define(["./focus",
"./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(l,h,g,b){b.extend(h,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return g("dijit._FocusMixin",null,{_focusManager:l})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(l,h,g,b,a,c,d,f,e,m,n,p,k,u,q,r,s){var w,y,x=new (h([p,d],{curNode:null,activeStack:[],constructor:function(){var a=f.hitch(this,function(a){g.isDescendant(this.curNode,a)&&this.set("curNode",null);g.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});l.before(c,"empty",a);l.before(c,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var c=this,d=a.document&&a.document.body;if(d){var k=n("pointer-events")?"pointerdown":n("MSPointer")?
"MSPointerDown":n("touch-events")?"mousedown, touchstart":"mousedown",f=e(a.document,k,function(a){if(!a||!(a.target&&null==a.target.parentNode))c._onTouchNode(b||a.target,"mouse")}),m=e(d,"focusin",function(a){if(a.target.tagName){var e=a.target.tagName.toLowerCase();"#document"==e||"body"==e||(q.isFocusable(a.target)?c._onFocusNode(b||a.target):c._onTouchNode(b||a.target))}}),g=e(d,"focusout",function(a){c._onBlurNode(b||a.target)});return{remove:function(){f.remove();m.remove();g.remove();d=f=
m=g=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<w+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(f.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<y+100||(this._clearActiveWidgetsTimer=setTimeout(f.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(c,e){y=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);a.contains(c,"dijitPopup")&&(c=c.firstChild);var d=[];try{for(;c;){var f=b.get(c,"dijitPopupParent");if(f)c=r.byId(f).domNode;else if(c.tagName&&"body"==c.tagName.toLowerCase()){if(c===k.body())break;c=u.get(c.ownerDocument).frameElement}else{var m=c.getAttribute&&c.getAttribute("widgetId"),n=m&&r.byId(m);n&&!("mouse"==e&&n.get("disabled"))&&d.unshift(m);c=c.parentNode}}}catch(g){}this._setStack(d,
e)},_onFocusNode:function(a){a&&9!=a.nodeType&&(w=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,e=c.length-1,d=a.length-1;if(a[d]!=c[e]){this.set("activeStack",a);var k;for(k=e;0<=k&&c[k]!=a[k];k--)if(e=r.byId(c[k]))e._hasBeenBlurred=!0,e.set("focused",!1),e._focusManager==this&&e._onBlur(b),
this.emit("widget-blur",e,b);for(k++;k<=d;k++)if(e=r.byId(a[k]))e.set("focused",!0),e._focusManager==this&&e._onFocus(b),this.emit("widget-focus",e,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));m(function(){var a=x.registerWin(u.get(document));n("ie")&&e(window,"unload",function(){a&&(a.remove(),a=null)})});s.focus=function(a){x.focus(a)};for(var C in x)/^_/.test(C)||(s.focus[C]="function"==typeof x[C]?f.hitch(x,C):x[C]);x.watch(function(a,b,c){s.focus[a]=c});return x})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),
function(l,h,g,b,a,c,d){var f={_isElementShown:function(a){var c=b.get(a);return"hidden"!=c.visibility&&"collapsed"!=c.visibility&&"none"!=c.display&&"hidden"!=g.get(a,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case "a":return g.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var c=a.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;b=c.body}catch(d){try{b=a.contentWindow.document.body}catch(k){return!1}}return b&&
("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(a){return g.get(a,"disabled")?void 0:g.has(a,"tabIndex")?+g.get(a,"tabIndex"):f.hasDefaultTabStop(a)?0:void 0},isTabNavigable:function(a){return 0<=f.effectiveTabIndex(a)},isFocusable:function(a){return-1<=f.effectiveTabIndex(a)},_getTabNavigable:function(a){function b(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&
a.name&&a.name.toLowerCase()}var d,h,k,l,q,r,s={},w=f._isElementShown,y=f.effectiveTabIndex,x=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=c("ie")&&"HTML"!==a.scopeName||!w(a))){var e=y(a);if(0<=e){if(0==e)d||(d=a),h=a;else if(0<e){if(!k||e<l)l=e,k=a;if(!q||e>=r)r=e,q=a}e=b(a);g.get(a,"checked")&&e&&(s[e]=a)}"SELECT"!=a.nodeName.toUpperCase()&&x(a)}};w(a)&&x(a);return{first:s[b(d)]||d,last:s[b(h)]||h,lowest:s[b(k)]||k,highest:s[b(q)]||q}},getFirstInTabbingOrder:function(a,
b){var c=f._getTabNavigable(h.byId(a,b));return c.lowest?c.lowest:c.first},getLastInTabbingOrder:function(a,b){var c=f._getTabNavigable(h.byId(a,b));return c.last?c.last:c.highest}};a.mixin(d,f);return f})},"mw-mixins/property/SizeMixin":function(){define(["dojo/_base/lang","dojo/_base/declare"],function(l,h){return h(null,{width:"auto",height:"auto",_allowedValues:["auto"],postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwSizeMixin");this.on("updatelayout",l.hitch(this,
this._updateLayout))},startup:function(){this.inherited(arguments);this._updateLayout()},_updateLayout:function(){this._setWidthAttr(this.get("width"));this._setHeightAttr(this.get("height"))},_setWidthAttr:function(g){this._setSize("width",g)},_setHeightAttr:function(g){this._setSize("height",g)},_validateSizeInput:function(g){if(!("string"===typeof g&&"auto"===g||"number"===typeof g&&0<g))throw Error(" Property should either be 'auto' or a positive integer");},_setSize:function(g,b){this._validateSizeInput(b);
this._set(g,b);if(this._started){var a="",a=0<=this._allowedValues.indexOf(b)?b:this._getAdjustedSize(g,b,this.domNode);this.domNode.style[g]=a}},_getAdjustedSize:function(g,b,a){return b+"px"}})})},"matlab_login_framework/LoginStatusUpdate":function(){define(["dojo/_base/declare","dojo/aspect","dojo/_base/lang","mw-messageservice/MessageService"],function(l,h,g,b){return l(null,{constructor:function(a){this._handleMethod=a;h.after(b,"onConnected",g.hitch(this,this.start),!1);this._started=!1;b.start()},
start:function(){this._lrpChannel="/LoginChannel";var a=this;this._started||b.subscribe(this._lrpChannel,this._handleMessage,this).then(function(){a._started=!0})},stop:function(){this._started&&(b.unsubscribe(this._lrpChannel,this._handleMessage,this),b.stop(),this._started=!1)},_handleMessage:function(a){a=JSON.parse(a.data);this._handleMethod(a)}})})},"mw-messageservice/MessageService":function(){define("dojo/_base/lang dojo/aspect ./messageserviceimpl/MessageServiceAsync ./messageserviceimpl/MessageServiceBase ./messageserviceimpl/MessageServiceReqResp mw-remote/Remote".split(" "),
function(l,h,g,b,a,c){var d=new b;b={messageService:d,subscribe:l.hitch(d,"subscribe"),unsubscribe:l.hitch(d,"unsubscribe"),publish:l.hitch(d,"publish"),start:l.hitch(d,"start"),stop:l.hitch(d,"stop"),isRunning:l.hitch(d,"isStarted"),isStarted:l.hitch(d,"isStarted"),isConnected:l.hitch(d,"isConnected"),isFatallyDisconnected:l.hitch(d,"isFatallyDisconnected"),isDisconnected:l.hitch(d,"isDisconnected"),setLatency:l.hitch(d,"setLatency"),setErrorRate:l.hitch(d,"setErrorRate"),onConnected:function(){},
onDisconnected:function(){},onReconnected:function(){},onFatallyDisconnected:function(){},onNotConnected:function(){},handleMessage:l.hitch(d,"handleMessage"),internalMotwDisableStart:function(){this._startFunction=this.start;this.start=function(){}},internalMotwEnableStart:function(){this._startFunction&&(this.start=this._startFunction,this._startFunction=null)}};h.after(d,"onConnected",l.hitch(b,"onConnected"),!0);h.after(d,"onDisconnected",l.hitch(b,"onDisconnected"),!0);h.after(d,"onReconnected",
l.hitch(b,"onReconnected"),!0);h.after(d,"onFatallyDisconnected",l.hitch(b,"onFatallyDisconnected"),!0);h.after(d,"onNotConnected",l.hitch(b,"onNotConnected"),!0);var f=c.enableServerOnWorkerAsync;c.enableServerOnWorkerAsync=function(){f();d.setDelegate(new g(c))};var e=c.disableServerOnWorkerAsync;c.disableServerOnWorkerAsync=function(){e();d.setDelegate(new a(c,d))};c.isServerOnWorkerAsyncEnabled()?c.enableServerOnWorkerAsync():c.disableServerOnWorkerAsync();return b})},"mw-messageservice/messageserviceimpl/MessageServiceAsync":function(){define("dojo/_base/declare dojo/_base/config dojo/aspect dojo/json dojo/Deferred dojox/cometd/cometd dojox/cometd/AckExtension mw-log/Log mw-remote/iframeproxy/IframeProxyClient".split(" "),
function(l,h,g,b,a,c,d,f,e){var m;c.JSON.toJSON=b.stringify;c.JSON.fromJSON=b.parse;var n=0,p=0,k={};setInterval(function(){n+=200;Object.keys(k).forEach(function(a){var b=k[a];b.execTime<=n&&(b.func(),delete k[a])})},200);var u=function(a,b,f){var m=new c.LongPollingTransport,m=c.Transport.derive(m);m.xhrSend=function(a){var c=b.sendMessage(a.body,a.url,{headers:a.headers});c.then(a.onSuccess,function(b){a.onError(b,b)});return{abort:function(){c.cancel()}}};var g=new c.Cometd(a),h=c.Utils.setTimeout;
c.Utils.setTimeout=function(a,b,c){if(0===c)return h(a,b,c);p+=1;k[p]={func:function(){try{b()}catch(a){g._debug("Exception invoking timed function",b,a)}},execTime:n+c};return p};c.Utils.clearTimeout=function(a){delete k[a]};c.WebSocket=e.WebSocket;e.WebSocket.proxyClient=b;g.registerExtension("ack",new d);f.websocket&&g.registerTransport("websocket",new c.WebSocketTransport,0);g.registerTransport("long-polling",m,1);return g};m=l([],{BASE_PREFIX:"/matlab",BASE_END_POINT:"messageservice/async",logCometdLifecycle:!1,
logCometdSubscriptions:!1,constructor:function(a,b,c,d){this.remote=a;this.constructCometD=b||u;this.cometdProperties=d||{connectTimeout:5E3,maxBackoff:1E4,logLevel:"info",maxNetworkDelay:2E4,appendMessageTypeToURL:!1,autoBatch:!0};this._webSocket={"try":!0,connectedAtLeastOnce:!1};a=["maxNetworkDelay","connectTimeout","logLevel"];if(b=h.cometdProperties)for(d=0;d<a.length;d+=1){var k=a[d];void 0!==b[k]&&(this.cometdProperties[k]=b[k])}this.workerProxyAsyncClient=c||new e("remoteWorkerAsyncProducer");
var m=this;g.after(this.workerProxyAsyncClient,"onError",function(a){m.cometd&&(m.logCometdLifecycle&&f.info("MessageServiceAsync disconnecting cometd due to IFrame error."),m.cometd.disconnect());m.onConnectionError(a)},!0);this.subscriptions={};this.recentMessages=[];this._deferredCleanupFunction=function(){m._deferredCleanup=!1;m.recentMessages=[]}},onMessage:function(a){},onConnectionError:function(a){},connect:function(){this.routingHost=m.workerHostOverride||this.remote.getWorkerRoutingHost();
this.routingKey=this.remote.getWorkerRoutingKey();this.computeToken=this.remote.getComputeSessionId();this.workerProxyAsyncClient.setRemotePageHost(this.routingHost,this.routingKey,this.computeToken);var b={};m.enableWebsocket&&this._webSocket.try?b.websocket=!0:(b.websocket=!1,this._webSocket.try=!1);var c=this.constructCometD("messageService",this.workerProxyAsyncClient,b);this.cometd=c;this.logCometdLifecycle&&f.info("MessageServiceAsync constructing new cometd instance.");b=this._createOneShotMessagePromise("/meta/handshake");
this._createListenerForUnknownClient();var e=this,d=new a;b.then(function(a){e.logCometdLifecycle&&f.info("MessageServiceAsync cometd handshake successful.",a,c.getClientId(),c);c.isDisconnected()?(f.error("MessageServiceAsync cometd handshake successful but still disconnected!"),c.disconnect(),d.reject(a)):("websocket"===c.getTransport().getType()&&(e._webSocket.connectedAtLeastOnce=!0),d.resolve(a))},function(a){e.logCometdLifecycle&&f.info("MessageServiceAsync disconnecting cometd due to handshake failure.",
a,c.getClientId(),c);c.disconnect();if(a.request&&a.request.supportedConnectionTypes){var b=a.request.supportedConnectionTypes;1<b.length&&("websocket"===b[0]&&!e._webSocket.connectedAtLeastOnce)&&(e._webSocket.try=!1)}d.reject(a)});this.cometdProperties.url=this._getEndpoint();c.init(this.cometdProperties);return d.promise},disconnect:function(){this.logCometdLifecycle&&f.info("MessageServiceAsync disconnecting cometd due to disconnect call.",this.cometd.getClientId());var a=this._createOneShotMessagePromise("/meta/disconnect");
this.cometd.disconnect();return a},cleanup:function(){this.cometd&&(this.logCometdLifecycle&&f.info("MessageServiceAsync disconnecting cometd due to cleanup call.",this.cometd,this.cometd&&this.cometd.getClientId()),this.cometd.disconnect(),this.cometd=null)},delegateConnected:function(){return this.cometd?!this.cometd.isDisconnected():!1},doPublish:function(a,b){var c=this._createOneShotMessagePromise("/meta/publish");this.cometd.publish(this._getRequestChannel(a),b);return c},doSubscribe:function(a){this.logCometdSubscriptions&&
f.info("MessageServiceAsync subscribing cometd to channel: "+a);var b=this._createOneShotMessagePromise("/meta/subscribe");this.subscriptions[a]=this.cometd.subscribe(this._getRequestChannel(a),this,this._handleCometResponse);return b},doUnsubscribe:function(b){if(this.subscriptions[b]){this.logCometdSubscriptions&&f.info("MessageServiceAsync unsubscribing cometd from channel: "+b);var c=this._createOneShotMessagePromise("/meta/unsubscribe");this.cometd.unsubscribe(this.subscriptions[b]);delete this.subscriptions[b];
return c}return(new a).resolve({successful:!0})},doStartBatch:function(){this.cometd.startBatch()},doEndBatch:function(){this.cometd.endBatch()},doSetLatency:function(a){this.workerProxyAsyncClient.setLatency(a)},doSetErrorRate:function(a){this.workerProxyAsyncClient.setErrorRate(a)},_handleCometResponse:function(a){if(this._shouldHandleMessage(a))this.onMessage(this._stripBasePrefixAndConvertToJson(a))},_shouldHandleMessage:function(a){return!a.id&&0>this.recentMessages.indexOf(a)?(this.recentMessages.push(a),
this._deferRecentMessagesCleanup(),!0):!1},_deferRecentMessagesCleanup:function(){this._deferredCleanup||(this._deferredCleanup=setTimeout(this._deferredCleanupFunction,0))},_createOneShotMessagePromise:function(b){var c=new a;this._addOneShotListener(b,function(a){a.successful?c.resolve(a):(f.warn("Message failed: ",a),c.reject(a))});return c.promise},_addOneShotListener:function(a,b){var c=this,e=this.cometd,d;d=this.cometd.addListener(a,function(a){e.removeListener(d);b.apply(c,arguments)})},_createListenerForUnknownClient:function(){var a=
this.cometd,b=this;a.addListener("/meta/connect",function(c){!c.successful&&(c.advice&&"handshake"===c.advice.reconnect)&&(a.disconnect(),b.onConnectionError(c.error))})},_getEndpoint:function(){return this.routingHost+this.BASE_END_POINT+"?routingkey\x3d"+this.routingKey},_getRequestChannel:function(a){return this.BASE_PREFIX+a},_stripBasePrefixAndConvertToJson:function(a){return{channel:a.channel.substring(this.BASE_PREFIX.length),data:a.data}}});m.enableWebsocket=!1;m.workerHostOverride=!1;0<=
location.search.indexOf("websocket\x3don")&&(m.enableWebsocket=!0);return m})},"dojox/cometd/cometd":function(){define(function(){var l=this.org=this.org||{};l.cometd={};l.cometd.JSON={};l.cometd.JSON.toJSON=l.cometd.JSON.fromJSON=function(h){throw"Abstract";};l.cometd.Utils={};l.cometd.Utils.isString=function(h){return void 0===h||null===h?!1:"string"===typeof h||h instanceof String};l.cometd.Utils.isArray=function(h){return void 0===h||null===h?!1:h instanceof Array};l.cometd.Utils.inArray=function(h,
g){for(var b=0;b<g.length;++b)if(h===g[b])return b;return-1};l.cometd.Utils.setTimeout=function(h,g,b){return window.setTimeout(function(){try{g()}catch(a){h._debug("Exception invoking timed function",g,a)}},b)};l.cometd.Utils.clearTimeout=function(h){window.clearTimeout(h)};l.cometd.TransportRegistry=function(){var h=[],g={};this.getTransportTypes=function(){return h.slice(0)};this.findTransportTypes=function(b,a,c){for(var d=[],f=0;f<h.length;++f){var e=h[f];!0===g[e].accept(b,a,c)&&d.push(e)}return d};
this.negotiateTransport=function(b,a,c,d){for(var f=0;f<h.length;++f)for(var e=h[f],m=0;m<b.length;++m)if(e===b[m]){var n=g[e];if(!0===n.accept(a,c,d))return n}return null};this.add=function(b,a,c){for(var d=!1,f=0;f<h.length;++f)if(h[f]===b){d=!0;break}d||("number"!==typeof c?h.push(b):h.splice(c,0,b),g[b]=a);return!d};this.find=function(b){for(var a=0;a<h.length;++a)if(h[a]===b)return g[b];return null};this.remove=function(b){for(var a=0;a<h.length;++a)if(h[a]===b)return h.splice(a,1),a=g[b],delete g[b],
a;return null};this.clear=function(){h=[];g={}};this.reset=function(){for(var b=0;b<h.length;++b)g[h[b]].reset()}};l.cometd.Transport=function(){var h,g;this.registered=function(b,a){h=b;g=a};this.unregistered=function(){g=h=null};this._debug=function(){g._debug.apply(g,arguments)};this._mixin=function(){return g._mixin.apply(g,arguments)};this.getConfiguration=function(){return g.getConfiguration()};this.getAdvice=function(){return g.getAdvice()};this.setTimeout=function(b,a){return l.cometd.Utils.setTimeout(g,
b,a)};this.clearTimeout=function(b){l.cometd.Utils.clearTimeout(b)};this.convertToMessages=function(b){if(l.cometd.Utils.isString(b))try{return l.cometd.JSON.fromJSON(b)}catch(a){throw this._debug("Could not convert to JSON the following string",'"'+b+'"'),a;}if(l.cometd.Utils.isArray(b))return b;if(void 0===b||null===b)return[];if(b instanceof Object)return[b];throw"Conversion Error "+b+", typeof "+typeof b;};this.accept=function(b,a,c){throw"Abstract";};this.getType=function(){return h};this.send=
function(b,a){throw"Abstract";};this.reset=function(){this._debug("Transport",h,"reset")};this.abort=function(){this._debug("Transport",h,"aborted")};this.toString=function(){return this.getType()}};l.cometd.Transport.derive=function(h){function g(){}g.prototype=h;return new g};l.cometd.RequestTransport=function(){function h(a){for(;0<n.length;){var b=n[0],c=b[0],b=b[1];if(c.url===a.url&&c.sync===a.sync)n.shift(),a.messages=a.messages.concat(c.messages),this._debug("Coalesced",c.messages.length,"messages from request",
b.id);else break}}function g(a,b){this.transportSend(a,b);b.expired=!1;if(!a.sync){var c=this.getConfiguration().maxNetworkDelay,e=c;!0===b.metaConnect&&(e+=this.getAdvice().timeout);this._debug("Transport",this.getType(),"waiting at most",e,"ms for the response, maxNetworkDelay",c);var d=this;b.timeout=this.setTimeout(function(){b.expired=!0;b.xhr&&b.xhr.abort();var c="Request "+b.id+" of transport "+d.getType()+" exceeded "+e+" ms max network delay";d._debug(c);d.complete(b,!1,b.metaConnect);a.onFailure(b.xhr,
a.messages,"timeout",c)},e)}}function b(a){var b=++f,c={id:b,metaConnect:!1};m.length<this.getConfiguration().maxConnections-1?(m.push(c),g.call(this,a,c)):(this._debug("Transport",this.getType(),"queueing request",b,"envelope",a),n.push([a,c]))}function a(a,c){var e=l.cometd.Utils.inArray(a,m);0<=e&&m.splice(e,1);if(0<n.length){var e=n.shift(),d=e[0],f=e[1];this._debug("Transport dequeued request",f.id);if(c)this.getConfiguration().autoBatch&&h.call(this,d),b.call(this,d),this._debug("Transport completed request",
a.id,d);else{var g=this;this.setTimeout(function(){g.complete(f,!1,f.metaConnect);d.onFailure(f.xhr,d.messages,"error","Previous request failed")},0)}}}var c=new l.cometd.Transport,d=l.cometd.Transport.derive(c),f=0,e=null,m=[],n=[];d.complete=function(b,c,d){if(d){b=b.id;this._debug("Transport",this.getType(),"metaConnect complete, request",b);if(null!==e&&e.id!==b)throw"Longpoll request mismatch, completing request "+b;e=null}else a.call(this,b,c)};d.transportSend=function(a,b){throw"Abstract";
};d.transportSuccess=function(a,b,c){if(!b.expired)if(this.clearTimeout(b.timeout),this.complete(b,!0,b.metaConnect),c&&0<c.length)a.onSuccess(c);else a.onFailure(b.xhr,a.messages,"Empty HTTP response")};d.transportFailure=function(a,b,c,e){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!1,b.metaConnect),a.onFailure(b.xhr,a.messages,c,e))};d.send=function(a,c){if(c){if(null!==e)throw"Concurrent metaConnect requests not allowed, request id\x3d"+e.id+" not yet completed";var d=++f;this._debug("Transport",
this.getType(),"metaConnect send, request",d,"envelope",a);d={id:d,metaConnect:!0};g.call(this,a,d);e=d}else b.call(this,a)};d.abort=function(){c.abort();for(var a=0;a<m.length;++a){var b=m[a];this._debug("Aborting request",b);b.xhr&&b.xhr.abort()}e&&(this._debug("Aborting metaConnect request",e),e.xhr&&e.xhr.abort());this.reset()};d.reset=function(){c.reset();e=null;m=[];n=[]};return d};l.cometd.LongPollingTransport=function(){var h=new l.cometd.RequestTransport,g=l.cometd.Transport.derive(h),b=
!0;g.accept=function(a,c,d){return b||!c};g.xhrSend=function(a){throw"Abstract";};g.transportSend=function(a,c){this._debug("Transport",this.getType(),"sending request",c.id,"envelope",a);var d=this;try{var f=!0;c.xhr=this.xhrSend({transport:this,url:a.url,sync:a.sync,headers:this.getConfiguration().requestHeaders,body:l.cometd.JSON.toJSON(a.messages),onSuccess:function(e){d._debug("Transport",d.getType(),"received response",e);var f=!1;try{var g=d.convertToMessages(e);0===g.length?(b=!1,d.transportFailure(a,
c,"no response",null)):(f=!0,d.transportSuccess(a,c,g))}catch(k){d._debug(k),f||(b=!1,d.transportFailure(a,c,"bad response",k))}},onError:function(e,n){b=!1;f?d.setTimeout(function(){d.transportFailure(a,c,e,n)},0):d.transportFailure(a,c,e,n)}});f=!1}catch(e){b=!1,this.setTimeout(function(){d.transportFailure(a,c,"error",e)},0)}};g.reset=function(){h.reset();b=!0};return g};l.cometd.CallbackPollingTransport=function(){var h=new l.cometd.RequestTransport,h=l.cometd.Transport.derive(h);h.accept=function(g,
b,a){return!0};h.jsonpSend=function(g){throw"Abstract";};h.transportSend=function(g,b){for(var a=this,c=0,d=g.messages.length,f=[];0<d;){var e=l.cometd.JSON.toJSON(g.messages.slice(c,c+d)),e=g.url.length+encodeURI(e).length;if(2E3<e){if(1===d){var m="Bayeux message too big ("+e+" bytes, max is 2000) for transport "+this.getType();this.setTimeout(function(){a.transportFailure(g,b,"error",m)},0);return}--d}else f.push(d),c+=d,d=g.messages.length-c}var n=g;if(1<f.length){c=0;d=f[0];this._debug("Transport",
this.getType(),"split",g.messages.length,"messages into",f.join(" + "));n=this._mixin(!1,{},g);n.messages=g.messages.slice(c,d);n.onSuccess=g.onSuccess;n.onFailure=g.onFailure;for(e=1;e<f.length;++e){var h=this._mixin(!1,{},g),c=d,d=d+f[e];h.messages=g.messages.slice(c,d);h.onSuccess=g.onSuccess;h.onFailure=g.onFailure;this.send(h,b.metaConnect)}}this._debug("Transport",this.getType(),"sending request",b.id,"envelope",n);try{var k=!0;this.jsonpSend({transport:this,url:n.url,sync:n.sync,headers:this.getConfiguration().requestHeaders,
body:l.cometd.JSON.toJSON(n.messages),onSuccess:function(c){var e=!1;try{var d=a.convertToMessages(c);0===d.length?a.transportFailure(n,b,"no response"):(e=!0,a.transportSuccess(n,b,d))}catch(k){a._debug(k),e||a.transportFailure(n,b,"bad response",k)}},onError:function(c,e){k?a.setTimeout(function(){a.transportFailure(n,b,c,e)},0):a.transportFailure(n,b,c,e)}});k=!1}catch(u){this.setTimeout(function(){a.transportFailure(n,b,"error",u)},0)}};return h};l.cometd.WebSocketTransport=function(){function h(){var a=
d.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",a);var b=this,c=null,e=d.getConfiguration().connectTimeout;0<e&&(c=this.setTimeout(function(){c=null;k||(b._debug("Transport",b.getType(),"timed out while connecting to URL",a,":",e,"ms"),b.onClose(1002,"Connect Timeout"))},e));var f=new l.cometd.WebSocket(a),m=function(a){var e=a?a.code:1E3;a=a?a.reason:void 0;b._debug("WebSocket closed",e,"/",a,f);c&&(b.clearTimeout(c),c=null);if(f!==p)b._debug("Ignoring close event, WebSocket",
p);else b.onClose(e,a)};f.onopen=function(){b._debug("WebSocket opened",f);c&&(b.clearTimeout(c),c=null);if(f!==p)b._debug("Ignoring open event, WebSocket",p);else b.onOpen()};f.onclose=m;f.onerror=function(){m({code:1002})};f.onmessage=function(a){b._debug("WebSocket message",a,f);if(f!==p)b._debug("Ignoring message event, WebSocket",p);else b.onMessage(a)};p=f;this._debug("Transport",this.getType(),"configured callbacks on",f)}function g(a,b){var c=l.cometd.JSON.toJSON(a.messages);p.send(c);this._debug("Transport",
this.getType(),"sent",a,"metaConnect \x3d",b);var e=c=this.getConfiguration().maxNetworkDelay;b&&(e+=this.getAdvice().timeout,u=!0);for(var d=[],f=0;f<a.messages.length;++f){var k=a.messages[f];if(k.id){d.push(k.id);var m=p;n[k.id]=this.setTimeout(function(){m&&m.close(1E3,"Timeout")},e)}}this._debug("Transport",this.getType(),"waiting at most",e,"ms for messages",d,"maxNetworkDelay",c,", timeouts:",n)}function b(a,b){try{null===p?h.call(this):k&&g.call(this,a,b)}catch(c){var e=p;this.setTimeout(function(){a.onFailure(e,
a.messages,"error",c)},0)}}var a=new l.cometd.Transport,c=l.cometd.Transport.derive(a),d,f=!0,e=!1,m={},n={},p=null,k=!1,u=!1,q;c.onOpen=function(){this._debug("Transport",this.getType(),"opened",p);e=k=!0;this._debug("Sending pending messages",m);for(var a in m){var b=m[a],c=b[0],b=b[1];q=c.onSuccess;g.call(this,c,b)}};c.onMessage=function(a){this._debug("Transport",this.getType(),"received websocket message",a,p);var b=!1;a=this.convertToMessages(a.data);for(var c=[],e=0;e<a.length;++e){var d=a[e];
if((/^\/meta\//.test(d.channel)||void 0===d.data)&&d.id){c.push(d.id);var f=n[d.id];f&&(this.clearTimeout(f),delete n[d.id],this._debug("Transport",this.getType(),"removed timeout for message",d.id,", timeouts",n))}"/meta/connect"===d.channel&&(u=!1);"/meta/disconnect"===d.channel&&!u&&(b=!0)}e=!1;for(d=0;d<c.length;++d){var k=c[d],g;for(g in m){var f=g.split(","),h=l.cometd.Utils.inArray(k,f);if(0<=h){e=!0;f.splice(h,1);k=m[g][0];h=m[g][1];delete m[g];0<f.length&&(m[f.join(",")]=[k,h]);break}}}e&&
this._debug("Transport",this.getType(),"removed envelope, envelopes",m);q.call(this,a);b&&p.close(1E3,"Disconnect")};c.onClose=function(a,b){this._debug("Transport",this.getType(),"closed",a,b,p);f=e;for(var c in n)this.clearTimeout(n[c]);n={};for(var d in m)c=m[d][0],m[d][1]&&(u=!1),c.onFailure(p,c.messages,"closed "+a+"/"+b);m={};null!==p&&k&&p.close(1E3,"Close");k=!1;p=null};c.registered=function(b,c){a.registered(b,c);d=c};c.accept=function(a,b,c){return f&&!!l.cometd.WebSocket&&!1!==d.websocketEnabled};
c.send=function(a,c){this._debug("Transport",this.getType(),"sending",a,"metaConnect \x3d",c);for(var e=[],d=0;d<a.messages.length;++d){var f=a.messages[d];f.id&&e.push(f.id)}m[e.join(",")]=[a,c];this._debug("Transport",this.getType(),"stored envelope, envelopes",m);b.call(this,a,c)};c.abort=function(){a.abort();if(null!==p)try{p.close(1001)}catch(b){this._debug(b)}this.reset()};c.reset=function(){a.reset();null!==p&&k&&p.close(1E3,"Reset");f=!0;e=!1;n={};m={};p=null;k=!1;q=null};return c};l.cometd.Cometd=
function(h){function g(a){return l.cometd.Utils.isString(a)}function b(a){return void 0===a||null===a?!1:"function"===typeof a}function a(a,c){if(window.console){var e=window.console[a];b(e)&&e.apply(window.console,c)}}function c(){for(var a in H)for(var b=H[a],c=b.length-1;0<=c;--c){var e=b[c];e&&!e.listener&&(b.splice(c,1),t._debug("Removed subscription",e,"for channel",a))}}function d(a){M!==a&&(t._debug("Status",M,"-\x3e",a),M=a)}function f(){return"disconnecting"===M||"disconnected"===M}function e(a,
c,e,d,f){try{return c.call(a,d)}catch(k){t._debug("Exception during execution of extension",e,k);a=t.onExtensionException;if(b(a)){t._debug("Invoking extension exception callback",e,k);try{a.call(t,k,e,f,d)}catch(m){t._info("Exception during execution of exception callback in extension",e,m)}}return d}}function m(a){for(var c=0;c<B.length&&!(void 0===a||null===a);++c){var d=B[c],f=d.extension.outgoing;b(f)&&(d=e(d.extension,f,d.name,a,!0),a=void 0===d?a:d)}return a}function n(a,c){var e=H[a];if(e&&
0<e.length)for(var d=e.length-1;0<=d;--d){var f=e[d];try{f.callback.call(f.scope,c)}catch(k){t._debug("Exception during notification",f,c,k);var m=t.onListenerException;if(b(m)){t._debug("Invoking listener exception callback",f,k);try{m.call(t,k,f.handle,f.listener,c)}catch(n){t._info("Exception during execution of listener callback",f,n)}}}}}function p(a,b){n(a,b);for(var c=a.split("/"),e=c.length-1,d=e;0<d;--d){var f=c.slice(0,d).join("/")+"/*";d===e&&n(f,b);f+="*";n(f,b)}}function k(){null!==T&&
l.cometd.Utils.clearTimeout(T);T=null}function u(a){k();var b=D.interval+z;t._debug("Function scheduled in",b,"ms, interval \x3d",D.interval,"backoff \x3d",z,a);T=l.cometd.Utils.setTimeout(t,a,b)}function q(a,c,e,d){for(var f=0;f<c.length;++f){var k=c[f];k.id=""+ ++fa;L&&(k.clientId=L);var n=void 0;b(k._callback)&&(n=k._callback,delete k._callback);k=m(k);void 0!==k&&null!==k?(c[f]=k,n&&(U[k.id]=n)):c.splice(f--,1)}0!==c.length&&(f=v.url,v.appendMessageTypeToURL&&(f.match(/\/$/)||(f+="/"),d&&(f+=
d)),a={url:f,sync:a,messages:c,onSuccess:function(a){try{da.call(t,a)}catch(b){t._debug("Exception during handling of messages",b)}},onFailure:function(a,b,c,e){try{V.call(t,a,b,c,e)}catch(d){t._debug("Exception during handling of failure",d)}}},t._debug("Send",a),G.send(a,e))}function r(a){0<J||!0===R?N.push(a):q(!1,[a],!1)}function s(){var a=N;N=[];0<a.length&&q(!1,a,!1)}function w(){d("connecting");u(function(){if(!f()){var a={channel:"/meta/connect",connectionType:G.getType()};W||(a.advice={timeout:0});
d("connecting");t._debug("Connect sent",a);q(!1,[a],!0,"connect");d("connected")}})}function y(a){a&&(D=t._mixin(!1,{},v.advice,a),t._debug("New advice",D))}function x(a){k();a&&G.abort();L=null;d("disconnected");z=J=0;0<N.length&&(V.call(t,void 0,N,"error","Disconnected"),N=[])}function C(a){L=null;c();f()?(E.reset(),y(v.advice)):y(t._mixin(!1,D,{reconnect:"retry"}));J=0;R=!0;X=a;a=E.findTransportTypes("1.0",Q,v.url);var b=t._mixin(!1,{},X,{version:"1.0",minimumVersion:"0.9",channel:"/meta/handshake",
supportedConnectionTypes:a,advice:{timeout:D.timeout,interval:D.interval}});G=E.negotiateTransport(a,"1.0",Q,v.url);t._debug("Initial transport is",G.getType());d("handshaking");t._debug("Handshake sent",b);q(!1,[b],!1,"handshake")}function F(){d("handshaking");R=!0;u(function(){C(X)})}function A(a){p("/meta/handshake",a);p("/meta/unsuccessful",a);!f()&&"none"!==D.reconnect?(z<v.maxBackoff&&(z+=v.backoffIncrement),F()):x(!1)}function O(a){p("/meta/connect",a);p("/meta/unsuccessful",a);a=f()?"none":
D.reconnect;switch(a){case "retry":w();z<v.maxBackoff&&(z+=v.backoffIncrement);break;case "handshake":E.reset();z=0;F();break;case "none":x(!1);break;default:throw"Unrecognized advice action"+a;}}function P(a){x(!0);p("/meta/disconnect",a);p("/meta/unsuccessful",a)}function S(a){p("/meta/subscribe",a);p("/meta/unsuccessful",a)}function K(a){p("/meta/unsubscribe",a);p("/meta/unsuccessful",a)}function I(a){var c=U[a.id];b(c)&&(delete U[a.id],c.call(t,a))}function Z(a){I(a);p("/meta/publish",a);p("/meta/unsuccessful",
a)}function $(a){for(var c=0;c<B.length&&!(void 0===a||null===a);++c){var d=B[v.reverseIncomingExtensions?B.length-1-c:c],k=d.extension.incoming;b(k)&&(d=e(d.extension,k,d.name,a,!1),a=void 0===d?a:d)}if(!(void 0===a||null===a))switch(y(a.advice),a.channel){case "/meta/handshake":if(a.successful){L=a.clientId;c=E.negotiateTransport(a.supportedConnectionTypes,a.version,Q,v.url);if(null===c)throw"Could not negotiate transport with server; client "+E.findTransportTypes(a.version,Q,v.url)+", server "+
a.supportedConnectionTypes;G!==c&&(t._debug("Transport",G,"-\x3e",c),G=c);R=!1;s();a.reestablish=Y;Y=!0;p("/meta/handshake",a);a=f()?"none":D.reconnect;switch(a){case "retry":z=0;w();break;case "none":x(!1);break;default:throw"Unrecognized advice action "+a;}}else A(a);break;case "/meta/connect":if(W=a.successful)switch(p("/meta/connect",a),a=f()?"none":D.reconnect,a){case "retry":z=0;w();break;case "none":x(!1);break;default:throw"Unrecognized advice action "+a;}else O(a);break;case "/meta/disconnect":a.successful?
(x(!1),p("/meta/disconnect",a)):P(a);break;case "/meta/subscribe":a.successful?p("/meta/subscribe",a):S(a);break;case "/meta/unsubscribe":a.successful?p("/meta/unsubscribe",a):K(a);break;default:void 0===a.successful?void 0!==a.data&&null!==a.data?p(a.channel,a):t._debug("Unknown message",a):a.successful?(I(a),p("/meta/publish",a)):Z(a)}}function aa(a){if(a=H[a])for(var b=0;b<a.length;++b)if(a[b])return!0;return!1}function ba(a,c){var e={scope:a,method:c};if(b(a))e.scope=void 0,e.method=a;else if(g(c)){if(!a)throw"Invalid scope "+
a;e.method=a[c];if(!b(e.method))throw"Invalid callback "+c+" for scope "+a;}else if(!b(c))throw"Invalid callback "+c;return e}function ca(a,b,c,e){b=ba(b,c);t._debug("Adding listener on",a,"with scope",b.scope,"and callback",b.method);e={channel:a,scope:b.scope,callback:b.method,listener:e};b=H[a];b||(b=[],b.subscriptionCounter=0,H[a]=b);b.push(e);c=b.subscriptionCounter;b.subscriptionCounter+=1;e.id=c;e.handle=[a,c];t._debug("Added listener",e,"for channel",a,"having id \x3d",c);return e.handle}
var t=this,ea=h||"default",Q=!1,E=new l.cometd.TransportRegistry,G,M="disconnected",fa=0,L=null,J=0,N=[],R=!1,H={},z=0,T=null,B=[],D={},X,U={},Y=!1,W=!1,v={connectTimeout:0,maxConnections:2,backoffIncrement:1E3,maxBackoff:6E4,logLevel:"info",reverseIncomingExtensions:!0,maxNetworkDelay:1E4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,advice:{timeout:6E4,interval:0,reconnect:"retry"}};this._mixin=function(a,b,c){for(var e=b||{},d=2;d<arguments.length;++d){var f=arguments[d];if(!(void 0===
f||null===f))for(var k in f){var m=f[k],n=e[k];m!==b&&void 0!==m&&(e[k]=a&&"object"===typeof m&&null!==m?m instanceof Array?this._mixin(a,n instanceof Array?n:[],m):this._mixin(a,"object"===typeof n&&!(n instanceof Array)?n:{},m):m)}}return e};this._warn=function(){a("warn",arguments)};this._info=function(){"warn"!==v.logLevel&&a("info",arguments)};this._debug=function(){"debug"===v.logLevel&&a("debug",arguments)};this._isCrossDomain=function(a){return a&&a!==window.location.host};var da,V;this.send=
r;this.receive=$;da=function(a){t._debug("Received",a);for(var b=0;b<a.length;++b)$(a[b])};V=function(a,b,c,e){t._debug("handleFailure",a,b,c,e);for(c=0;c<b.length;++c){var d=b[c];switch(d.channel){case "/meta/handshake":A({successful:!1,failure:!0,channel:"/meta/handshake",request:d,xhr:a,advice:{reconnect:"retry",interval:z}});break;case "/meta/connect":e=a;W=!1;O({successful:!1,failure:!0,channel:"/meta/connect",request:d,xhr:e,advice:{reconnect:"retry",interval:z}});break;case "/meta/disconnect":P({successful:!1,
failure:!0,channel:"/meta/disconnect",request:d,xhr:a,advice:{reconnect:"none",interval:0}});break;case "/meta/subscribe":S({successful:!1,failure:!0,channel:"/meta/subscribe",request:d,xhr:a,advice:{reconnect:"none",interval:0}});break;case "/meta/unsubscribe":K({successful:!1,failure:!0,channel:"/meta/unsubscribe",request:d,xhr:a,advice:{reconnect:"none",interval:0}});break;default:Z({successful:!1,failure:!0,channel:d.channel,request:d,xhr:a,advice:{reconnect:"none",interval:0}})}}};this.registerTransport=
function(a,c,e){if(e=E.add(a,c,e))this._debug("Registered transport",a),b(c.registered)&&c.registered(a,this);return e};this.getTransportTypes=function(){return E.getTransportTypes()};this.unregisterTransport=function(a){var c=E.remove(a);null!==c&&(this._debug("Unregistered transport",a),b(c.unregistered)&&c.unregistered());return c};this.unregisterTransports=function(){E.clear()};this.findTransport=function(a){return E.find(a)};this.configure=function(a){t._debug("Configuring cometd object with",
a);g(a)&&(a={url:a});a||(a={});v=t._mixin(!1,v,a);if(!v.url)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var b=/(^https?:\/\/)?(((\[[^\]]+\])|([^:\/\?#]+))(:(\d+))?)?([^\?#]*)(.*)?/.exec(v.url);a=b[8];var c=b[9];Q=t._isCrossDomain(b[2]);v.appendMessageTypeToURL&&(void 0!==c&&0<c.length?(t._info("Appending message type to URI "+a+c+" is not supported, disabling 'appendMessageTypeToURL' configuration"),v.appendMessageTypeToURL=!1):(b=a.split("/"),c=b.length-
1,a.match(/\/$/)&&(c-=1),0<=b[c].indexOf(".")&&(t._info("Appending message type to URI "+a+" is not supported, disabling 'appendMessageTypeToURL' configuration"),v.appendMessageTypeToURL=!1)))};this.init=function(a,b){this.configure(a);this.handshake(b)};this.handshake=function(a){d("disconnected");Y=!1;C(a)};this.disconnect=function(a,b){if(!f()){void 0===b&&"boolean"!==typeof a&&(b=a,a=!1);var c=this._mixin(!1,{},b,{channel:"/meta/disconnect"});d("disconnecting");q(!0===a,[c],!1,"disconnect")}};
this.startBatch=function(){++J};this.endBatch=function(){--J;if(0>J)throw"Calls to startBatch() and endBatch() are not paired";0===J&&(!f()&&!R)&&s()};this.batch=function(a,b){var c=ba(a,b);this.startBatch();try{c.method.call(c.scope),this.endBatch()}catch(e){throw this._debug("Exception during execution of batch",e),this.endBatch(),e;}};this.addListener=function(a,b,c){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(a))throw"Illegal argument type: channel must be a string";
return ca(a,b,c,!0)};this.removeListener=function(a){if(!l.cometd.Utils.isArray(a))throw"Invalid argument: expected subscription, not "+a;var b=H[a[0]],c;if(0<b.length){c=a[1];a:{for(var e=0;e<b.length;){if(b[e].id===c){c=e;break a}e+=1}c=-1}-1!==c&&(b.splice(c,1),t._debug("Removed listener",a))}};this.clearListeners=function(){H={}};this.subscribe=function(a,c,e,d){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(a))throw"Illegal argument type: channel must be a string";
if(f())throw"Illegal state: already disconnected";b(c)&&(d=e,e=c,c=void 0);var k=!aa(a),m=ca(a,c,e,!1);k&&(k=this._mixin(!1,{},d,{channel:"/meta/subscribe",subscription:a}),r(k));return m};this.unsubscribe=function(a,b){if(1>arguments.length)throw"Illegal arguments number: required 1, got "+arguments.length;if(f())throw"Illegal state: already disconnected";this.removeListener(a);var c=a[0];aa(c)||(c=this._mixin(!1,{},b,{channel:"/meta/unsubscribe",subscription:c}),r(c))};this.clearSubscriptions=function(){c()};
this.publish=function(a,c,e,d){if(1>arguments.length)throw"Illegal arguments number: required 1, got "+arguments.length;if(!g(a))throw"Illegal argument type: channel must be a string";if(f())throw"Illegal state: already disconnected";b(c)?(d=c,c=e={}):b(e)&&(d=e,e={});var k=this._mixin(!1,{},e,{channel:a,data:c,_callback:d});r(k)};this.getStatus=function(){return M};this.isDisconnected=f;this.setBackoffIncrement=function(a){v.backoffIncrement=a};this.getBackoffIncrement=function(){return v.backoffIncrement};
this.getBackoffPeriod=function(){return z};this.setLogLevel=function(a){v.logLevel=a};this.registerExtension=function(a,c){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(a))throw"Illegal argument type: extension name must be a string";for(var e=!1,d=0;d<B.length;++d)if(B[d].name===a){e=!0;break}if(e)return this._info("Could not register extension with name",a,"since another extension with the same name already exists"),!1;B.push({name:a,extension:c});
this._debug("Registered extension",a);b(c.registered)&&c.registered(a,this);return!0};this.unregisterExtension=function(a){if(!g(a))throw"Illegal argument type: extension name must be a string";for(var c=!1,e=0;e<B.length;++e){var d=B[e];if(d.name===a){B.splice(e,1);c=!0;this._debug("Unregistered extension",a);a=d.extension;b(a.unregistered)&&a.unregistered();break}}return c};this.getExtension=function(a){for(var b=0;b<B.length;++b){var c=B[b];if(c.name===a)return c.extension}return null};this.getName=
function(){return ea};this.getClientId=function(){return L};this.getURL=function(){return v.url};this.getTransport=function(){return G};this.getConfiguration=function(){return this._mixin(!0,{},v)};this.getAdvice=function(){return this._mixin(!0,{},D)};l.cometd.WebSocket=window.WebSocket;l.cometd.WebSocket||(l.cometd.WebSocket=window.MozWebSocket)};return l.cometd})},"dojox/cometd/AckExtension":function(){define(["./cometd"],function(l){return l.AckExtension=function(){var h,g=!1,b=-1;this.registered=
function(a,b){h=b;h._debug("AckExtension: executing registration callback",void 0)};this.unregistered=function(){h._debug("AckExtension: executing unregistration callback",void 0);h=null};this.incoming=function(a){var c=a.channel;if("/meta/handshake"==c)g=a.ext&&a.ext.ack,h._debug("AckExtension: server supports acks",g);else if(g&&"/meta/connect"==c&&a.successful&&(c=a.ext)&&"number"===typeof c.ack)b=c.ack,h._debug("AckExtension: server sent ack id",b);return a};this.outgoing=function(a){var c=a.channel;
"/meta/handshake"==c?(a.ext||(a.ext={}),a.ext.ack=h&&!1!==h.ackEnabled,b=-1):g&&"/meta/connect"==c&&(a.ext||(a.ext={}),a.ext.ack=b,h._debug("AckExtension: client sending ack id",b));return a}}})},"mw-remote/iframeproxy/IframeProxyClient":function(){define("dojo/_base/connect dojo/_base/declare dojo/_base/Deferred dojo/_base/json dojo/_base/lang dojo/aspect dojo/dom-construct require mw-log/Log ./CheckUrlService".split(" "),function(l,h,g,b,a,c,d,f,e,m){var n=this,p=h([],{IFRAME_TIMEOUT:2E4,LATEST_VERSION:"1.5",
REMOTE_PROXY:"/remote/proxy/",constructor:function(a){this.iframeId=a||"remoteProducer";this._messageId=0;this._loaded=!1;this._pendingQueue=[];this._transactions={};this._uploadTargetCallbacks={};this._loadTimeoutHandle=this._checkUrl=null;this._errorRate=0},setRemotePageHost:function(a,b,c,e,d){a=this._combineUriPaths(a||"","/");b=b||"";d=d||this.LATEST_VERSION;e=e||"";this.computeToken=c;a===this._host&&b===this._key&&e===this._proxyUrl&&d===this._version||(this._errorLoading=this._loaded=!1,this._host=
a,this._key=b,this._version=d,this._proxyUrl=e,a=this._calculateUrls(a,b,d,e),this._createIframe(a))},_calculateUrls:function(a,b,c,e){var d=this.REMOTE_PROXY+c+"/iframeProxyRelease.html";c=this.REMOTE_PROXY+c+"/CheckJsFile.js";e&&(d=e);d=this._combineUriPaths(a,d).split("?")[0];d+=b?"?routingkey\x3d"+b:"";c=this._combineUriPaths(a,c);c=b?c+("?routingkey\x3d"+b):c+("?time\x3d"+(new Date).getTime());return{fastFailUrl:c,iFrameUrl:d}},_createIframe:function(b){var c=b.fastFailUrl,f=this;this._url=b.iFrameUrl;
this.remoteIframe&&d.destroy(this.remoteIframe);e.info("Creating iframe ["+this.iframeId+"] for "+this._url+" at "+new Date);this.remoteIframe=d.create("iframe",{id:this.iframeId,src:this._url,width:0,height:0,style:"visibility: hidden; display: none;"});this._checkUrl=(new m(c)).then(function(){},a.hitch(f,"_handleLoadTimeoutHitch"));this._loadTimeoutHandle=setTimeout(function(){f._handleLoadTimeoutHitch()},this.IFRAME_TIMEOUT);document.body.appendChild(this.remoteIframe);this._messageConnection||
(this._messageConnection=l.connect(n,"message",this,this._handleMessage))},_handleLoadTimeoutHitch:function(){if(!this._loaded)if("1.0"===this._version)this._handleLoadTimeout();else{clearTimeout(this._loadTimeoutHandle);var a=(parseFloat(this._version)-0.1).toFixed(1).toString();e.info("Unable to load proxy version "+this._version+", trying "+a+".");this.setRemotePageHost(this._host,this._key,this.computeToken,this._proxyUrl,a)}},createUploadIframeTarget:function(b,c,e){this._uploadTargetCallbacks[b]=
a.hitch(e||this,c);this._postMessage("createUploadIframe;"+b)},cancelUpload:function(a){this._postMessage("cancelUpload;"+a)},getUploadIframeProxyUrlPath:function(){return this.REMOTE_PROXY+this._version+"/uploadIframeProxy.html"},sendMessage:function(a,c,d){var f=this,m;this.computeToken&&(d=d||{},d.headers=d.headers||{},d.headers.computeToken=this.computeToken);m=this._getNewMessageId();c="sendMessage;"+m+";"+c+";"+(d?b.toJson(d):"{}");c+=";"+a;a={deferred:new g(function(){"1.0"===f._version?e.warn("Cancelling is not supported by the 1.0 remote proxy."):
f._postMessage("abort;"+m)}),id:m};this._errorLoading?a.deferred.reject("The iFrame did not load properly: "+this._url):(this._transactions[m]=a,this._postMessage(c));return a.deferred},setLatency:function(a){this._latency=a},setErrorRate:function(a){this._errorRate=a},_postMessage:function(a){this._loaded?this._postMessageNow(a):this._pendingQueue.push(a)},_handleMessage:function(a){var b,c;if(a.source===this.remoteIframe.contentWindow){c=a.data.indexOf(";");b=a.data.substring(0,c);if(!b)throw Error("Client unable to parse message, no action specified: "+
a.data);switch(b){case "ready":this._cleanupFailureChecks();this._loaded=!0;this._flushPending();break;case "sendMessageResponse":this._sendMessageResponse(a,c);break;case "uploadIframeMessage":b=a.data.indexOf(";",c+1);c=a.data.substring(c+1,b);a=a.data.substring(b+1,a.data.length);this._uploadTargetCallbacks[c](a);break;case "websocketOpened":this.onWebsocketOpen();break;case "websocketClosed":a=a.data.substring(c+1,a.data.length);a=JSON.parse(a);this.onWebsocketClose(a);break;case "websocketMsg":a=
a.data.substring(c+1,a.data.length);a=JSON.parse(a);this.onWebsocketMsg(a);break;case "websocketError":this.onWebsocketError();break;default:throw Error("Unknown action: "+b+", data: "+a.data);}}},_sendMessageResponse:function(a,c){var e,d,f=a.data.indexOf(";",c+1);e=a.data.indexOf(";",f+1);var m=a.data.substring(c+1,f),n=a.data.substring(f+1,e),f=a.data.substring(e+1,a.data.length);if(!m||!n)throw Error("Invalid message from remote iframe: "+a.data);e=this._transactions[m];if(!e)throw Error("Unknown transaction id: "+
m+", from remote iframe: "+a.data);delete this._transactions[m];if(!e.deferred.isCanceled())if("success"===n){try{d=f&&b.fromJson(f)}catch(g){d=f}d=""===d?{}:d;e.deferred.resolve(d)}else"fault"===n&&f&&(d=f.split(";"),m=d.length-1,1<=m&&(f.statusCode=d[m])),this.onError(f),e.deferred.reject(f)},_cleanupFailureChecks:function(){this._checkUrl&&!this._checkUrl.isFulfilled&&this._checkUrl.cancel("iFrame loaded...cancel URL check",!1);this._loadTimeoutHandle&&clearTimeout(this._loadTimeoutHandle);this._checkUrl=
this._loadTimeoutHandle=null},_handleLoadTimeout:function(){var a,b;this._cleanupFailureChecks();if(!this._loaded)for(b in a={code:"IframeLoadTimeout",description:"Iframe proxy loading failed due to an HTTP error",message:""},this.onError(a),this._errorLoading=!0,a=this._transactions,this._transactions={},a)a.hasOwnProperty(b)&&a[b].deferred.reject("Timeout while loading the iFrame "+this._url+" at "+new Date)},_postMessageNow:function(a){function b(){if(0<c._errorRate&&Math.random()<c._errorRate&&
0===a.indexOf("sendMessage;")){if(d=a.split(";",2)[1],f=c._transactions[d])delete c._transactions[d],e.error("Generating simulated error. Request was: ",a),c.onError("403 Forbidden;403"),f.deferred.reject("403 Forbidden;403")}else c.remoteIframe.contentWindow.postMessage(a,c._url)}var c=this,d,f;this._latency?setTimeout(b,this._latency):b()},_flushPending:function(){this._pendingQueue.forEach(this._postMessageNow,this);this._pendingQueue=[]},_getNewMessageId:function(){this._messageId+=1;return this._messageId.toString()},
onError:function(){},onWebsocketOpen:function(){},onWebsocketMsg:function(){},onWebsocketClose:function(){},onWebsocketError:function(){},_combineUriPaths:function(){return Array.prototype.slice.call(arguments).reduce(function(a,b){if(0===a.length)return b;0<b.length&&("/"===b[0]&&a.lastIndexOf("/")===a.length-1?b=b.substring(1):"/"!==b[0]&&a.lastIndexOf("/")!==a.length-1&&(a+="/"));return a+b})}});p.WebSocket=h([],{constructor:function(a){var b=this;this.proxyClient=p.WebSocket.proxyClient;this.proxyClient.computeToken&&
0<=a.indexOf("?")&&(a=a+"\x26computeToken\x3d"+this.proxyClient.computeToken);this.proxyClient._postMessage("connectWebsocket;"+a);c.after(this.proxyClient,"onWebsocketOpen",function(){b.onopen.apply(b,arguments)},!0);c.after(this.proxyClient,"onWebsocketMsg",function(){b.onmessage.apply(b,arguments)},!0);c.after(this.proxyClient,"onWebsocketClose",function(){b.onclose.apply(b,arguments)},!0);c.after(this.proxyClient,"onWebsocketError",function(){b.onerror.apply(b,arguments)},!0)},onopen:function(){},
onmessage:function(){},onclose:function(){},onerror:function(){},send:function(a){this.proxyClient._postMessage("websocketSend;"+a)},close:function(){this.proxyClient._postMessage("closeWebsocket;")}});return p})},"mw-remote/iframeproxy/CheckUrlService":function(){define(["dojo/_base/declare","dojo/dom","dojo/on","dojo/request/script","mw-log/Log"],function(l,h,g,b,a){return function(c){var d,f,e;if(!c)throw Error("Expected a valid url in urlToEmptyJsFile");d={framedoc:null};f=b.get(c,d,!0);d=h.byId(f.id,
d.frameDoc);e=g(d,"error",function(b){a.info("CheckUrlService detected an error accessing url: "+c);f.handleResponse(null,b);e.remove()});return f.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(l,h,g,b,a,c,d,f,e,m,n){function p(a,b){a.canDelete&&s._remove(a.id,b.options.frameDoc,!0)}function k(b){A&&A.length&&(a.forEach(A,function(a){s._remove(a.id,a.frameDoc);
a.frameDoc=null}),A=[]);return b.options.jsonp?!b.data:!0}function u(a){return!!this.scriptLoaded}function q(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function r(a,b){if(this.canDelete){var c=this.response.options;A.push({id:this.id,frameDoc:c.ioArgs?c.ioArgs.frameDoc:c.frameDoc});c.ioArgs&&(c.ioArgs.frameDoc=null);c.frameDoc=null}b?this.reject(b):this.resolve(a)}function s(a,b,e){var f=g.parseArgs(a,g.deepCopy({},b));a=f.url;b=f.options;var m=g.deferred(f,p,
k,b.jsonp?null:b.checkString?q:u,r);c.mixin(m,{id:w+y++,canDelete:!1});b.jsonp&&(RegExp("[?\x26]"+b.jsonp+"\x3d").test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+b.jsonp+"\x3d"+(b.frameDoc?"parent.":"")+w+"_callbacks."+m.id),m.canDelete=!0,F[m.id]=function(a){f.data=a;m.handleResponse(f)});g.notify&&g.notify.emit("send",f,m.promise.cancel);if(!b.canAttach||b.canAttach(m)){var n=s._attach(m.id,a,b.frameDoc);if(!b.jsonp&&!b.checkString)var l=d(n,x,function(a){if("load"===a.type||C.test(n.readyState))l.remove(),
m.scriptLoaded=a})}d.once(n,"error",function(a){m.reject(a);s._remove(m.id,b.frameDoc,!0)});h(m);return e?m:m.promise}m.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var w=l.id.replace(/[\/\.\-]/g,"_"),y=0,x=m("script-readystatechange")?"readystatechange":"load",C=/complete|loaded/,F=b.global[w+"_callbacks"]={},A=[];s.get=s;s._attach=function(a,b,c){c=c||n.doc;
var e=c.createElement("script");e.type="text/javascript";e.src=b;e.id=a;e.async=!0;e.charset="utf-8";return c.getElementsByTagName("head")[0].appendChild(e)};s._remove=function(a,b,c){e.destroy(f.byId(a,b));F[a]&&(c?F[a]=function(){delete F[a]}:delete F[a])};s._callbacksProperty=w+"_callbacks";return s})},"mw-messageservice/messageserviceimpl/MessageServiceBase":function(){define("dojo/_base/declare dojo/_base/json dojo/_base/lang dojo/aspect dojo/Deferred mw-statemachine/StateMachine mw-log/Log ./MessageServiceState".split(" "),
function(l,h,g,b,a,c,d,f){return l([f],{logSubscriptions:!1,constructor:function(){this.batching=!0;this.typeSerializers=[];this.typeDeserializers={};this.channelSubscriptions={}},setDelegate:function(a){this.inherited(arguments);b.after(this._delegate,"onMessage",g.hitch(this,this.handleMessage),!0)},publish:function(a,b){if(this.isConnected()||"resubscribing"===this._currentState){var c=this._queuePublish(a,this.serialize(b));this._deferProcessQueue();return c}return this._queuePublish(a,this.serialize(b))},
subscribe:function(a,b,c){this.logSubscriptions&&d.info("MessageService subscribe: "+a,b,c);this._addHandler(this.channelSubscriptions,a,b,c);return this.isConnected()||"resubscribing"===this._currentState?(a=this._queueSubscribe(a,b,c),this._deferProcessQueue(),a):this._queueSubscribe(a,b,c)},unsubscribe:function(b,c,f){this.logSubscriptions&&d.info("MessageService unsubscribe: "+b,c,f);if(this._removeHandler(this.channelSubscriptions,b,c,f))return this.isConnected()||"resubscribing"===this._currentState?
(b=this._queueUnsubscribe(b,c,f),this._deferProcessQueue(),b):(new a).resolve();d.error("Not subscribed to channel: "+b+", can't unsubscribe.");return(new a).reject("Not subscribed to channel: "+b+", can't unsubscribe.")},flush:function(){if(this.isConnected())this._processQueue();else throw Error("Can only manually flush the queue when connected.");},setLatency:function(a){this._delegate&&this._delegate.doSetLatency&&this._delegate.doSetLatency(a)},setErrorRate:function(a){this._delegate&&this._delegate.doSetErrorRate&&
this._delegate.doSetErrorRate(a)},_enterDisconnected:function(){this.inherited("_enterDisconnected",arguments);this._queuedOps=[]},_enterConnecting:function(){this.inherited("_enterConnecting",arguments);Object.keys(this.channelSubscriptions).forEach(function(a){a.subscribed=!1})},_enterConnected:function(){this.inherited("_enterConnected",arguments);this._processQueue()},_enterDisconnecting:function(){this._processQueue();this.inherited("_enterDisconnecting",arguments)},_queuePublish:function(b,
c){var d=new a;this._queuedOps.push({type:"publish",channel:b,data:c,deferred:d});return d.promise},_queueSubscribe:function(b,c,d){var f=new a;this._queuedOps.push({type:"subscribe",channel:b,handler:c,scope:d,deferred:f});return f.promise},_queueUnsubscribe:function(b,c,d){for(var f=new a,k,g=0;g<this._queuedOps.length;g++)if(k=this._queuedOps[g],"subscribe"===k.type&&k.channel===b&&k.handler===c&&k.scope===d)return this._queuedOps.splice(g,1),k.deferred.resolve(),(new a).resolve();this._queuedOps.push({type:"unsubscribe",
channel:b,handler:c,scope:d,deferred:f});return f.promise},_processQueue:function(){var a=this._delegate&&this._delegate.delegateConnected();(!this.isConnected()||!a)&&"disconnecting"!==this._currentState||(this._delegate.doStartBatch(),a=this._queuedOps,this._queuedOps=[],a.forEach(function(a){var b;"publish"===a.type?b=this._delegate.doPublish(a.channel,a.data):"subscribe"===a.type?b=this._doSubscribe(a.channel,a.handler,a.scope):"unsubscribe"===a.type&&(b=this._doUnsubscribe(a.channel,a.handler,
a.scope));b.then(a.deferred.resolve,a.deferred.reject)},this),this._delegate.doEndBatch())},_deferProcessQueue:function(){if(this.batching&&!this._deferredTimeout){var a=this;this._deferredTimeout=setTimeout(function(){a._deferredTimeout=!1;a._processQueue()},0)}else this.batching||this._processQueue()},_doSubscribe:function(b){if(this.channelSubscriptions[b].subscribed)return(new a).resolve();var c=this._delegate.doSubscribe(b);this.channelSubscriptions[b].subscribed=!0;return c},_doUnsubscribe:function(b){return this.channelSubscriptions[b]?
(new a).resolve():this._delegate.doUnsubscribe(b)},handleMessage:function(a){var b;if(a&&a.channel){a.data&&(a.data=this.deserialize(a.data));var c=a.channel.split("/");for(b=1;b<=c.length;b+=1)this._callHandlers(this.channelSubscriptions,c.slice(0,b).concat("**").join("/"),a);this._callHandlers(this.channelSubscriptions,c.slice(0,c.length-1).concat("*").join("/"),a);this._callHandlers(this.channelSubscriptions,c.concat("*").join("/"),a);this._callHandlers(this.channelSubscriptions,a.channel,a)}},
registerMessageHandler:function(a,b,c){d.error("registerMessageHandler is not supported any more.")},deregisterMessageHandler:function(a,b,c){d.error("deregisterMessageHandler is not supported any more.")},registerTypeSerializer:function(a,b,c){this.typeSerializers.push({typeMatcher:a,type:b,serializer:c})},registerTypeDeserializer:function(a,b){this.typeDeserializers[a]=b},serialize:function(a){return g.isArray(a)?this._serializeArray(a):a instanceof Number||a instanceof Boolean||g.isString(a)?a:
this._serializeObject(a)},deserialize:function(a){return g.isArray(a)?this._deserializeArray(a):a instanceof Number||a instanceof Boolean||g.isString(a)?a:this._deserializeObject(a)},_addHandler:function(a,b,c,f){var k;f=f||this;"string"===typeof c&&"function"!==typeof f[c]?d.warn("Not adding invalid handler: "+c):(k=a[b],k||(k=[],a[b]=k),a={channel:b,handler:c,scope:f},k.push(a),k.sort(function(a){return a.exclusive?-1:0}))},_removeHandler:function(a,b,c,d){var f;f=a[b];c=this._getHandlerIndex(f,
{handler:c,scope:d||this});0<=c&&f.splice(c,1);(!f||0===f.length)&&delete a[b];return 0<=c},_callHandlers:function(a,b,c){var f;if(a.hasOwnProperty(b)){a=a[b];for(f=0;f<a.length;f+=1)try{"string"===typeof a[f].handler?a[f].scope[a[f].handler].call(a[f].scope,c):a[f].handler.call(a[f].scope,c)}catch(k){d.error("Error while executing message handler on channel: "+b+", message: "+h.toJson(c)+", error: "+k)}}},_getHandlerIndex:function(a,b){if(!a)return-1;var c;for(c=0;c<a.length;c+=1)if(b.handler===
a[c].handler&&b.scope===a[c].scope)return c;return-1},_serializeObject:function(a){var b,c;for(c=0;c<this.typeSerializers.length;c+=1){var d=this.typeSerializers[c];if(d.typeMatcher(a))return{__type__:d.type,__value__:d.serializer.call(this,a)}}if(a instanceof Image)return a;for(b in a)a.hasOwnProperty(b)&&(a[b]=this.serialize(a[b]));return a},_serializeArray:function(a){var b,c=a.length;for(b=0;b<c;b+=1)a[b]=this.serialize(a[b]);return a},_deserializeObject:function(a){var b;if(void 0===a||null===
a)return null;if(a.hasOwnProperty("__type__")&&a.hasOwnProperty("__value__"))try{return this.typeDeserializers[a.__type__].call(this,a.__value__)}catch(c){d.error("Error while trying to deserialize: ",a)}for(b in a)a.hasOwnProperty(b)&&(null!==a[b]&&void 0!==a[b])&&(a[b]=this.deserialize(a[b]));return a},_deserializeArray:function(a){var b,c=a.length;for(b=0;b<c;b+=1)a[b]=this.deserialize(a[b]);return a}})})},"mw-statemachine/StateMachine":function(){define(["dojo/_base/declare","./statemachineimpl/State"],
function(l,h){return l([],{constructor:function(g){g.stateMachine=this;this.state=new h(g)},start:function(){this.state.enter()},stop:function(){this.state.exit()},_changeState:function(g,b){this.state.enter(g,b)},onEnterState:function(g){},onExitState:function(g){}})})},"mw-statemachine/statemachineimpl/State":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log ./EventTrigger ./MessageTrigger ./RemoteTrigger ./TimeoutTrigger ./Transition".split(" "),function(l,h,g,b,a,c,d,f){var e;return e=
l([],{constructor:function(a){this.stateMachine=a.stateMachine||{_changeState:function(){},onEnterState:function(){},onExitState:function(){}};this.namespace=a.namespace||"";this.name=a.name||this.getDefaultName();this.context=a.context||{};this.data=a.data||{};this.composition=a.composition||"XOR";this.defaultSubstate=a.defaultSubstate||"";this.constructSubstates(a.substates);this.constructTriggersAndTransitions(a.transitions);this.active=a.active||!1},getDefaultName:function(){var a;0<this.namespace.length?
(a=this.namespace.split("."),a=a.pop()):g.warn("State: state name is not specified.");return a||""},constructSubstates:function(a){var b={},c,d;for(c in a)a.hasOwnProperty(c)&&(d=a[c],d.name&&d.name!==c&&g.error("State: error constructing substate: "+c+", the specified names don't match: "+d.name),d.name=c,d.namespace=d.namespace||[this.namespace,this.name].join("."),d.stateMachine=d.stateMachine||this.stateMachine,d.context=d.context||this.context,b[d.name]=new e(d));this.substates=b},constructTriggersAndTransitions:function(a){var b,
c={},e=[],d;for(b in a)a.hasOwnProperty(b)&&((d=this.constructTrigger(b))&&e.push(d),c[b]=this.constructTransition(b,a[b]));this.transitions=c;this.triggers=e},constructTrigger:function(e){var f,g,k;f=e.split(" ");if(2===f.length)"subscribe"===f[0]?k=a:"response"===f[0]||"fault"===f[0]?k=c:"timeout"===f[0]&&(k=d);else if("onEnterState"!==e||"onExitState"!==e)k=b;k&&(g=new k({name:e,context:this.context,triggerHandler:h.hitch(this,this.handleTrigger)}));return g},constructTransition:function(a,b){var c;
if(h.isFunction(b)||h.isString(b)||h.isArray(b))"onEnterState"===a||"onExitState"===a?(c=b,b={},b.action=c,b.target=""):(c=b,b={},b.target=c);b.state=this;return new f(b)},enter:function(a,b){this.active||(this.active=!0,this.enableTriggers(),this.stateMachine.onEnterState(this.name),this.handleTrigger.apply(this,["onEnterState"].concat(b)));a?this.changeSubstates(a,b):this.changeToDefaultSubstate(b)},exit:function(){var a=this.activeSubstates();this.active=!1;this.disableTriggers();a.forEach(function(a){a.exit()});
this.handleTrigger("onExitState");this.stateMachine.onExitState(this.name)},enableTriggers:function(){this.triggers.forEach(function(a){a.enable()})},disableTriggers:function(){this.triggers.forEach(function(a){a.disable()})},handleTrigger:function(a){var b,c;if(this.transitions[a]&&(c=Array.prototype.slice.call(arguments,1,arguments.length),b=this.transitions[a].handleTrigger(a,c)))h.isString(b)||(c=b.args,b=b.target),this.stateMachine._changeState(b,c)},changeSubstates:function(a,b){var c=this.activeSubstates();
this.substates[a]&&(0<=c.length&&c[0].name!==a&&c.forEach(function(a){a.exit()}),this.substates[a].enter(void 0,b))},changeToDefaultSubstate:function(a){0===this.activeSubstates().length&&this.substates[this.defaultSubstate]&&this.substates[this.defaultSubstate].enter(void 0,a)},activeSubstates:function(){var a=[],b;for(b in this.substates)this.substates.hasOwnProperty(b)&&this.substates[b].active&&a.push(this.substates[b]);return a}})})},"mw-statemachine/statemachineimpl/EventTrigger":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","mw-log/Log","./Trigger"],function(l,h,g,b,a){return l(a,{constructor:function(){this.connection={}},enable:function(){h.isFunction(this.context[this.name])&&(this.cachedFunction=this.context[this.name]);this.connection=g.after(this.context,this.name,h.hitch(null,this.triggerHandler,this.name),!0)},disable:function(){this.connection.remove();this.cachedFunction&&(this.context[this.name]=this.cachedFunction)}})})},"mw-statemachine/statemachineimpl/Trigger":function(){define(["dojo/_base/declare"],
function(l){return l([],{constructor:function(h){this.name="";this.context={};this.triggerHandler=h.triggerHandler||function(){};l.safeMixin(this,h)},enable:function(){},disable:function(){}})})},"mw-statemachine/statemachineimpl/MessageTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","mw-log/Log","./Trigger"],function(l,h,g,b,a){return l(a,{constructor:function(){var a=this.name.split(" ");(2>a.length||"subscribe"!==a[0])&&b.error("Invalid trigger name for a MessageTrigger. Could not parse out the message name.");
this.messageId=a[1]||"";this.subscrition={}},enable:function(){this.subscription=g.subscribe(this.messageId,h.hitch(null,this.triggerHandler,this.name))},disable:function(){this.subscription.remove()}})})},"mw-statemachine/statemachineimpl/RemoteTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","mw-remote/Remote","./Trigger"],function(l,h,g,b,a){return l(a,{constructor:function(){var a=this.name.split(" ");(2>a.length||"response"!==a[0]&&"fault"!==a[0])&&g.error("Invalid trigger name for a RemoteTrigger. Could not parse out the type of handler.");
(!b.registerResponseHandler||!b.registerFaultHandler)&&g.error("The remote package is not available, this type of trigger will not work.");this.messageId=a[1]||"";this.handlerType=a[0]},enable:function(){"response"===this.handlerType?b.registerResponseHandler(this.messageId,h.hitch(null,this.triggerHandler,this.name)):b.registerFaultHandler(this.messageId,h.hitch(null,this.triggerHandler,this.name))},disable:function(){"response"===this.handlerType?b.deregisterResponseHandler(this.messageId):b.deregisterFaultHandler(this.messageId)}})})},
"mw-remote/Remote":function(){define("dojo/_base/lang dojo/aspect ./iframeproxy/IframeProxyClient ./iframeproxy/IframeJsonTransaction ./impl/FaultManager ./impl/RequestManager ./impl/ResponseManager ./impl/Transaction ./RemoteEndPointsManager mw-log/Log ./serviceRegistryLookup!".split(" "),function(l,h,g,b,a,c,d,f,e,m,n){var p=this,k;k={reset:function(){var u=[],q=new a,r=new d({faultManager:q}),s=new c({responseManager:r});k.faultManager=q;k.responseManager=r;k.requestManager=s;k._serviceRegistryLookup=
n;k._uploadIframeProxyUrlParameters=["?computeToken\x3d","","\x26routingkey\x3d",""];var w=k.proxyClient=new g;k.createUploadIframeTarget=l.hitch(w,w.createUploadIframeTarget);k.cancelUpload=l.hitch(w,w.cancelUpload);e.setIframeProxyClientForEndPoint(e.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT,w);e.setIframeProxyClientForEndPoint(e.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT,w);f.construct=function(a){a=a||{};e.getRoutingHost(e.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT)||k.setEndpoint();
a.allowedMessages=u;a.sendMessage=k.sendMessage;a.computeSessionId=k.getComputeSessionId;return new b(a)};k.registerEndpointLevelFaultHandler=l.hitch(q,q.registerEndpointLevelFaultHandler);k.sendMessage=l.hitch(s,s.sendMessage);k.registerDefaultMessageFactory=l.hitch(s,s.registerDefaultMessageFactory);k.deregisterDefaultMessageFactory=l.hitch(s,s.deregisterDefaultMessageFactory);k.registerResponseHandler=l.hitch(r,r.registerResponseHandler);k.deregisterResponseHandler=l.hitch(r,r.deregisterResponseHandler);
k.registerFaultHandler=l.hitch(q,q.registerFaultHandler);k.deregisterFaultHandler=l.hitch(q,q.deregisterFaultHandler);k.registerTopLevelFaultHandler=l.hitch(q,q.registerTopLevelFaultHandler);k.deregisterTopLevelFaultHandler=l.hitch(q,q.deregisterTopLevelFaultHandler);k.setServiceEndPoint=function(a,b,c){e.setRoutingHostAndRoutingKey(a,b,c)};k.setServicePathSuffixForEndPoint=function(a,b){e.setPathSuffixForEndPoint(a,b)};k.ignoreTopLevelFault=k.registerTopLevelFaultHandler;k.setComputeToken=function(a){k._uploadIframeProxyUrlParameters[1]=
a.computeSessionId;s.computeToken=a};k.setWorkerEndpoint=function(a,b){k._uploadIframeProxyUrlParameters[3]=b;e.setRoutingHostAndRoutingKey(e.getEndPointNames().WORKER_ENDPOINT,a,b)};k.setEndpoint=function(a){a||(a=k._serviceRegistryLookup.getServiceRegistryEndpoint("primary"),a||(m.info("ServiceRegistryLookup is empty, falling back to localhost"),a="/"));if(!a||"/"===a)a=p.location.protocol+"//"+p.location.host+"/";e.setRoutingHostAndRoutingKey(e.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT,a);
e.setRoutingHostAndRoutingKey(e.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT,a);w.setRemotePageHost(a)};k.setAllowedMessages=function(a){u=a};k.allowAllMessages=function(){u=[]};k.getEndPoint=function(){return e.getRoutingHost(e.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT)};k.getUploadIframeProxyUrl=function(){var a=k.getWorkerRoutingHost();"/"===a.slice(-1)&&(a=a.slice(0,-1));return a+w.getUploadIframeProxyUrlPath()+k._uploadIframeProxyUrlParameters.join("")};k.getComputeSessionId=function(){return s.computeToken?
s.computeToken.computeSessionId:12345};k.getWorkerRoutingHost=function(){var a=e.getRoutingHost(e.getEndPointNames().WORKER_ENDPOINT);return a?a:location.protocol+"//"+location.host+"/"};k.getWorkerRoutingKey=function(){return e.getRoutingKey(e.getEndPointNames().WORKER_ENDPOINT)};k.getServiceRegistryEndpoint=function(a){return k._serviceRegistryLookup.getServiceRegistryEndpoint(a)};k.enableServerOnWorkerAsync=function(){e.enableEndPoint(e.getEndPointNames().WORKER_ASYNC_ENDPOINT)};k.disableServerOnWorkerAsync=
function(){e.disableEndPoint(e.getEndPointNames().WORKER_ASYNC_ENDPOINT)};k.isServerOnWorkerAsyncEnabled=function(){return e.isEndPointEnabled(e.getEndPointNames().WORKER_ASYNC_ENDPOINT)};k.enableServerOnWorker=function(){e.enableEndPoint(e.getEndPointNames().WORKER_ENDPOINT)};k.disableServerOnWorker=function(){e.disableEndPoint(e.getEndPointNames().WORKER_ENDPOINT)};k.isWorkerEndpointEnabled=function(){return e.isEndPointEnabled(e.getEndPointNames().WORKER_ENDPOINT)};k.setWorkerOnlyMessageTypes=
function(a){e.setMessageTypesToEndPoint(e.getEndPointNames().WORKER_ENDPOINT,a)};h.after(w,"onError",function(a){a&&q.handleNonTransactionFault(a)},!0)}};k.reset();return k})},"mw-remote/iframeproxy/IframeJsonTransaction":function(){define(["dojo/_base/declare","mw-remote/impl/JsonTransaction","mw-remote/RemoteEndPointsManager"],function(l,h,g){return l([h],{constructor:function(b){b=b||{};this.proxyClient=b.proxyClient;this.workerProxyClient=b.workerProxyClient;this.routingHost=b.routingHost;this.routingKey=
b.routingKey;this.computeSessionId=b.computeSessionId},_doSend:function(b){return g.getIframeProxyClientForEndPoint(this.endPointName).sendMessage(b,g.getRemoteUrlForEndPoint(this.endPointName))}})})},"mw-remote/impl/JsonTransaction":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/json dojo/_base/lang mw-remote/RemoteEndPointsManager ./Transaction".split(" "),function(l,h,g,b,a,c){return l(c,{constructor:function(a){a=a||{};this.uuid=a.uuid||this._generateUuid()},_getRequest:function(b){var c=
null;a.isEndpointMessageContainerBased(this.endPointName)?(c={uuid:this.uuid,messages:b},this.computeToken&&(c.computeToken=this.computeToken)):Object.keys(b).forEach(function(a){c=b[a]});this._sanitizeForJson(c);return g.toJson(c)},_sanitizeForJson:function(a){var c;if(b.isArray(a))a.forEach(this._sanitizeForJson,this);else if(b.isObject(a))for(c in a)a.hasOwnProperty(c)&&(void 0===a[c]?delete a[c]:(b.isObject(a[c])||b.isArray(a[c]))&&this._sanitizeForJson(a[c]))},_doSend:function(a){return h.post({url:this._getEndpoint(),
contentType:"application/json",handleAs:"json",postData:a})},_processResponse:function(a){this.stopTime=(new Date).getTime();a?(a.fault&&(this.fault=a.fault),this.responseMessages=a.messages?a.messages:a):this.fault={faultCode:"Connection.Fault",message:"Unable to communicate with server, no response."}},_processFault:function(a){this.stopTime=(new Date).getTime();this.fault={faultCode:"Connection.Fault",message:a}}})})},"mw-remote/RemoteEndPointsManager":function(){define(["./EndPointsManager"],
function(l){var h=null;null===h&&(h=new l);return h})},"mw-remote/EndPointsManager":function(){define(["dojo/_base/declare","dojo/_base/array","./iframeproxy/IframeProxyClient"],function(l,h,g){return l([],{constructor:function(){this._initializeEndPointsCollection()},_initializeEndPointsCollection:function(){this.endPointsCollection={ROUTER_LEAF_INSECURE_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/json",messages:"RouterLogin CreateAccount CurrentUser Login UpdateAccount ServiceRegistry ClientType AuthorizationDetails".split(" "),
iframeProxyName:"remoteProducer",acceptsMessageContainerMessages:!0},ROUTER_LEAF_SECURE_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/json/secure",messages:[],iframeProxyName:"remoteProducer",acceptsMessageContainerMessages:!0},WORKER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!1,iframeProxyUrl:"",pathSuffix:"messageservice/json/secure",messages:[],iframeProxyName:"remoteWorkerProducer",acceptsMessageContainerMessages:!0},
WORKER_ASYNC_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/async",messages:[],acceptsMessageContainerMessages:!0},USAGE_DATA_ROUTER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"udc/service/v1/events",messages:["UsageDataEventCollection"],iframeProxyName:"remoteUDCProducer",acceptsMessageContainerMessages:!1},HELP_DATA_ROUTER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,
enabled:!0,iframeProxyUrl:"",pathSuffix:"",messages:["HelpDataEventCollection"],iframeProxyName:"doc_center",acceptsMessageContainerMessages:!1}}},reset:function(){this._initializeEndPointsCollection()},setUpNewEndPoint:function(b,a,c,d,f){this.endPointsCollection[b]={routingHost:"",routingKey:"",pathSuffix:c,enabled:a,messages:[],iframeProxy:null,iframeProxyName:d,acceptsMessageContainerMessages:f}},getPathSuffixForEndPoint:function(b){return this.endPointsCollection[b].pathSuffix},setPathSuffixForEndPoint:function(b,
a){this.endPointsCollection[b].pathSuffix=a},getEndPointNames:function(){var b={},a;for(a in this.endPointsCollection)this.endPointsCollection.hasOwnProperty(a)&&(b[a]=a);return b},setRoutingHostAndRoutingKey:function(b,a,c){a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");this.endPointsCollection[b].routingHost=a;c&&(this.endPointsCollection[b].routingKey=c);a&&this._setIframeRoutingHostAndRoutingkey(b)},_setIframeRoutingHostAndRoutingkey:function(b){var a=this.getIframeProxyClientForEndPoint(b);a&&
a.setRemotePageHost(this.endPointsCollection[b].routingHost,this.endPointsCollection[b].routingKey,null,this.endPointsCollection[b].iframeProxyUrl)},getRoutingHost:function(b){return this.endPointsCollection[b].routingHost},getRoutingKey:function(b){return this.endPointsCollection[b].routingKey},getMessageTypesMappedToEndPoint:function(b){return this.endPointsCollection[b].messages},isEndPointEnabled:function(b){return this.endPointsCollection[b].enabled},setMessageTypesToEndPoint:function(b,a){this.endPointsCollection[b].messages=
a},enableEndPoint:function(b){this.endPointsCollection[b].enabled=!0},disableEndPoint:function(b){this.endPointsCollection[b].enabled=!1},getEndPointForMessageType:function(b){var a=null,c;for(c in this.endPointsCollection)if(this.endPointsCollection.hasOwnProperty(c)&&(a=-1<h.lastIndexOf(this.endPointsCollection[c].messages,b)?c:a))if(this.isEndPointEnabled(a))break;else a=null;return a?a:this.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT},getRemoteUrlForEndPoint:function(b){var a=this.endPointsCollection[b].routingHost+
this.endPointsCollection[b].pathSuffix;this.endPointsCollection[b].routingKey&&(a=a+"?routingkey\x3d"+this.endPointsCollection[b].routingKey);return a},setIframeProxyClientForEndPoint:function(b,a){this.endPointsCollection[b].iframeProxy=a},getIframeProxyClientForEndPoint:function(b){var a=this.endPointsCollection[b].iframeProxy;a||(a=new g(this.endPointsCollection[b].iframeProxyName),this.endPointsCollection[b].iframeProxy=a);return a},isEndpointMessageContainerBased:function(b){return b&&this.endPointsCollection[b]?
this.endPointsCollection[b].acceptsMessageContainerMessages:!0},addMessagesTypesToEndPoint:function(b,a){this.endPointsCollection[b]&&-1===this.endPointsCollection[b].messages.indexOf(a)&&this.endPointsCollection[b].messages.push(a)},removeMessageTypesFromEndPoint:function(b,a){if(this.endPointsCollection[b]){var c=this.endPointsCollection[b].messages.indexOf(a);-1<c&&this.endPointsCollection[b].messages.splice(c,1)}}})})},"mw-remote/impl/Transaction":function(){define(["dojo/_base/declare","dojo/_base/Deferred",
"dojo/_base/lang","mw-remote/RemoteEndPointsManager","mw-utils/Utils"],function(l,h,g,b,a){return l([],{constructor:function(a){a=a||{};this.requestMessages=a.requestMessages||{};this.responseMessages=a.responseMessages||{};this.context=a.context;this.computeToken=a.computeToken;this.uuidClassifierMap=a.uuidClassifierMap||{};this.endPointName=a.endPointName||null;this.allowedMessages=a.allowedMessages||[];this.ignoreMessageTypes=a.ignoreMessageTypes||[];this.sendMessage=a.sendMessage},addRequestMessage:function(a,
d,f){if(d){var e=b.isEndpointMessageContainerBased(this.endPointName);this.requestMessages[a]||(this.requestMessages[a]=[]);g.isArray(d)?d.forEach(function(b){this.addRequestMessage(a,b,f)},this):e?(d.uuid=d.uuid||this._generateUuid(),f&&(this.uuidClassifierMap[d.uuid]=f),this.requestMessages[a].push(d)):this.requestMessages[a]=d;this.requestMessages=this._filterMessages(this.requestMessages)}},_filterMessages:function(a){var b={};this.getRequestMessageTypes().forEach(function(f){if(0===this.allowedMessages.length||
0<=this.allowedMessages.indexOf(f))b[f]=a[f]},this);return b},getResponseMessageTypes:function(){var a,b=[];for(a in this.responseMessages)this.responseMessages.hasOwnProperty(a)&&b.push(a);return b},getRequestMessageTypes:function(){var a,b=[];for(a in this.requestMessages)this.requestMessages.hasOwnProperty(a)&&b.push(a);return b},getMessageClassifier:function(a){return a&&a.uuid&&this.uuidClassifierMap.hasOwnProperty(a.uuid)?this.uuidClassifierMap[a.uuid]:""},send:function(){this._removeEmptyMessages();
this._isEmpty(this.requestMessages)?(this.deferred=new h,this.deferred.callback()):(this.startTime=(new Date).getTime(),this.deferred=this._doSend(this._getRequest(this.requestMessages)),this.deferred.addCallback(this,this._processResponse),this.deferred.addErrback(this,this._processFault))},addIgnoreMessageType:function(a,b){if(-1<this.getRequestMessageTypes().indexOf(a))if(b)for(var f in this.uuidClassifierMap)this.uuidClassifierMap.hasOwnProperty(f)&&(b&&this.uuidClassifierMap[f]===b)&&this.ignoreMessageTypes.push(a+
":"+b);else this.ignoreMessageTypes.push(a)},_removeEmptyMessages:function(){if(!this._isEmpty(this.requestMessages))for(var b in this.requestMessages)this.requestMessages.hasOwnProperty(b)&&g.isArray(this.requestMessages[b])&&0===a.getArrayLength(this.requestMessages[b])&&delete this.requestMessages[b]},_isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},_generateUuid:function(){return a.generateUuid()}})})},"mw-utils/Utils":function(){define(["dojo/_base/lang","dojo/_base/window",
"mw-utils/deprecation"],function(l,h,g){return{generateUuid:function(){return"xxxxxxxx".replace(/[xy]/g,function(b){var a=16*Math.random()|0;return("x"===b?a:a&3|8).toString(16)}).toUpperCase()},isImageData:function(b){return!!b&&(h.global.ImageData&&b instanceof h.global.ImageData||b.hasOwnProperty("width")&&b.hasOwnProperty("height")&&b.hasOwnProperty("data"))},isArray:function(b){g.deprecated({deprecated:{module:"MW/utils/Utils",method:"isArray"},geckNumber:1444368});return Array.isArray(b)},getArrayLength:function(b){var a=
0;if(!l.isArray(b))return!1;b.forEach(function(b){b&&(a+=1)});return a},isWhitespace:function(b){return/^\s+$/.test(b)},removeSurroundingNewLines:function(b){for(;"\n"===b.charAt(0);)b=b.substring(1);for(;"\n"===b.charAt(b.length-1);)b=b.substring(0,b.length-1);return b},getFirstUniqueElement:function(b,a){var c=null;a.some(function(a){if(-1===b.indexOf(a))return c=a,!0});return c},unionOfWordSets:function(b,a,c){b=this._stringToArray(b);a=this._stringToArray(a);b=this.unionOfArrays(b,a);return c?
b.join(" "):b},intersectionOfWordSets:function(b,a,c){b=this._stringToArray(b);a=this._stringToArray(a);b=this.intersectionOfArrays(b,a);return c?b.join(" "):b},differenceOfWordSets:function(b,a,c){b=this._stringToArray(b);a=this._stringToArray(a);b=this.unique(this.differenceOfArrays(b,a));return c?b.join(" "):b},unionOfArrays:function(b,a){return this.unique(b.concat(a))},intersectionOfArrays:function(b,a){return this.nonunique(b.concat(a))},differenceOfArrays:function(b,a){if(void 0===window.Map)return this._legacyDifferenceOfArrays(b,
a);var c,d,f,e=new Map,g=[];for(f=0;f<a.length;f++)e.set(a[f],null);for(f=0;f<b.length;f++)d=b[f],(c=e.has(d))||g.push(d);return g},_legacyDifferenceOfArrays:function(b,a){return this.unique(b.filter(function(b){return-1===a.indexOf(b)}))},unique:function(b){return b.filter(function(a,c){return b.indexOf(a)===c})},nonunique:function(b){return this.unique(b.filter(function(a,c){return b.indexOf(a)!==c}))},arrayEquals:function(b,a,c){if(b===a)return!0;if(b.length!==a.length)return!1;c||(c=function(a,
b){return a===b});for(var d=0,f=b.length;d<f;d++)if(!c(b[d],a[d]))return!1;return!0},removeEmptyElements:function(b){return b.filter(function(a){return!(""===a||null===a||void 0===a)})},_stringToArray:function(b){return!this._isString(b)?b:this.removeEmptyElements(b.split(" "))},_isString:function(b){return"string"===typeof b||b instanceof String}}})},"mw-utils/deprecation":function(){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&
"function"===typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};define(["dojo/_base/config","mw-log/Log"],function(h,g){var b={deprecated:function(a){var b,d;if((h.isDebug||window.showDeprecationsAsErrors)&&this._isConfigValid(a))d=window.showDeprecationsAsErrors||a.deprecationLevel===this.ERROR?this.ERROR:this.WARN,b="DEPRECATED: ",a.deprecated&&(b+=a.deprecated.module,a.deprecated.method&&(b+="."+a.deprecated.method+"()"),b+="."),a.replacement&&(b+=" Use "+a.replacement.module,
a.replacement.method&&(b+="."+a.replacement.method+"()"),b+=" instead."),a.removalVersion&&(b+=" Will be removed in version: "+a.removalVersion+"."),a.geckNumber&&(b+=" Please use g"+a.geckNumber+" to track latest information regarding this deprecation"),a.additionalInformation&&(b+=" "+a.additionalInformation),g[d](b)},_isConfigValid:function(a){var b=!!a.deprecated&&"object"===l(a.deprecated)&&a.deprecated.hasOwnProperty("module");a.replacement&&(b=b&&"object"===l(a.replacement)&&a.replacement.hasOwnProperty("module"));
a.geckNumber&&(b=b&&"number"===typeof a.geckNumber);b||g.error("Supplied deprecationConfig properties are not valid. Please refer to http://inside.mathworks.com/wiki/Web_Widgets_Deprecation_API for right API");return b}};Object.defineProperties(b,{WARN:{value:"warn",enumerable:!0},ERROR:{value:"error",enumerable:!0}});return b})},"mw-remote/impl/FaultManager":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","mw-remote/RemoteEndPointsManager"],function(l,h,g,b){return h([],
{constructor:function(a){a=a||{};this.faultHandlers=a.faultHandlers||{};this.topLevelHandlers=a.topLevelHandlers||[];this.endPointLevelHandlers=a.endPointLevelHandlers||{}},registerFaultHandler:function(a,b,d){d&&(b=g.hitch(d,b));this.faultHandlers[a]=b},deregisterFaultHandler:function(a){delete this.faultHandlers[a]},registerTopLevelFaultHandler:function(a,b,d){d&&(b=g.hitch(d,b));if(g.isString(a)){if("*"===a)return a={matcher:a,handler:b},this.defaultTopLevelHandler=b,a;a=this._constructMatcherFromQuery(a)}a=
{matcher:a,handler:b};this.topLevelHandlers.push(a);return a},registerEndpointLevelFaultHandler:function(a,b,d,f){f&&(d=g.hitch(f,d));g.isString(b)&&(b=this._constructMatcherFromQuery(b));b={matcher:b,handler:d};this.endPointLevelHandlers[a]||(this.endPointLevelHandlers[a]=[]);this.endPointLevelHandlers[a].push(b);return b},deregisterTopLevelFaultHandler:function(a){var b=this.topLevelHandlers.indexOf(a);-1<b?this.topLevelHandlers.splice(b,1):"*"===a.matcher&&delete this.defaultTopLevelHandler},_constructMatcherFromQuery:function(a){var b=
[];a.split("||").forEach(function(a){a=g.trim(a);a=a.replace(/([\.])/g,"\\$1");a=a.replace(/\*/g,".*");b.push(RegExp("^"+a+"$"))});return function(a){return l.some(b,function(b){return b.test(a.faultCode||a.code||"")})}},handleFault:function(a){var b,d=function(b,c){var d;if(d=a.getMessageClassifier(c))if(d=[b,d].join(":"),this.faultHandlers[d])this.faultHandlers[d](a.fault,a.context)};for(b in a.requestMessages)if(a.requestMessages.hasOwnProperty(b)){if(this.faultHandlers[b])this.faultHandlers[b](a.fault,
a.context);var f=a.requestMessages[b];Array.isArray(f)&&f.forEach(g.hitch(this,d,b))}if(this.faultHandlers["*"])this.faultHandlers["*"](a.fault,a.context);this.endPointLevelHandlers[a.endPointName]?this._handleEndpointLevelFault(a):this._handleTopLevelFault(a)},_handleEndpointLevelFault:function(a){var b=!1,d=l.filter(this.endPointLevelHandlers[a.endPointName],function(b){return b.matcher.call(this,a.fault,a.context)},this);0<d.length&&d[0].handler&&(b=!0,d[0].handler.call(this,a.fault,a.context,
a));return b},_handleTopLevelFault:function(a){var b=l.filter(this.topLevelHandlers,function(b){return b.matcher.call(this,a.fault,a.context)},this);(b=0<b.length?b[0].handler:this.defaultTopLevelHandler)&&b.call(this,a.fault,a.context,a)},handleNonTransactionFault:function(a){var b=l.filter(this.topLevelHandlers,function(b){return b.matcher.call(this,a)},this);(b=0<b.length?b[0].handler:this.defaultTopLevelHandler)&&b.call(this,a)}})})},"mw-remote/impl/RequestManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang mw-remote/RemoteEndPointsManager mw-remote/defaultMessageMapping ./Transaction".split(" "),
function(l,h,g,b,a,c,d){return h([],{defaultMapping:c,constructor:function(a){a=a||{};this.defaultFactories=a.defaultFactories||{};this.mockHandlers=a.mockHandlers||{};this.mapping=a.mapping||this.defaultMapping;this.responseManager=a.responseManager},registerDefaultMessageFactory:function(a,c,d){d&&(c=b.hitch(d,c));this.defaultFactories[a]=c},deregisterDefaultMessageFactory:function(a){delete this.defaultFactories[a]},registerMockResponseGenerator:function(a,c,m){var h=this;c=b.hitch(m||this,c);
this.mockHandlers[a]=function(a,b){var f,m=d.construct(b);f=c(a,m);f||(f=new g,f.callback());f.addCallback(function(){h.responseManager._processResult(m)})}},deregisterMockResponseGenerator:function(a){delete this.mockHandlers[a]},sendMessage:function(a,b,c){var d={},g={};b=b||{};this._createAndFillTransactions(a,b,c,d,g);a=Object.keys(d);for(b=0;b<a.length;b+=1)c=a[b],this._callMocks(g[c]),d[c].send(),this.responseManager.handleTransaction(d[c])},_getTransaction:function(a,b){return d.construct({context:b,
computeToken:this.computeToken,endPointName:a})},_getMockTransaction:function(a,b,c){return d.construct({context:b,computeToken:this.computeToken,endPointName:a,uuid:c})},_createAndFillTransactions:function(b,c,d,g,h){var k,l,q=function(b){var d,f,k,m,l;d=a.getEndPointForMessageType(b);m=g[d];l=h[d];m||(m=this._getTransaction(d,c),l=this._getMockTransaction(d,c,m.uuid),g[d]=m,h[d]=l);if(this.defaultFactories[b]&&(d=this.defaultFactories[b](m.context)))f=b.split(":"),k=f[0],f=f.slice(1,f.length).join(":"),
this.mockHandlers[b]||m.addRequestMessage(k,d,f),l.addRequestMessage(k,d,f)},r,s;for(k in b)b.hasOwnProperty(k)&&(l=a.getEndPointForMessageType(k),r=h[l],s=g[l],g[l]||(s=this._getTransaction(l,c),r=this._getMockTransaction(l,c,s.uuid),g[l]=s,h[l]=r),l=[k,d].join(":"),!this.mockHandlers[k]&&!this.mockHandlers[l]&&s.addRequestMessage(k,b[k],d),r.addRequestMessage(k,b[k],d),this.mapping[l]?this.mapping[l].forEach(q,this):this.mapping[k]&&this.mapping[k].forEach(q,this))},_callMocks:function(a){var c,
d,g=a.context;delete a.context;var h=function(a,b){var d;if(d=c.getMessageClassifier(b))if(d=[a,d].join(":"),this.mockHandlers[d])this.mockHandlers[d]([b],c)};for(d in a.requestMessages)if(a.requestMessages.hasOwnProperty(d)){c=b.mixin({},a);c.context=g;if(this.mockHandlers.hasOwnProperty(d))this.mockHandlers[d](c.requestMessages[d],c);Array.isArray(c.requestMessages[d])?c.requestMessages[d].forEach(b.hitch(this,h,d)):h(d,c.requestMessages[d])}if(this.mockHandlers["*"])this.mockHandlers["*"](d,c.requestMessages[d],
c)}})})},"mw-remote/defaultMessageMapping":function(){define([],function(){return{Eval:["CurrentFolder","ListFolder"],"Eval:Ping":[],"Eval:RunFile":["UpdateFile","CurrentFolder","ListFolder"],"Eval:MlsPublishPre":["UpdateFile"],"FEval:liveEvalInstrumentCode":[],Interrupt:[],"FEval:GetFigures":["CurrentFolder","ListFolder"],"FEval:CloseFigure":["FEval:GetFigures"],"FEval:SelectFigure":["FEval:GetFigures"],"FEval:ResetAxes":["FEval:GetFigures"],"FEval:ResizeFigure":["FEval:GetFigures"],"FEval:AxesInteraction2D":["FEval:GetFigures"],
"FEval:AxesInteraction3D":["FEval:GetFigures"],CurrentUser:["ServiceRegistry"],RouterLogin:["ServiceRegistry"],CurrentFolder:["ListFolder"],MoveFile:["CurrentFolder"],Variable:[],CloseFile:["SaveSession"],UpdateFile:["SaveSession"],SaveSession:["UpdateFile"],Logout:["CloseFile"],UpdateShare:["ListFolder"]}})},"mw-remote/impl/ResponseManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/json dojo/_base/lang mw-log/Log mw-remote/RemoteEndPointsManager".split(" "),
function(l,h,g,b,a,c,d){return h([],{constructor:function(a){a=a||{};this.responseHandlers=a.responseHandlers||{};this.faultManager=a.faultManager;this.transactions=a.transactions||[]},registerResponseHandler:function(b,c,d){d&&(c=a.hitch(d,c));this.responseHandlers[b]=c},deregisterResponseHandler:function(a){delete this.responseHandlers[a]},handleTransaction:function(b){this.transactions.push(b);b.deferred.addCallback(a.hitch(this,this._processAll,b));b.deferred.addCallback(a.hitch(this,this._processResult,
b));b.deferred.addErrback(a.hitch(this,this._processAll,b));b.deferred.addErrback(a.hitch(this,this._processFault,b))},_processAll:function(a){a=this.transactions.indexOf(a);0<=a&&this.transactions.splice(a,1)},_processResult:function(a){a.getResponseMessageTypes().forEach(function(e){var d=a.responseMessages[e],g=[];try{if(Array.isArray(d)){d.forEach(function(b){var c,d=a.getMessageClassifier(b);if(d){c=[e,d].join(":");var m=this,h=!1;a.getRequestMessageTypes().forEach(function(d){d=a.requestMessages[d];
Array.isArray(d)?d.forEach(function(d){m.responseHandlers[c]&&d.uuid===b.uuid&&(m.responseHandlers[c]([b],a.context),h=!0)}):m.responseHandlers[c]&&d.uuid===b.uuid&&(m.responseHandlers[c]([b],a.context),h=!0)});h||g.push(b)}else g.push(b)},this);if(0<g.length&&this.responseHandlers[e])this.responseHandlers[e](g,a.context);if(this.responseHandlers["*"])this.responseHandlers["*"](e,a.responseMessages[e],a.context)}}catch(h){c.error("Remote: Fault occurred while processing response.\nMessage: "+h.message+
"\nType: "+e+"\nResponse: "+b.toJson(d))}},this);this._processUdcResponses(a);a.fault&&this.faultManager.handleFault(a)},_processUdcResponses:function(a){if(!d.isEndpointMessageContainerBased(a.endPointName)){var b=Object.keys(a.requestMessages)[0];if(this.responseHandlers[b])this.responseHandlers[b](a.responseMessages)}},_processFault:function(a){this.faultManager.handleFault(a)}})})},"mw-remote/serviceRegistryLookup":function(){define(["dojo/request/xhr","require"],function(l,h){var g=!1,b={_serviceData:{},
getServiceRegistryEndpoint:function(a){if(b._serviceData.serviceregistry){var c,d;c=b._serviceData.serviceregistry.length;for(d=0;d<c;d+=1)if(b._serviceData.serviceregistry[d].name===a)return b._serviceData.serviceregistry[d].endpoint}return""}};return{load:function(a,c,d){g?d(b):l("/serviceregistrylookup/1/service",{handleAs:"json",failOk:!0,method:"GET",timeout:15E3,sync:!c.async}).then(function(a){b._serviceData=a;g=!0;d(b)},function(a){b._serviceData={};g=!0;d(b)})}}})},"mw-statemachine/statemachineimpl/TimeoutTrigger":function(){define(["dojo/_base/declare",
"dojo/_base/lang","mw-log/Log","./Trigger"],function(l,h,g,b){return l(b,{constructor:function(){var a=this.name.split(" ");(2>a.length||"timeout"!==a[0])&&g.error("Invalid trigger name for a TimeoutTrigger. Could not parse out the type of handler.");this.timeoutInSeconds=parseFloat(a[1]);this.handlerType=a[0]},enable:function(){this.disable();this.timeoutHandle=setTimeout(h.hitch(null,this.triggerHandler,this.name),1E3*this.timeoutInSeconds)},disable:function(){this.timeoutHandle&&(clearTimeout(this.timeoutHandle),
this.timeoutHandle=null)}})})},"mw-statemachine/statemachineimpl/Transition":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log"],function(l,h,g){return l([],{constructor:function(b){this.state={};this.target="";this.action=this.condition=null;l.safeMixin(this,b)},handleTrigger:function(b,a){var c="";this.checkCondition(b,a)&&(this.runAction(b,a),c=this.getTarget(b,this.target,a));return c},checkCondition:function(b,a){return!this.condition?!0:h.hitch(this.state.context,this.condition).apply(null,
[b,this.state.data].concat(a))},runAction:function(b,a){var c;this.action&&(c=h.hitch(this.state.context,this.action),c.apply(null,[b,this.state.data].concat(a)))},getTarget:function(b,a,c){var d,f,e;if(h.isString(a))f=a;else if(h.isFunction(a))a=h.hitch(this.state.context,a),f=a.apply(null,[b,this.state.data].concat(c));else if(h.isArray(a))for(d=0;d<a.length;d+=1){f=this.getTarget(b,a[d],c);if(h.isString(f)){f={target:f};h.mixin(f,e);break}if(f&&f.target){h.mixin(f,e);break}e=f||{}}else g.warn("Transition: improper target: ",
a);return f}})})},"mw-messageservice/messageserviceimpl/MessageServiceState":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/promise/all mw-statemachine/StateMachine mw-log/Log".split(" "),function(l,h,g,b,a,c,d){return l([],{_MAX_RETRIES:30,logStateChanges:!1,constructor:function(){this._stateOptions={context:this,name:"WraDataService",namespace:"MOTW.wra",defaultSubstate:"disconnected",substates:{disconnected:{transitions:{onEnterState:this._enterDisconnected,
start:"connecting"}},connecting:{transitions:{onEnterState:this._enterConnecting,_connectSuccess:"resubscribing",_connectFailure:"reconnecting",stop:"disconnected"}},reconnecting:{transitions:{onEnterState:this._enterReconnecting,_connectSuccess:"resubscribing",_connectFailure:[this._retryFailure,"retryDelay"],stop:"disconnected"}},retryDelay:{transitions:{"timeout 2":"reconnecting",_reconnect:"reconnecting",stop:"disconnected"}},resubscribing:{transitions:{onEnterState:this._enterResubscribing,_resubscribeSuccess:"connected",
_resubscribeFailure:"reconnecting",stop:"disconnecting"}},connected:{transitions:{onEnterState:this._enterConnected,_reconnect:"reconnecting",stop:"disconnecting"}},disconnecting:{transitions:{onEnterState:this._enterDisconnecting,_disconnectSuccess:"disconnected",_disconnectFailure:"disconnected","timeout 2":"disconnected"}},fatallyDisconnected:{transitions:{onEnterState:this._enterFatallyDisconnected,stop:"disconnected"}}}}},setDelegate:function(a){if(this._delegate!==a){this._delegate=a;var b=
this;g.after(a,"onConnectionError",function(){d.warn("MessageService received connection error, reconnecting");b._reconnect()},!0);this._states=new c(this._stateOptions);g.after(this._states,"onEnterState",h.hitch(this,this._enterState),!0);this._states.start()}},onConnected:function(){},onNewlyConnected:function(){},onDisconnected:function(){},onReconnected:function(){},onFatallyDisconnected:function(){},onNotConnected:function(){},isStarted:function(){return"disconnecting"!==this._currentState&&
"disconnected"!==this._currentState},isConnected:function(){return"connected"===this._currentState},isFatallyDisconnected:function(){return"fatallyDisconnected"===this._currentState},isDisconnected:function(){return"disconnected"===this._currentState},start:function(){},stop:function(){},_enterState:function(a){var b=this._currentState;this._currentState=a;this.logStateChanges&&d.info("MessageService state change: "+b+" -\x3e "+a);if("connected"===b)this.onNotConnected();if("connected"===a&&this._previouslyConnected)this.onReconnected();
else if("connected"===a&&!this._previouslyConnected)this.onNewlyConnected()},_enterDisconnected:function(){this._previouslyConnected=!1;this._delegate.cleanup();this.onDisconnected()},_enterConnecting:function(){this._retryCount=0;this._delegate.connect().then(this._connectSuccess,this._connectFailure)},_enterReconnecting:function(){this._retryCount+=1;d.info("Reconnecting message service. Attempt "+this._retryCount,arguments);this._delegate.cleanup();this._delegate.connect().then(this._connectSuccess,
this._connectFailure)},_reconnect:function(){},_connectSuccess:function(){},_connectFailure:function(){},_timeoutAction:function(){this.logStateChanges&&d.info("MessageService timeout:",arguments)},_retryFailure:function(){var a;this._retryCount>=this._MAX_RETRIES&&(d.error("Message service fatally disconnected."),a="fatallyDisconnected");return a},_enterResubscribing:function(){function b(a){g.push(this._delegate.doSubscribe(a.channel))}var c,d,g=[];this._delegate.doStartBatch();for(c in this.channelSubscriptions)this.channelSubscriptions.hasOwnProperty(c)&&
(d=this.channelSubscriptions[c],d.forEach(b,this),this.channelSubscriptions[c].subscribed=!0);this._delegate.doEndBatch();a(g).then(this._resubscribeSuccess,this._resubscribeFailure)},_resubscribeSuccess:function(){},_resubscribeFailure:function(){},_enterConnected:function(){this._delegate.delegateConnected()?(this._retryCount=0,this._previouslyConnected&&d.info("Successfully connected."),this._previouslyConnected=!0,this.onConnected()):this._reconnect()},_enterFatallyDisconnected:function(){this.onFatallyDisconnected()},
_enterDisconnecting:function(){this._delegate.disconnect().then(this._disconnectSuccess,this._disconnectFailure)},_disconnectSuccess:function(){},_disconnectFailure:function(){}})})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(l,h,g){var b=l.some;return function(a){var c,d;a instanceof Array?d=a:a&&"object"===typeof a&&(c=a);var f,e=[];if(c){d=[];for(var m in c)Object.hasOwnProperty.call(c,m)&&(e.push(m),d.push(c[m]));f={}}else d&&(f=[]);if(!d||!d.length)return(new h).resolve(f);
var n=new h;n.promise.always(function(){f=e=null});var l=d.length;b(d,function(a,b){c||e.push(b);g(a,function(a){n.isFulfilled()||(f[e[b]]=a,0===--l&&n.resolve(f))},n.reject);return n.isFulfilled()});return n.promise}})},"mw-messageservice/messageserviceimpl/MessageServiceReqResp":function(){define(["dojo/_base/declare","dojo/Deferred","mw-log/Log"],function(l,h,g){return l([],{pollDelay:50,constructor:function(b,a){this.remote=b;this.messageService=a;this.pending=0;b.registerDefaultMessageFactory("OpaqueMessage",
function(){this.pending+=1;return{opaqueMessageDOs:[]}},this);b.registerResponseHandler("OpaqueMessageResponse",function(b){this.pending-=1;b.forEach(function(b){try{b.opaqueMessageDOs&&b.opaqueMessageDOs.forEach(a.handleMessage,a)}catch(c){g.error("Error while handling message: "+c)}});this.poll()},this)},onMessage:function(b){},onConnectionError:function(b){},connect:function(){this.enabled=!0;this.poll();return(new h).resolve()},disconnect:function(){this.enabled=!1;this.timeout&&(clearTimeout(this.timeout),
this.timeout=null);return(new h).resolve()},cleanup:function(){},poll:function(){if(this.enabled&&0===this.pending){var b=this;this.timeout=setTimeout(function(){b.pending+=1;b.remote.sendMessage({OpaqueMessage:{opaqueMessageDOs:[]}});b.timeout=null},this.pollDelay)}},doPublish:function(b,a){clearTimeout(this.timeout);this.timeout=null;this.pending+=1;this.remote.sendMessage({OpaqueMessage:{opaqueMessageDOs:[{channel:b,data:a}]}})},doSubscribe:function(b){},doUnsubscribe:function(b){},doStartBatch:function(){},
doEndBatch:function(){}})})},"matlab_login/matlab_login":function(){require({cache:{"matlab_login/LoginServiceIdentifiers":function(){define(["dojo/_base/kernel"],function(l){l.global.logoutServiceId="LoginService.logout";l.global.shouldLogoutServiceId="LoginService.shouldLogout";l.global.isUserLoggedInServiceId="LoginService.isUserLoggedIn";l.global.saveCacheLoginInfoServiceId="LoginService.saveCacheLoginInfo";l.global.getInfoToCallEmbeddedLoginServiceId="LoginService.getInfoToCallEmbeddedLogin"})},
"matlab_login/LoginStatusUpdate":function(){define(["dojo/_base/declare","dojo/aspect","dojo/_base/lang","mw-messageservice/MessageService"],function(l,h,g,b){return l(null,{constructor:function(a){this._handleMethod=a;h.after(b,"onConnected",g.hitch(this,this.start),!1);b.start()},start:function(){console.warn("this is the start method: "+this._started);this._lrpChannel="/LoginChannel";var a=this;this._started||b.subscribe(this._lrpChannel,this._handleMessage,this).then(function(){a._started=!0})},
stop:function(){this._started&&(b.unsubscribe(this._lrpChannel,this._handleMessage,this),b.stop(),this._started=!1)},_handleMessage:function(a){a=JSON.parse(a.data);this._handleMethod(a)}})})},"mw-messageservice/MessageService":function(){define("dojo/_base/lang dojo/aspect ./messageserviceimpl/MessageServiceAsync ./messageserviceimpl/MessageServiceBase ./messageserviceimpl/MessageServiceReqResp mw-remote/Remote".split(" "),function(l,h,g,b,a,c){var d=new b;b={messageService:d,subscribe:l.hitch(d,
"subscribe"),unsubscribe:l.hitch(d,"unsubscribe"),publish:l.hitch(d,"publish"),start:l.hitch(d,"start"),stop:l.hitch(d,"stop"),isRunning:l.hitch(d,"isStarted"),isStarted:l.hitch(d,"isStarted"),isConnected:l.hitch(d,"isConnected"),isFatallyDisconnected:l.hitch(d,"isFatallyDisconnected"),isDisconnected:l.hitch(d,"isDisconnected"),setLatency:l.hitch(d,"setLatency"),setErrorRate:l.hitch(d,"setErrorRate"),onConnected:function(){},onDisconnected:function(){},onReconnected:function(){},onFatallyDisconnected:function(){},
onNotConnected:function(){},handleMessage:l.hitch(d,"handleMessage"),internalMotwDisableStart:function(){this._startFunction=this.start;this.start=function(){}},internalMotwEnableStart:function(){this._startFunction&&(this.start=this._startFunction,this._startFunction=null)}};h.after(d,"onConnected",l.hitch(b,"onConnected"),!0);h.after(d,"onDisconnected",l.hitch(b,"onDisconnected"),!0);h.after(d,"onReconnected",l.hitch(b,"onReconnected"),!0);h.after(d,"onFatallyDisconnected",l.hitch(b,"onFatallyDisconnected"),
!0);h.after(d,"onNotConnected",l.hitch(b,"onNotConnected"),!0);var f=c.enableServerOnWorkerAsync;c.enableServerOnWorkerAsync=function(){f();d.setDelegate(new g(c))};var e=c.disableServerOnWorkerAsync;c.disableServerOnWorkerAsync=function(){e();d.setDelegate(new a(c,d))};c.isServerOnWorkerAsyncEnabled()?c.enableServerOnWorkerAsync():c.disableServerOnWorkerAsync();return b})},"mw-messageservice/messageserviceimpl/MessageServiceAsync":function(){define("dojo/_base/declare dojo/_base/config dojo/aspect dojo/json dojo/Deferred dojox/cometd/cometd dojox/cometd/AckExtension mw-log/Log mw-remote/iframeproxy/IframeProxyClient".split(" "),
function(l,h,g,b,a,c,d,f,e){var m;c.JSON.toJSON=b.stringify;c.JSON.fromJSON=b.parse;var n=0,p=0,k={};setInterval(function(){n+=200;Object.keys(k).forEach(function(a){var b=k[a];b.execTime<=n&&(b.func(),delete k[a])})},200);var u=function(a,b,f){var g=new c.LongPollingTransport,g=c.Transport.derive(g);g.xhrSend=function(a){var c=b.sendMessage(a.body,a.url,{headers:a.headers});c.then(a.onSuccess,function(b){a.onError(b,b)});return{abort:function(){c.cancel()}}};var m=new c.Cometd(a),h=c.Utils.setTimeout;
c.Utils.setTimeout=function(a,b,c){if(0===c)return h(a,b,c);p+=1;k[p]={func:function(){try{b()}catch(a){m._debug("Exception invoking timed function",b,a)}},execTime:n+c};return p};c.Utils.clearTimeout=function(a){delete k[a]};c.WebSocket=e.WebSocket;e.WebSocket.proxyClient=b;m.registerExtension("ack",new d);f.websocket&&m.registerTransport("websocket",new c.WebSocketTransport,0);m.registerTransport("long-polling",g,1);return m};m=l([],{BASE_PREFIX:"/matlab",BASE_END_POINT:"messageservice/async",logCometdLifecycle:!1,
logCometdSubscriptions:!1,constructor:function(a,b,c,d){this.remote=a;this.constructCometD=b||u;this.cometdProperties=d||{connectTimeout:5E3,maxBackoff:1E4,logLevel:"info",maxNetworkDelay:2E4,appendMessageTypeToURL:!1,autoBatch:!0};this._webSocket={"try":!0,connectedAtLeastOnce:!1};a=["maxNetworkDelay","connectTimeout","logLevel"];if(b=h.cometdProperties)for(d=0;d<a.length;d+=1){var k=a[d];void 0!==b[k]&&(this.cometdProperties[k]=b[k])}this.workerProxyAsyncClient=c||new e("remoteWorkerAsyncProducer");
var m=this;g.after(this.workerProxyAsyncClient,"onError",function(a){m.cometd&&(m.logCometdLifecycle&&f.info("MessageServiceAsync disconnecting cometd due to IFrame error."),m.cometd.disconnect());m.onConnectionError(a)},!0);this.subscriptions={};this.recentMessages=[];this._deferredCleanupFunction=function(){m._deferredCleanup=!1;m.recentMessages=[]}},onMessage:function(a){},onConnectionError:function(a){},connect:function(){this.routingHost=m.workerHostOverride||this.remote.getWorkerRoutingHost();
this.routingKey=this.remote.getWorkerRoutingKey();this.computeToken=this.remote.getComputeSessionId();this.workerProxyAsyncClient.setRemotePageHost(this.routingHost,this.routingKey,this.computeToken);var b={};m.enableWebsocket&&this._webSocket.try?b.websocket=!0:(b.websocket=!1,this._webSocket.try=!1);var c=this.constructCometD("messageService",this.workerProxyAsyncClient,b);this.cometd=c;this.logCometdLifecycle&&f.info("MessageServiceAsync constructing new cometd instance.");b=this._createOneShotMessagePromise("/meta/handshake");
this._createListenerForUnknownClient();var d=this,e=new a;b.then(function(a){d.logCometdLifecycle&&f.info("MessageServiceAsync cometd handshake successful.",a,c.getClientId(),c);c.isDisconnected()?(f.error("MessageServiceAsync cometd handshake successful but still disconnected!"),c.disconnect(),e.reject(a)):("websocket"===c.getTransport().getType()&&(d._webSocket.connectedAtLeastOnce=!0),e.resolve(a))},function(a){d.logCometdLifecycle&&f.info("MessageServiceAsync disconnecting cometd due to handshake failure.",
a,c.getClientId(),c);c.disconnect();if(a.request&&a.request.supportedConnectionTypes){var b=a.request.supportedConnectionTypes;1<b.length&&"websocket"===b[0]&&!d._webSocket.connectedAtLeastOnce&&(d._webSocket.try=!1)}e.reject(a)});this.cometdProperties.url=this._getEndpoint();c.init(this.cometdProperties);return e.promise},disconnect:function(){this.logCometdLifecycle&&f.info("MessageServiceAsync disconnecting cometd due to disconnect call.",this.cometd.getClientId());var a=this._createOneShotMessagePromise("/meta/disconnect");
this.cometd.disconnect();return a},cleanup:function(){this.cometd&&(this.logCometdLifecycle&&f.info("MessageServiceAsync disconnecting cometd due to cleanup call.",this.cometd,this.cometd&&this.cometd.getClientId()),this.cometd.disconnect(),this.cometd=null)},delegateConnected:function(){return this.cometd?!this.cometd.isDisconnected():!1},doPublish:function(a,b){var c=this._createOneShotMessagePromise("/meta/publish");this.cometd.publish(this._getRequestChannel(a),b);return c},doSubscribe:function(a){this.logCometdSubscriptions&&
f.info("MessageServiceAsync subscribing cometd to channel: "+a);var b=this._createOneShotMessagePromise("/meta/subscribe");this.subscriptions[a]=this.cometd.subscribe(this._getRequestChannel(a),this,this._handleCometResponse);return b},doUnsubscribe:function(b){if(this.subscriptions[b]){this.logCometdSubscriptions&&f.info("MessageServiceAsync unsubscribing cometd from channel: "+b);var c=this._createOneShotMessagePromise("/meta/unsubscribe");this.cometd.unsubscribe(this.subscriptions[b]);delete this.subscriptions[b];
return c}return(new a).resolve({successful:!0})},doStartBatch:function(){this.cometd.startBatch()},doEndBatch:function(){this.cometd.endBatch()},doSetLatency:function(a){this.workerProxyAsyncClient.setLatency(a)},doSetErrorRate:function(a){this.workerProxyAsyncClient.setErrorRate(a)},_handleCometResponse:function(a){if(this._shouldHandleMessage(a))this.onMessage(this._stripBasePrefixAndConvertToJson(a))},_shouldHandleMessage:function(a){return!a.id&&0>this.recentMessages.indexOf(a)?(this.recentMessages.push(a),
this._deferRecentMessagesCleanup(),!0):!1},_deferRecentMessagesCleanup:function(){this._deferredCleanup||(this._deferredCleanup=setTimeout(this._deferredCleanupFunction,0))},_createOneShotMessagePromise:function(b){var c=new a;this._addOneShotListener(b,function(a){a.successful?c.resolve(a):(f.warn("Message failed: ",a),c.reject(a))});return c.promise},_addOneShotListener:function(a,b){var c=this,d=this.cometd,e;e=this.cometd.addListener(a,function(a){d.removeListener(e);b.apply(c,arguments)})},_createListenerForUnknownClient:function(){var a=
this.cometd,b=this;a.addListener("/meta/connect",function(c){!c.successful&&c.advice&&"handshake"===c.advice.reconnect&&(a.disconnect(),b.onConnectionError(c.error))})},_getEndpoint:function(){return this.routingHost+this.BASE_END_POINT+"?routingkey\x3d"+this.routingKey},_getRequestChannel:function(a){return this.BASE_PREFIX+a},_stripBasePrefixAndConvertToJson:function(a){return{channel:a.channel.substring(this.BASE_PREFIX.length),data:a.data}}});m.enableWebsocket=!1;m.workerHostOverride=!1;0<=location.search.indexOf("websocket\x3don")&&
(m.enableWebsocket=!0);return m})},"dojox/cometd/cometd":function(){define(function(){var l=this.org=this.org||{};l.cometd={};l.cometd.JSON={};l.cometd.JSON.toJSON=l.cometd.JSON.fromJSON=function(h){throw"Abstract";};l.cometd.Utils={};l.cometd.Utils.isString=function(h){return void 0===h||null===h?!1:"string"===typeof h||h instanceof String};l.cometd.Utils.isArray=function(h){return void 0===h||null===h?!1:h instanceof Array};l.cometd.Utils.inArray=function(h,g){for(var b=0;b<g.length;++b)if(h===
g[b])return b;return-1};l.cometd.Utils.setTimeout=function(h,g,b){return window.setTimeout(function(){try{g()}catch(a){h._debug("Exception invoking timed function",g,a)}},b)};l.cometd.Utils.clearTimeout=function(h){window.clearTimeout(h)};l.cometd.TransportRegistry=function(){var h=[],g={};this.getTransportTypes=function(){return h.slice(0)};this.findTransportTypes=function(b,a,c){for(var d=[],f=0;f<h.length;++f){var e=h[f];!0===g[e].accept(b,a,c)&&d.push(e)}return d};this.negotiateTransport=function(b,
a,c,d){for(var f=0;f<h.length;++f)for(var e=h[f],m=0;m<b.length;++m)if(e===b[m]){var n=g[e];if(!0===n.accept(a,c,d))return n}return null};this.add=function(b,a,c){for(var d=!1,f=0;f<h.length;++f)if(h[f]===b){d=!0;break}d||("number"!==typeof c?h.push(b):h.splice(c,0,b),g[b]=a);return!d};this.find=function(b){for(var a=0;a<h.length;++a)if(h[a]===b)return g[b];return null};this.remove=function(b){for(var a=0;a<h.length;++a)if(h[a]===b)return h.splice(a,1),a=g[b],delete g[b],a;return null};this.clear=
function(){h=[];g={}};this.reset=function(){for(var b=0;b<h.length;++b)g[h[b]].reset()}};l.cometd.Transport=function(){var h,g;this.registered=function(b,a){h=b;g=a};this.unregistered=function(){g=h=null};this._debug=function(){g._debug.apply(g,arguments)};this._mixin=function(){return g._mixin.apply(g,arguments)};this.getConfiguration=function(){return g.getConfiguration()};this.getAdvice=function(){return g.getAdvice()};this.setTimeout=function(b,a){return l.cometd.Utils.setTimeout(g,b,a)};this.clearTimeout=
function(b){l.cometd.Utils.clearTimeout(b)};this.convertToMessages=function(b){if(l.cometd.Utils.isString(b))try{return l.cometd.JSON.fromJSON(b)}catch(a){throw this._debug("Could not convert to JSON the following string",'"'+b+'"'),a;}if(l.cometd.Utils.isArray(b))return b;if(void 0===b||null===b)return[];if(b instanceof Object)return[b];throw"Conversion Error "+b+", typeof "+typeof b;};this.accept=function(b,a,c){throw"Abstract";};this.getType=function(){return h};this.send=function(b,a){throw"Abstract";
};this.reset=function(){this._debug("Transport",h,"reset")};this.abort=function(){this._debug("Transport",h,"aborted")};this.toString=function(){return this.getType()}};l.cometd.Transport.derive=function(h){function g(){}g.prototype=h;return new g};l.cometd.RequestTransport=function(){function h(a){for(;0<n.length;){var b=n[0],c=b[0],b=b[1];if(c.url===a.url&&c.sync===a.sync)n.shift(),a.messages=a.messages.concat(c.messages),this._debug("Coalesced",c.messages.length,"messages from request",b.id);else break}}
function g(a,b){this.transportSend(a,b);b.expired=!1;if(!a.sync){var c=this.getConfiguration().maxNetworkDelay,d=c;!0===b.metaConnect&&(d+=this.getAdvice().timeout);this._debug("Transport",this.getType(),"waiting at most",d,"ms for the response, maxNetworkDelay",c);var e=this;b.timeout=this.setTimeout(function(){b.expired=!0;b.xhr&&b.xhr.abort();var c="Request "+b.id+" of transport "+e.getType()+" exceeded "+d+" ms max network delay";e._debug(c);e.complete(b,!1,b.metaConnect);a.onFailure(b.xhr,a.messages,
"timeout",c)},d)}}function b(a){var b=++f,c={id:b,metaConnect:!1};m.length<this.getConfiguration().maxConnections-1?(m.push(c),g.call(this,a,c)):(this._debug("Transport",this.getType(),"queueing request",b,"envelope",a),n.push([a,c]))}function a(a,c){var d=l.cometd.Utils.inArray(a,m);0<=d&&m.splice(d,1);if(0<n.length){var d=n.shift(),e=d[0],f=d[1];this._debug("Transport dequeued request",f.id);if(c)this.getConfiguration().autoBatch&&h.call(this,e),b.call(this,e),this._debug("Transport completed request",
a.id,e);else{var g=this;this.setTimeout(function(){g.complete(f,!1,f.metaConnect);e.onFailure(f.xhr,e.messages,"error","Previous request failed")},0)}}}var c=new l.cometd.Transport,d=l.cometd.Transport.derive(c),f=0,e=null,m=[],n=[];d.complete=function(b,c,d){if(d){b=b.id;this._debug("Transport",this.getType(),"metaConnect complete, request",b);if(null!==e&&e.id!==b)throw"Longpoll request mismatch, completing request "+b;e=null}else a.call(this,b,c)};d.transportSend=function(a,b){throw"Abstract";
};d.transportSuccess=function(a,b,c){if(!b.expired)if(this.clearTimeout(b.timeout),this.complete(b,!0,b.metaConnect),c&&0<c.length)a.onSuccess(c);else a.onFailure(b.xhr,a.messages,"Empty HTTP response")};d.transportFailure=function(a,b,c,d){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!1,b.metaConnect),a.onFailure(b.xhr,a.messages,c,d))};d.send=function(a,c){if(c){if(null!==e)throw"Concurrent metaConnect requests not allowed, request id\x3d"+e.id+" not yet completed";var d=++f;this._debug("Transport",
this.getType(),"metaConnect send, request",d,"envelope",a);d={id:d,metaConnect:!0};g.call(this,a,d);e=d}else b.call(this,a)};d.abort=function(){c.abort();for(var a=0;a<m.length;++a){var b=m[a];this._debug("Aborting request",b);b.xhr&&b.xhr.abort()}e&&(this._debug("Aborting metaConnect request",e),e.xhr&&e.xhr.abort());this.reset()};d.reset=function(){c.reset();e=null;m=[];n=[]};return d};l.cometd.LongPollingTransport=function(){var h=new l.cometd.RequestTransport,g=l.cometd.Transport.derive(h),b=
!0;g.accept=function(a,c,d){return b||!c};g.xhrSend=function(a){throw"Abstract";};g.transportSend=function(a,c){this._debug("Transport",this.getType(),"sending request",c.id,"envelope",a);var d=this;try{var f=!0;c.xhr=this.xhrSend({transport:this,url:a.url,sync:a.sync,headers:this.getConfiguration().requestHeaders,body:l.cometd.JSON.toJSON(a.messages),onSuccess:function(e){d._debug("Transport",d.getType(),"received response",e);var f=!1;try{var g=d.convertToMessages(e);0===g.length?(b=!1,d.transportFailure(a,
c,"no response",null)):(f=!0,d.transportSuccess(a,c,g))}catch(k){d._debug(k),f||(b=!1,d.transportFailure(a,c,"bad response",k))}},onError:function(e,g){b=!1;f?d.setTimeout(function(){d.transportFailure(a,c,e,g)},0):d.transportFailure(a,c,e,g)}});f=!1}catch(e){b=!1,this.setTimeout(function(){d.transportFailure(a,c,"error",e)},0)}};g.reset=function(){h.reset();b=!0};return g};l.cometd.CallbackPollingTransport=function(){var h=new l.cometd.RequestTransport,h=l.cometd.Transport.derive(h);h.accept=function(g,
b,a){return!0};h.jsonpSend=function(g){throw"Abstract";};h.transportSend=function(g,b){for(var a=this,c=0,d=g.messages.length,f=[];0<d;){var e=l.cometd.JSON.toJSON(g.messages.slice(c,c+d)),e=g.url.length+encodeURI(e).length;if(2E3<e){if(1===d){var m="Bayeux message too big ("+e+" bytes, max is 2000) for transport "+this.getType();this.setTimeout(function(){a.transportFailure(g,b,"error",m)},0);return}--d}else f.push(d),c+=d,d=g.messages.length-c}var h=g;if(1<f.length){c=0;d=f[0];this._debug("Transport",
this.getType(),"split",g.messages.length,"messages into",f.join(" + "));h=this._mixin(!1,{},g);h.messages=g.messages.slice(c,d);h.onSuccess=g.onSuccess;h.onFailure=g.onFailure;for(e=1;e<f.length;++e){var p=this._mixin(!1,{},g),c=d,d=d+f[e];p.messages=g.messages.slice(c,d);p.onSuccess=g.onSuccess;p.onFailure=g.onFailure;this.send(p,b.metaConnect)}}this._debug("Transport",this.getType(),"sending request",b.id,"envelope",h);try{var k=!0;this.jsonpSend({transport:this,url:h.url,sync:h.sync,headers:this.getConfiguration().requestHeaders,
body:l.cometd.JSON.toJSON(h.messages),onSuccess:function(c){var d=!1;try{var e=a.convertToMessages(c);0===e.length?a.transportFailure(h,b,"no response"):(d=!0,a.transportSuccess(h,b,e))}catch(f){a._debug(f),d||a.transportFailure(h,b,"bad response",f)}},onError:function(c,d){k?a.setTimeout(function(){a.transportFailure(h,b,c,d)},0):a.transportFailure(h,b,c,d)}});k=!1}catch(u){this.setTimeout(function(){a.transportFailure(h,b,"error",u)},0)}};return h};l.cometd.WebSocketTransport=function(){function h(){var a=
d.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",a);var b=this,c=null,e=d.getConfiguration().connectTimeout;0<e&&(c=this.setTimeout(function(){c=null;k||(b._debug("Transport",b.getType(),"timed out while connecting to URL",a,":",e,"ms"),b.onClose(1002,"Connect Timeout"))},e));var f=new l.cometd.WebSocket(a),g=function(a){var d=a?a.code:1E3;a=a?a.reason:void 0;b._debug("WebSocket closed",d,"/",a,f);c&&(b.clearTimeout(c),c=null);if(f!==p)b._debug("Ignoring close event, WebSocket",
p);else b.onClose(d,a)};f.onopen=function(){b._debug("WebSocket opened",f);c&&(b.clearTimeout(c),c=null);if(f!==p)b._debug("Ignoring open event, WebSocket",p);else b.onOpen()};f.onclose=g;f.onerror=function(){g({code:1002})};f.onmessage=function(a){b._debug("WebSocket message",a,f);if(f!==p)b._debug("Ignoring message event, WebSocket",p);else b.onMessage(a)};p=f;this._debug("Transport",this.getType(),"configured callbacks on",f)}function g(a,b){var c=l.cometd.JSON.toJSON(a.messages);p.send(c);this._debug("Transport",
this.getType(),"sent",a,"metaConnect \x3d",b);var d=c=this.getConfiguration().maxNetworkDelay;b&&(d+=this.getAdvice().timeout,u=!0);for(var e=[],f=0;f<a.messages.length;++f){var g=a.messages[f];if(g.id){e.push(g.id);var k=p;n[g.id]=this.setTimeout(function(){k&&k.close(1E3,"Timeout")},d)}}this._debug("Transport",this.getType(),"waiting at most",d,"ms for messages",e,"maxNetworkDelay",c,", timeouts:",n)}function b(a,b){try{null===p?h.call(this):k&&g.call(this,a,b)}catch(c){var d=p;this.setTimeout(function(){a.onFailure(d,
a.messages,"error",c)},0)}}var a=new l.cometd.Transport,c=l.cometd.Transport.derive(a),d,f=!0,e=!1,m={},n={},p=null,k=!1,u=!1,q;c.onOpen=function(){this._debug("Transport",this.getType(),"opened",p);e=k=!0;this._debug("Sending pending messages",m);for(var a in m){var b=m[a],c=b[0],b=b[1];q=c.onSuccess;g.call(this,c,b)}};c.onMessage=function(a){this._debug("Transport",this.getType(),"received websocket message",a,p);var b=!1;a=this.convertToMessages(a.data);for(var c=[],d=0;d<a.length;++d){var e=a[d];
if((/^\/meta\//.test(e.channel)||void 0===e.data)&&e.id){c.push(e.id);var f=n[e.id];f&&(this.clearTimeout(f),delete n[e.id],this._debug("Transport",this.getType(),"removed timeout for message",e.id,", timeouts",n))}"/meta/connect"===e.channel&&(u=!1);"/meta/disconnect"===e.channel&&!u&&(b=!0)}d=!1;for(e=0;e<c.length;++e){var g=c[e],k;for(k in m){var f=k.split(","),h=l.cometd.Utils.inArray(g,f);if(0<=h){d=!0;f.splice(h,1);g=m[k][0];h=m[k][1];delete m[k];0<f.length&&(m[f.join(",")]=[g,h]);break}}}d&&
this._debug("Transport",this.getType(),"removed envelope, envelopes",m);q.call(this,a);b&&p.close(1E3,"Disconnect")};c.onClose=function(a,b){this._debug("Transport",this.getType(),"closed",a,b,p);f=e;for(var c in n)this.clearTimeout(n[c]);n={};for(var d in m)c=m[d][0],m[d][1]&&(u=!1),c.onFailure(p,c.messages,"closed "+a+"/"+b);m={};null!==p&&k&&p.close(1E3,"Close");k=!1;p=null};c.registered=function(b,c){a.registered(b,c);d=c};c.accept=function(a,b,c){return f&&!!l.cometd.WebSocket&&!1!==d.websocketEnabled};
c.send=function(a,c){this._debug("Transport",this.getType(),"sending",a,"metaConnect \x3d",c);for(var d=[],e=0;e<a.messages.length;++e){var f=a.messages[e];f.id&&d.push(f.id)}m[d.join(",")]=[a,c];this._debug("Transport",this.getType(),"stored envelope, envelopes",m);b.call(this,a,c)};c.abort=function(){a.abort();if(null!==p)try{p.close(1001)}catch(b){this._debug(b)}this.reset()};c.reset=function(){a.reset();null!==p&&k&&p.close(1E3,"Reset");f=!0;e=!1;n={};m={};p=null;k=!1;q=null};return c};l.cometd.Cometd=
function(h){function g(a){return l.cometd.Utils.isString(a)}function b(a){return void 0===a||null===a?!1:"function"===typeof a}function a(a,c){if(window.console){var d=window.console[a];b(d)&&d.apply(window.console,c)}}function c(){for(var a in H)for(var b=H[a],c=b.length-1;0<=c;--c){var d=b[c];d&&!d.listener&&(b.splice(c,1),t._debug("Removed subscription",d,"for channel",a))}}function d(a){M!==a&&(t._debug("Status",M,"-\x3e",a),M=a)}function f(){return"disconnecting"===M||"disconnected"===M}function e(a,
c,d,e,f){try{return c.call(a,e)}catch(g){t._debug("Exception during execution of extension",d,g);a=t.onExtensionException;if(b(a)){t._debug("Invoking extension exception callback",d,g);try{a.call(t,g,d,f,e)}catch(k){t._info("Exception during execution of exception callback in extension",d,k)}}return e}}function m(a){for(var c=0;c<B.length&&!(void 0===a||null===a);++c){var d=B[c],f=d.extension.outgoing;b(f)&&(d=e(d.extension,f,d.name,a,!0),a=void 0===d?a:d)}return a}function n(a,c){var d=H[a];if(d&&
0<d.length)for(var e=d.length-1;0<=e;--e){var f=d[e];try{f.callback.call(f.scope,c)}catch(g){t._debug("Exception during notification",f,c,g);var k=t.onListenerException;if(b(k)){t._debug("Invoking listener exception callback",f,g);try{k.call(t,g,f.handle,f.listener,c)}catch(m){t._info("Exception during execution of listener callback",f,m)}}}}}function p(a,b){n(a,b);for(var c=a.split("/"),d=c.length-1,e=d;0<e;--e){var f=c.slice(0,e).join("/")+"/*";e===d&&n(f,b);f+="*";n(f,b)}}function k(){null!==T&&
l.cometd.Utils.clearTimeout(T);T=null}function u(a){k();var b=D.interval+z;t._debug("Function scheduled in",b,"ms, interval \x3d",D.interval,"backoff \x3d",z,a);T=l.cometd.Utils.setTimeout(t,a,b)}function q(a,c,d,e){for(var f=0;f<c.length;++f){var g=c[f];g.id=""+ ++fa;L&&(g.clientId=L);var k=void 0;b(g._callback)&&(k=g._callback,delete g._callback);g=m(g);void 0!==g&&null!==g?(c[f]=g,k&&(U[g.id]=k)):c.splice(f--,1)}0!==c.length&&(f=v.url,v.appendMessageTypeToURL&&(f.match(/\/$/)||(f+="/"),e&&(f+=
e)),a={url:f,sync:a,messages:c,onSuccess:function(a){try{da.call(t,a)}catch(b){t._debug("Exception during handling of messages",b)}},onFailure:function(a,b,c,d){try{V.call(t,a,b,c,d)}catch(e){t._debug("Exception during handling of failure",e)}}},t._debug("Send",a),G.send(a,d))}function r(a){0<J||!0===R?N.push(a):q(!1,[a],!1)}function s(){var a=N;N=[];0<a.length&&q(!1,a,!1)}function w(){d("connecting");u(function(){if(!f()){var a={channel:"/meta/connect",connectionType:G.getType()};W||(a.advice={timeout:0});
d("connecting");t._debug("Connect sent",a);q(!1,[a],!0,"connect");d("connected")}})}function y(a){a&&(D=t._mixin(!1,{},v.advice,a),t._debug("New advice",D))}function x(a){k();a&&G.abort();L=null;d("disconnected");z=J=0;0<N.length&&(V.call(t,void 0,N,"error","Disconnected"),N=[])}function C(a){L=null;c();f()?(E.reset(),y(v.advice)):y(t._mixin(!1,D,{reconnect:"retry"}));J=0;R=!0;X=a;a=E.findTransportTypes("1.0",Q,v.url);var b=t._mixin(!1,{},X,{version:"1.0",minimumVersion:"0.9",channel:"/meta/handshake",
supportedConnectionTypes:a,advice:{timeout:D.timeout,interval:D.interval}});G=E.negotiateTransport(a,"1.0",Q,v.url);t._debug("Initial transport is",G.getType());d("handshaking");t._debug("Handshake sent",b);q(!1,[b],!1,"handshake")}function F(){d("handshaking");R=!0;u(function(){C(X)})}function A(a){p("/meta/handshake",a);p("/meta/unsuccessful",a);!f()&&"none"!==D.reconnect?(z<v.maxBackoff&&(z+=v.backoffIncrement),F()):x(!1)}function O(a){p("/meta/connect",a);p("/meta/unsuccessful",a);a=f()?"none":
D.reconnect;switch(a){case "retry":w();z<v.maxBackoff&&(z+=v.backoffIncrement);break;case "handshake":E.reset();z=0;F();break;case "none":x(!1);break;default:throw"Unrecognized advice action"+a;}}function P(a){x(!0);p("/meta/disconnect",a);p("/meta/unsuccessful",a)}function S(a){p("/meta/subscribe",a);p("/meta/unsuccessful",a)}function K(a){p("/meta/unsubscribe",a);p("/meta/unsuccessful",a)}function I(a){var c=U[a.id];b(c)&&(delete U[a.id],c.call(t,a))}function Z(a){I(a);p("/meta/publish",a);p("/meta/unsuccessful",
a)}function $(a){for(var c=0;c<B.length&&!(void 0===a||null===a);++c){var d=B[v.reverseIncomingExtensions?B.length-1-c:c],g=d.extension.incoming;b(g)&&(d=e(d.extension,g,d.name,a,!1),a=void 0===d?a:d)}if(!(void 0===a||null===a))switch(y(a.advice),a.channel){case "/meta/handshake":if(a.successful){L=a.clientId;c=E.negotiateTransport(a.supportedConnectionTypes,a.version,Q,v.url);if(null===c)throw"Could not negotiate transport with server; client "+E.findTransportTypes(a.version,Q,v.url)+", server "+
a.supportedConnectionTypes;G!==c&&(t._debug("Transport",G,"-\x3e",c),G=c);R=!1;s();a.reestablish=Y;Y=!0;p("/meta/handshake",a);a=f()?"none":D.reconnect;switch(a){case "retry":z=0;w();break;case "none":x(!1);break;default:throw"Unrecognized advice action "+a;}}else A(a);break;case "/meta/connect":if(W=a.successful)switch(p("/meta/connect",a),a=f()?"none":D.reconnect,a){case "retry":z=0;w();break;case "none":x(!1);break;default:throw"Unrecognized advice action "+a;}else O(a);break;case "/meta/disconnect":a.successful?
(x(!1),p("/meta/disconnect",a)):P(a);break;case "/meta/subscribe":a.successful?p("/meta/subscribe",a):S(a);break;case "/meta/unsubscribe":a.successful?p("/meta/unsubscribe",a):K(a);break;default:void 0===a.successful?void 0!==a.data&&null!==a.data?p(a.channel,a):t._debug("Unknown message",a):a.successful?(I(a),p("/meta/publish",a)):Z(a)}}function aa(a){if(a=H[a])for(var b=0;b<a.length;++b)if(a[b])return!0;return!1}function ba(a,c){var d={scope:a,method:c};if(b(a))d.scope=void 0,d.method=a;else if(g(c)){if(!a)throw"Invalid scope "+
a;d.method=a[c];if(!b(d.method))throw"Invalid callback "+c+" for scope "+a;}else if(!b(c))throw"Invalid callback "+c;return d}function ca(a,b,c,d){b=ba(b,c);t._debug("Adding listener on",a,"with scope",b.scope,"and callback",b.method);d={channel:a,scope:b.scope,callback:b.method,listener:d};(b=H[a])||(b=[],b.subscriptionCounter=0,H[a]=b);b.push(d);c=b.subscriptionCounter;b.subscriptionCounter+=1;d.id=c;d.handle=[a,c];t._debug("Added listener",d,"for channel",a,"having id \x3d",c);return d.handle}
var t=this,ea=h||"default",Q=!1,E=new l.cometd.TransportRegistry,G,M="disconnected",fa=0,L=null,J=0,N=[],R=!1,H={},z=0,T=null,B=[],D={},X,U={},Y=!1,W=!1,v={connectTimeout:0,maxConnections:2,backoffIncrement:1E3,maxBackoff:6E4,logLevel:"info",reverseIncomingExtensions:!0,maxNetworkDelay:1E4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,advice:{timeout:6E4,interval:0,reconnect:"retry"}};this._mixin=function(a,b,c){for(var d=b||{},e=2;e<arguments.length;++e){var f=arguments[e];if(!(void 0===
f||null===f))for(var g in f){var k=f[g],m=d[g];k!==b&&void 0!==k&&(d[g]=a&&"object"===typeof k&&null!==k?k instanceof Array?this._mixin(a,m instanceof Array?m:[],k):this._mixin(a,"object"===typeof m&&!(m instanceof Array)?m:{},k):k)}}return d};this._warn=function(){a("warn",arguments)};this._info=function(){"warn"!==v.logLevel&&a("info",arguments)};this._debug=function(){"debug"===v.logLevel&&a("debug",arguments)};this._isCrossDomain=function(a){return a&&a!==window.location.host};var da,V;this.send=
r;this.receive=$;da=function(a){t._debug("Received",a);for(var b=0;b<a.length;++b)$(a[b])};V=function(a,b,c,d){t._debug("handleFailure",a,b,c,d);for(c=0;c<b.length;++c){var e=b[c];switch(e.channel){case "/meta/handshake":A({successful:!1,failure:!0,channel:"/meta/handshake",request:e,xhr:a,advice:{reconnect:"retry",interval:z}});break;case "/meta/connect":d=a;W=!1;O({successful:!1,failure:!0,channel:"/meta/connect",request:e,xhr:d,advice:{reconnect:"retry",interval:z}});break;case "/meta/disconnect":P({successful:!1,
failure:!0,channel:"/meta/disconnect",request:e,xhr:a,advice:{reconnect:"none",interval:0}});break;case "/meta/subscribe":S({successful:!1,failure:!0,channel:"/meta/subscribe",request:e,xhr:a,advice:{reconnect:"none",interval:0}});break;case "/meta/unsubscribe":K({successful:!1,failure:!0,channel:"/meta/unsubscribe",request:e,xhr:a,advice:{reconnect:"none",interval:0}});break;default:Z({successful:!1,failure:!0,channel:e.channel,request:e,xhr:a,advice:{reconnect:"none",interval:0}})}}};this.registerTransport=
function(a,c,d){if(d=E.add(a,c,d))this._debug("Registered transport",a),b(c.registered)&&c.registered(a,this);return d};this.getTransportTypes=function(){return E.getTransportTypes()};this.unregisterTransport=function(a){var c=E.remove(a);null!==c&&(this._debug("Unregistered transport",a),b(c.unregistered)&&c.unregistered());return c};this.unregisterTransports=function(){E.clear()};this.findTransport=function(a){return E.find(a)};this.configure=function(a){t._debug("Configuring cometd object with",
a);g(a)&&(a={url:a});a||(a={});v=t._mixin(!1,v,a);if(!v.url)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var b=/(^https?:\/\/)?(((\[[^\]]+\])|([^:\/\?#]+))(:(\d+))?)?([^\?#]*)(.*)?/.exec(v.url);a=b[8];var c=b[9];Q=t._isCrossDomain(b[2]);v.appendMessageTypeToURL&&(void 0!==c&&0<c.length?(t._info("Appending message type to URI "+a+c+" is not supported, disabling 'appendMessageTypeToURL' configuration"),v.appendMessageTypeToURL=!1):(b=a.split("/"),c=b.length-
1,a.match(/\/$/)&&(c-=1),0<=b[c].indexOf(".")&&(t._info("Appending message type to URI "+a+" is not supported, disabling 'appendMessageTypeToURL' configuration"),v.appendMessageTypeToURL=!1)))};this.init=function(a,b){this.configure(a);this.handshake(b)};this.handshake=function(a){d("disconnected");Y=!1;C(a)};this.disconnect=function(a,b){if(!f()){void 0===b&&"boolean"!==typeof a&&(b=a,a=!1);var c=this._mixin(!1,{},b,{channel:"/meta/disconnect"});d("disconnecting");q(!0===a,[c],!1,"disconnect")}};
this.startBatch=function(){++J};this.endBatch=function(){--J;if(0>J)throw"Calls to startBatch() and endBatch() are not paired";0===J&&!f()&&!R&&s()};this.batch=function(a,b){var c=ba(a,b);this.startBatch();try{c.method.call(c.scope),this.endBatch()}catch(d){throw this._debug("Exception during execution of batch",d),this.endBatch(),d;}};this.addListener=function(a,b,c){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(a))throw"Illegal argument type: channel must be a string";
return ca(a,b,c,!0)};this.removeListener=function(a){if(!l.cometd.Utils.isArray(a))throw"Invalid argument: expected subscription, not "+a;var b=H[a[0]],c;if(0<b.length){c=a[1];a:{for(var d=0;d<b.length;){if(b[d].id===c){c=d;break a}d+=1}c=-1}-1!==c&&(b.splice(c,1),t._debug("Removed listener",a))}};this.clearListeners=function(){H={}};this.subscribe=function(a,c,d,e){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(a))throw"Illegal argument type: channel must be a string";
if(f())throw"Illegal state: already disconnected";b(c)&&(e=d,d=c,c=void 0);var k=!aa(a),m=ca(a,c,d,!1);k&&(k=this._mixin(!1,{},e,{channel:"/meta/subscribe",subscription:a}),r(k));return m};this.unsubscribe=function(a,b){if(1>arguments.length)throw"Illegal arguments number: required 1, got "+arguments.length;if(f())throw"Illegal state: already disconnected";this.removeListener(a);var c=a[0];aa(c)||(c=this._mixin(!1,{},b,{channel:"/meta/unsubscribe",subscription:c}),r(c))};this.clearSubscriptions=function(){c()};
this.publish=function(a,c,d,e){if(1>arguments.length)throw"Illegal arguments number: required 1, got "+arguments.length;if(!g(a))throw"Illegal argument type: channel must be a string";if(f())throw"Illegal state: already disconnected";b(c)?(e=c,c=d={}):b(d)&&(e=d,d={});var k=this._mixin(!1,{},d,{channel:a,data:c,_callback:e});r(k)};this.getStatus=function(){return M};this.isDisconnected=f;this.setBackoffIncrement=function(a){v.backoffIncrement=a};this.getBackoffIncrement=function(){return v.backoffIncrement};
this.getBackoffPeriod=function(){return z};this.setLogLevel=function(a){v.logLevel=a};this.registerExtension=function(a,c){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(a))throw"Illegal argument type: extension name must be a string";for(var d=!1,e=0;e<B.length;++e)if(B[e].name===a){d=!0;break}if(d)return this._info("Could not register extension with name",a,"since another extension with the same name already exists"),!1;B.push({name:a,extension:c});
this._debug("Registered extension",a);b(c.registered)&&c.registered(a,this);return!0};this.unregisterExtension=function(a){if(!g(a))throw"Illegal argument type: extension name must be a string";for(var c=!1,d=0;d<B.length;++d){var e=B[d];if(e.name===a){B.splice(d,1);c=!0;this._debug("Unregistered extension",a);a=e.extension;b(a.unregistered)&&a.unregistered();break}}return c};this.getExtension=function(a){for(var b=0;b<B.length;++b){var c=B[b];if(c.name===a)return c.extension}return null};this.getName=
function(){return ea};this.getClientId=function(){return L};this.getURL=function(){return v.url};this.getTransport=function(){return G};this.getConfiguration=function(){return this._mixin(!0,{},v)};this.getAdvice=function(){return this._mixin(!0,{},D)};l.cometd.WebSocket=window.WebSocket;l.cometd.WebSocket||(l.cometd.WebSocket=window.MozWebSocket)};return l.cometd})},"dojox/cometd/AckExtension":function(){define(["./cometd"],function(l){return l.AckExtension=function(){var h,g=!1,b=-1;this.registered=
function(a,b){h=b;h._debug("AckExtension: executing registration callback",void 0)};this.unregistered=function(){h._debug("AckExtension: executing unregistration callback",void 0);h=null};this.incoming=function(a){var c=a.channel;if("/meta/handshake"==c)g=a.ext&&a.ext.ack,h._debug("AckExtension: server supports acks",g);else if(g&&"/meta/connect"==c&&a.successful&&(c=a.ext)&&"number"===typeof c.ack)b=c.ack,h._debug("AckExtension: server sent ack id",b);return a};this.outgoing=function(a){var c=a.channel;
"/meta/handshake"==c?(a.ext||(a.ext={}),a.ext.ack=h&&!1!==h.ackEnabled,b=-1):g&&"/meta/connect"==c&&(a.ext||(a.ext={}),a.ext.ack=b,h._debug("AckExtension: client sending ack id",b));return a}}})},"mw-log/Log":function(){define(["dojo/date/locale"],function(l){return function(){function h(b){f&&(e||!c||!c.log)&&f.apply(a,b)}function g(b){d[b]=function(){if(0!==m&&c&&c[b])if("assert"===b){if(!arguments[0])if(a.ScriptEngine){var d=Array.prototype.slice.call(arguments);d.shift();c[b](!1,d)}else c[b].apply(c,
arguments)}else if(a.ScriptEngine)if(-1!==b.indexOf("profile"))c[b]();else c[b](arguments[0]);else c[b].apply(c,arguments)}}function b(b,e){d[e]=function(){var d=Array.prototype.slice.call(arguments),f=l.format(new Date,{selector:"date",datePattern:"h:m:s.SSS"}),g=[e].concat(d),d=[f].concat(d);n.push(g);n.length>p&&n.shift();h(g);if(c&&(0<m?m>b:k.length+m<=b))if(c.firebug&&"error"!==e)c[e].apply(a,d);else if(c[e])c[e](d);else c.log(d)}}var a=this,c=a.console,d={},f,e,m=9,n=[],p=25,k=["error","warn",
"info","debug","log"],u="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),q;for(q=u.length;0<=(q-=1);)g(u[q]);for(q=k.length;0<=(q-=1);)b(q,k[q]);d.setLevel=function(a){m="number"===typeof a?a:9};d.setCallback=function(a,b,c){var d=n.length;f=a||null;e="boolean"===typeof b?b:!1;for(a=d-("number"===c?c:d);a<d;)h(n[a+=1])};return d}()})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),
function(l,h,g,b,a,c,d,f,e){function m(a,c,e,f){return f.replace(/([a-z])\1*/ig,function(g){var m,h,n=g.charAt(0);g=g.length;var l=["abbr","wide","narrow"];switch(n){case "G":m=c[4>g?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":m=a.getFullYear();switch(g){case 1:break;case 2:if(!e.fullYear){m=String(m);m=m.substr(m.length-2);break}default:h=!0}break;case "Q":case "q":m=Math.ceil((a.getMonth()+1)/3);h=!0;break;case "M":case "L":m=a.getMonth();3>g?(m+=1,h=!0):(n=["months","L"==n?"standAlone":
"format",l[g-3]].join("-"),m=c[n][m]);break;case "w":m=k._getWeekOfYear(a,0);h=!0;break;case "d":m=a.getDate();h=!0;break;case "D":m=k._getDayOfYear(a);h=!0;break;case "e":case "c":if(m=a.getDay(),2>g){m=(m-b.getFirstDayOfWeek(e.locale)+8)%7;break}case "E":m=a.getDay();3>g?(m+=1,h=!0):(n=["days","c"==n?"standAlone":"format",l[g-3]].join("-"),m=c[n][m]);break;case "a":n=12>a.getHours()?"am":"pm";m=e[n]||c["dayPeriods-format-wide-"+n];break;case "h":case "H":case "K":case "k":h=a.getHours();switch(n){case "h":m=
h%12||12;break;case "H":m=h;break;case "K":m=h%12;break;case "k":m=h||24}h=!0;break;case "m":m=a.getMinutes();h=!0;break;case "s":m=a.getSeconds();h=!0;break;case "S":m=Math.round(a.getMilliseconds()*Math.pow(10,g-3));h=!0;break;case "v":case "z":if(m=k._getZone(a,!0,e))break;g=4;case "Z":n=k._getZone(a,!1,e);n=[0>=n?"+":"-",d.pad(Math.floor(Math.abs(n)/60),2),d.pad(Math.abs(n)%60,2)];4==g&&(n.splice(0,0,"GMT"),n.splice(3,0,":"));m=n.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+
f);}h&&(m=d.pad(m,g));return m})}function n(a,b,c,d){var e=function(a){return a};b=b||e;c=c||e;d=d||e;var f=a.match(/(''|[^'])+/g),g="'"==a.charAt(0);h.forEach(f,function(a,d){a?(f[d]=(g?c:b)(a.replace(/''/g,"'")),g=!g):f[d]=""});return d(f.join(""))}function p(a,b,d,e){e=c.escapeString(e);d.strict||(e=e.replace(" a"," ?a"));return e.replace(/([a-z])\1*/ig,function(c){var e;e=c.charAt(0);var f=c.length,g="",k="";d.strict?(1<f&&(g="0{"+(f-1)+"}"),2<f&&(k="0{"+(f-2)+"}")):(g="0?",k="0{0,2}");switch(e){case "y":e=
"\\d{2,4}";break;case "M":case "L":e=2<f?"\\S+?":"1[0-2]|"+g+"[1-9]";break;case "D":e="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+g+"[1-9][0-9]|"+k+"[1-9]";break;case "d":e="3[01]|[12]\\d|"+g+"[1-9]";break;case "w":e="[1-4][0-9]|5[0-3]|"+g+"[1-9]";break;case "E":case "e":case "c":e=".+?";break;case "h":e="1[0-2]|"+g+"[1-9]";break;case "k":e="1[01]|"+g+"\\d";break;case "H":e="1\\d|2[0-3]|"+g+"\\d";break;case "K":e="1\\d|2[0-4]|"+g+"[1-9]";break;case "m":case "s":e="[0-5]\\d";break;case "S":e="\\d{"+f+"}";
break;case "a":f=d.am||b["dayPeriods-format-wide-am"];g=d.pm||b["dayPeriods-format-wide-pm"];e=f+"|"+g;d.strict||(f!=f.toLowerCase()&&(e+="|"+f.toLowerCase()),g!=g.toLowerCase()&&(e+="|"+g.toLowerCase()),-1!=e.indexOf(".")&&(e+="|"+e.replace(/\./g,"")));e=e.replace(/\./g,"\\.");break;default:e=".*"}a&&a.push(c);return"("+e+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var k={};l.setObject(e.id.replace(/\//g,"."),k);k._getZone=function(a,b,c){return b?g.getTimezoneName(a):a.getTimezoneOffset()};k.format=
function(b,c){c=c||{};var d=a.normalizeLocale(c.locale),e=c.formatLength||"short",d=k._getGregorianBundle(d),f=[],g=l.hitch(this,m,b,d,c);if("year"==c.selector)return n(d["dateFormatItem-yyyy"]||"yyyy",g);var h;"date"!=c.selector&&(h=c.timePattern||d["timeFormat-"+e])&&f.push(n(h,g));"time"!=c.selector&&(h=c.datePattern||d["dateFormat-"+e])&&f.push(n(h,g));return 1==f.length?f[0]:d["dateTimeFormat-"+e].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return f[b]})};k.regexp=function(a){return k._parseInfo(a).regexp};
k._parseInfo=function(b){b=b||{};var c=a.normalizeLocale(b.locale),c=k._getGregorianBundle(c),d=b.formatLength||"short",e=b.datePattern||c["dateFormat-"+d],f=b.timePattern||c["timeFormat-"+d],d="date"==b.selector?e:"time"==b.selector?f:c["dateTimeFormat-"+d].replace(/\{(\d+)\}/g,function(a,b){return[f,e][b]}),g=[];return{regexp:n(d,l.hitch(this,p,g,c,b)),tokens:g,bundle:c}};k.parse=function(a,b){var c=/[\u200E\u200F\u202A\u202E]/g,d=k._parseInfo(b),e=d.tokens,f=d.bundle,c=RegExp("^"+d.regexp.replace(c,
"")+"$",d.strict?"":"i").exec(a&&a.replace(c,""));if(!c)return null;var m=["abbr","wide","narrow"],n=[1970,0,1,0,0,0,0],l="",c=h.every(c,function(a,c){if(!c)return!0;var d=e[c-1],g=d.length,d=d.charAt(0);switch(d){case "y":if(2!=g&&b.strict)n[0]=a;else if(100>a)a=Number(a),d=""+(new Date).getFullYear(),g=100*d.substring(0,2),d=Math.min(Number(d.substring(2,4))+20,99),n[0]=a<d?g+a:g-100+a;else{if(b.strict)return!1;n[0]=a}break;case "M":case "L":if(2<g){if(g=f["months-"+("L"==d?"standAlone":"format")+
"-"+m[g-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),g=h.map(g,function(a){return a.replace(".","").toLowerCase()})),a=h.indexOf(g,a),-1==a)return!1}else a--;n[1]=a;break;case "E":case "e":case "c":g=f["days-"+("c"==d?"standAlone":"format")+"-"+m[g-3]].concat();b.strict||(a=a.toLowerCase(),g=h.map(g,function(a){return a.toLowerCase()}));a=h.indexOf(g,a);if(-1==a)return!1;break;case "D":n[1]=0;case "d":n[2]=a;break;case "a":g=b.am||f["dayPeriods-format-wide-am"];d=b.pm||f["dayPeriods-format-wide-pm"];
if(!b.strict){var k=/\./g;a=a.replace(k,"").toLowerCase();g=g.replace(k,"").toLowerCase();d=d.replace(k,"").toLowerCase()}if(b.strict&&a!=g&&a!=d)return!1;l=a==d?"p":a==g?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;n[3]=a;break;case "m":n[4]=a;break;case "s":n[5]=a;break;case "S":n[6]=a}return!0}),d=+n[3];"p"===l&&12>d?n[3]=d+12:"a"===l&&12==d&&(n[3]=0);d=new Date(n[0],n[1],n[2],n[3],n[4],n[5],n[6]);b.strict&&d.setFullYear(n[0]);var p=e.join(""),q=-1!=p.indexOf("d"),
p=-1!=p.indexOf("M");if(!c||p&&d.getMonth()>n[1]||q&&d.getDate()>n[2])return null;if(p&&d.getMonth()<n[1]||q&&d.getDate()<n[2])d=g.add(d,"hour",1);return d};var u=[],q={};k.addCustomFormats=function(a,b){u.push({pkg:a,name:b});q={}};k._getGregorianBundle=function(b){if(q[b])return q[b];var c={};h.forEach(u,function(d){d=a.getLocalization(d.pkg,d.name,b);c=l.mixin(c,d)},this);return q[b]=c};k.addCustomFormats(e.id.replace(/\/date\/locale$/,".cldr"),"gregorian");k.getNames=function(a,b,c,d){var e;d=
k._getGregorianBundle(d);a=[a,c,b];"standAlone"==c&&(c=a.join("-"),e=d[c],1==e[0]&&(e=void 0));a[1]="format";return(e||d[a.join("-")]).concat()};k.isWeekend=function(a,c){var d=b.getWeekend(c),e=(a||new Date).getDay();d.end<d.start&&(d.end+=7,e<d.start&&(e+=7));return e>=d.start&&e<=d.end};k._getDayOfYear=function(a){return g.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};k._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),d=Math.floor((k._getDayOfYear(a)+
(c-b+7)%7-1)/7);c==b&&d++;return d};return k})},"dojo/date":function(){define(["./has","./_base/lang"],function(l,h){var g={getDaysInMonth:function(b){var a=b.getMonth();return 1==a&&g.isLeapYear(b)?29:[31,28,31,30,31,30,31,31,30,31,30,31][a]},isLeapYear:function(b){b=b.getFullYear();return!(b%400)||!(b%4)&&!!(b%100)},getTimezoneName:function(b){var a=b.toString(),c="",d=a.indexOf("(");if(-1<d)c=a.substring(++d,a.indexOf(")"));else if(d=/([A-Z\/]+) \d{4}$/,a=a.match(d))c=a[1];else if(a=b.toLocaleString(),
d=/ ([A-Z\/]+)$/,a=a.match(d))c=a[1];return"AM"==c||"PM"==c?"":c},compare:function(b,a,c){b=new Date(+b);a=new Date(+(a||new Date));"date"==c?(b.setHours(0,0,0,0),a.setHours(0,0,0,0)):"time"==c&&(b.setFullYear(0,0,0),a.setFullYear(0,0,0));return b>a?1:b<a?-1:0},add:function(b,a,c){var d=new Date(+b),f=!1,e="Date";switch(a){case "day":break;case "weekday":var g;(a=c%5)?g=parseInt(c/5):(a=0<c?5:-5,g=0<c?(c-5)/5:(c+5)/5);var h=b.getDay(),l=0;6==h&&0<c?l=1:0==h&&0>c&&(l=-1);h+=a;if(0==h||6==h)l=0<c?2:
-2;c=7*g+a+l;break;case "year":e="FullYear";f=!0;break;case "week":c*=7;break;case "quarter":c*=3;case "month":f=!0;e="Month";break;default:e="UTC"+a.charAt(0).toUpperCase()+a.substring(1)+"s"}if(e)d["set"+e](d["get"+e]()+c);f&&d.getDate()<b.getDate()&&d.setDate(0);return d},difference:function(b,a,c){a=a||new Date;c=c||"day";var d=a.getFullYear()-b.getFullYear(),f=1;switch(c){case "quarter":b=b.getMonth();a=a.getMonth();b=Math.floor(b/3)+1;a=Math.floor(a/3)+1;f=a+4*d-b;break;case "weekday":d=Math.round(g.difference(b,
a,"day"));c=parseInt(g.difference(b,a,"week"));if(0==d%7)d=5*c;else{var e=0,m=b.getDay();a=a.getDay();c=parseInt(d/7);f=d%7;b=new Date(b);b.setDate(b.getDate()+7*c);b=b.getDay();if(0<d)switch(!0){case 6==m:e=-1;break;case 0==m:e=0;break;case 6==a:e=-1;break;case 0==a:e=-2;break;case 5<b+f:e=-2}else if(0>d)switch(!0){case 6==m:e=0;break;case 0==m:e=1;break;case 6==a:e=2;break;case 0==a:e=1;break;case 0>b+f:e=2}d=d+e-2*c}f=d;break;case "year":f=d;break;case "month":f=a.getMonth()-b.getMonth()+12*d;
break;case "week":f=parseInt(g.difference(b,a,"day")/7);break;case "day":f/=24;case "hour":f/=60;case "minute":f/=60;case "second":f/=1E3;case "millisecond":f*=a.getTime()-b.getTime()}return Math.round(f)}};h.mixin(h.getObject("dojo.date",!0),g);return g})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(l,h){var g={};l.setObject("dojo.cldr.supplemental",g);g.getFirstDayOfWeek=function(b){b={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,
qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[g._region(b)];return void 0===b?1:b};g._region=function(b){b=h.normalizeLocale(b);b=b.split("-");var a=b[1];a?4==a.length&&(a=b[2]):a={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",
as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",
ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",
sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",
bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",
guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",
luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",
sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",
yav:"cm",zza:"tr"}[b[0]];return a};g.getWeekend=function(b){var a=g._region(b);b={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[a];a={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[a];void 0===b&&(b=6);void 0===a&&(a=0);return{start:b,end:a}};return g})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(l,h){var g={};h.setObject("dojo.regexp",g);g.escapeString=function(b,
a){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(b){return a&&-1!=a.indexOf(b)?b:"\\"+b})};g.buildGroupRE=function(b,a,c){if(!(b instanceof Array))return a(b);for(var d=[],f=0;f<b.length;f++)d.push(a(b[f]));return g.group(d.join("|"),c)};g.group=function(b,a){return"("+(a?"?:":"")+b+")"};return g})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(l,h){var g=/[&<>'"\/]/g,b={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},
a={};h.setObject("dojo.string",a);a.escape=function(a){return!a?"":a.replace(g,function(a){return b[a]})};a.rep=function(a,b){if(0>=b||!a)return"";for(var f=[];;){b&1&&f.push(a);if(!(b>>=1))break;a+=a}return f.join("")};a.pad=function(b,d,f,e){f||(f="0");b=String(b);d=a.rep(f,Math.ceil((d-b.length)/f.length));return e?b+d:d+b};a.substitute=function(a,b,f,e){e=e||l.global;f=f?h.hitch(e,f):function(a){return a};return a.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(a,c,g){if(""==c)return"$";
a=h.getObject(c,!1,b);g&&(a=h.getObject(g,!1,e).call(e,a,c));return f(a,c).toString()})};a.trim=String.prototype.trim?h.trim:function(a){a=a.replace(/^\s+/,"");for(var b=a.length-1;0<=b;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a};return a})},"dojo/cldr/nls/gregorian":function(){define({root:{"dateFormatItem-Ehm":"E h:mm a","days-standAlone-short":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"months-format-narrow":"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),"field-second-relative+0":"now",
"quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"y-MM-dd, E","field-wed-relative+0":"this Wednesday","field-wed-relative+1":"next Wednesday","dateFormatItem-GyMMMEd":"G y MMM d, E","dateFormatItem-MMMEd":"MMM d, E",eraNarrow:["BCE","CE"],"field-tue-relative+-1":"last Tuesday","days-format-short":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"y MMMM d",
"field-fri-relative+-1":"last Friday","field-wed-relative+-1":"last Wednesday","months-format-wide":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"PM","dateFormat-full":"y MMMM d, EEEE","field-thu-relative+-1":"last Thursday","dateFormatItem-Md":"MM-dd","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dayPeriods-format-wide-noon":"noon","dateFormatItem-yMd":"y-MM-dd","field-era":"Era",
"dateFormatItem-yM":"y-MM","months-standAlone-wide":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"timeFormat-short":"HH:mm","quarters-format-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-yQQQQ":"y QQQQ","timeFormat-long":"HH:mm:ss z","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateTimeFormats-appendItem-Era":"{1} {0}","field-hour":"Hour","months-format-abbr":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"field-sat-relative+0":"this Saturday","field-sat-relative+1":"next Saturday",
"timeFormat-full":"HH:mm:ss zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"today","field-thu-relative+0":"this Thursday","field-day-relative+1":"tomorrow","field-thu-relative+1":"next Thursday","dateFormatItem-GyMMMd":"G y MMM d","dateFormatItem-H":"HH","months-standAlone-abbr":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-Gy":"G y","dateFormatItem-M":"L",
"days-standAlone-wide":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dayPeriods-format-abbr-noon":"noon","timeFormat-medium":"HH:mm:ss","field-sun-relative+0":"this Sunday","dateFormatItem-Hm":"HH:mm","field-sun-relative+1":"next Sunday","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],eraAbbr:["BCE","CE"],"field-minute":"Minute","field-dayperiod":"Dayperiod","days-standAlone-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1",
"2","3","4"],"field-day-relative+-1":"yesterday","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"a","dateFormatItem-h":"h a","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"MM-dd, E","dateTimeFormat-full":"{1} {0}","field-fri-relative+0":"this Friday","field-fri-relative+1":"next Friday","field-day":"Day","days-format-wide":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"field-zone":"Zone","months-standAlone-narrow":"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),"dateFormatItem-y":"y","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})",
"field-year-relative+-1":"last year","field-month-relative+-1":"last month","dateTimeFormats-appendItem-Year":"{1} {0}","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","days-format-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),eraNames:["BCE","CE"],"dateFormatItem-yMMMd":"y MMM d","days-format-narrow":"SMTWTFS".split(""),"field-month":"Month","days-standAlone-narrow":"SMTWTFS".split(""),"dateFormatItem-MMM":"LLL","field-tue-relative+0":"this Tuesday",
"dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","field-tue-relative+1":"next Tuesday","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-EHm":"E HH:mm","field-mon-relative+0":"this Monday","field-mon-relative+1":"next Monday","dateFormat-short":"y-MM-dd","dateFormatItem-EHms":"E HH:mm:ss","dateFormatItem-Ehms":"E h:mm:ss a","dayPeriods-format-narrow-noon":"n","field-second":"Second","field-sat-relative+-1":"last Saturday",
"dateFormatItem-yMMMEd":"y MMM d, E","field-sun-relative+-1":"last Sunday","field-month-relative+0":"this month","field-month-relative+1":"next month","dateTimeFormats-appendItem-Timezone":"{0} {1}","dateFormatItem-Ed":"d, E","field-week":"Week","dateFormat-medium":"y MMM d","field-week-relative+-1":"last week","field-year-relative+0":"this year","field-year-relative+1":"next year","dayPeriods-format-narrow-pm":"p","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a",
"dateFormatItem-GyMMM":"G y MMM","field-mon-relative+-1":"last Monday","field-week-relative+0":"this week","field-week-relative+1":"next week"},ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,"en-au":!0,"en-ca":!0,"en-gb":!0,es:!0,fi:!0,fr:!0,"fr-ch":!0,he:!0,hr:!0,hu:!0,it:!0,ja:!0,ko:!0,mk:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-pt":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-hant":!0,"zh-hk":!0,"zh-tw":!0})},"mw-remote/iframeproxy/IframeProxyClient":function(){define("dojo/_base/connect dojo/_base/declare dojo/_base/Deferred dojo/_base/json dojo/_base/lang dojo/aspect dojo/dom-construct require mw-log/Log ./CheckUrlService".split(" "),
function(l,h,g,b,a,c,d,f,e,m){var n=this,p=h([],{IFRAME_TIMEOUT:2E4,LATEST_VERSION:"1.5",REMOTE_PROXY:"/remote/proxy/",constructor:function(a){this.iframeId=a||"remoteProducer";this._messageId=0;this._loaded=!1;this._pendingQueue=[];this._transactions={};this._uploadTargetCallbacks={};this._loadTimeoutHandle=this._checkUrl=null;this._errorRate=0},setRemotePageHost:function(a,b,c,d,e){a=this._combineUriPaths(a||"","/");b=b||"";e=e||this.LATEST_VERSION;d=d||"";this.computeToken=c;a===this._host&&b===
this._key&&d===this._proxyUrl&&e===this._version||(this._errorLoading=this._loaded=!1,this._host=a,this._key=b,this._version=e,this._proxyUrl=d,a=this._calculateUrls(a,b,e,d),this._createIframe(a))},_calculateUrls:function(a,b,c,d){var e=this.REMOTE_PROXY+c+"/iframeProxyRelease.html";c=this.REMOTE_PROXY+c+"/CheckJsFile.js";d&&(e=d);e=this._combineUriPaths(a,e).split("?")[0];e+=b?"?routingkey\x3d"+b:"";c=this._combineUriPaths(a,c);c=b?c+("?routingkey\x3d"+b):c+("?time\x3d"+(new Date).getTime());return{fastFailUrl:c,
iFrameUrl:e}},_createIframe:function(b){var c=b.fastFailUrl,f=this;this._url=b.iFrameUrl;this.remoteIframe&&d.destroy(this.remoteIframe);e.info("Creating iframe ["+this.iframeId+"] for "+this._url+" at "+new Date);this.remoteIframe=d.create("iframe",{id:this.iframeId,src:this._url,width:0,height:0,style:"visibility: hidden; display: none;"});this._checkUrl=(new m(c)).then(function(){},a.hitch(f,"_handleLoadTimeoutHitch"));this._loadTimeoutHandle=setTimeout(function(){f._handleLoadTimeoutHitch()},
this.IFRAME_TIMEOUT);document.body.appendChild(this.remoteIframe);this._messageConnection||(this._messageConnection=l.connect(n,"message",this,this._handleMessage))},_handleLoadTimeoutHitch:function(){if(!this._loaded)if("1.0"===this._version)this._handleLoadTimeout();else{clearTimeout(this._loadTimeoutHandle);var a=(parseFloat(this._version)-0.1).toFixed(1).toString();e.info("Unable to load proxy version "+this._version+", trying "+a+".");this.setRemotePageHost(this._host,this._key,this.computeToken,
this._proxyUrl,a)}},createUploadIframeTarget:function(b,c,d){this._uploadTargetCallbacks[b]=a.hitch(d||this,c);this._postMessage("createUploadIframe;"+b)},cancelUpload:function(a){this._postMessage("cancelUpload;"+a)},getUploadIframeProxyUrlPath:function(){return this.REMOTE_PROXY+this._version+"/uploadIframeProxy.html"},sendMessage:function(a,c,d){var f=this,m;this.computeToken&&(d=d||{},d.headers=d.headers||{},d.headers.computeToken=this.computeToken);m=this._getNewMessageId();c="sendMessage;"+
m+";"+c+";"+(d?b.toJson(d):"{}");c+=";"+a;a={deferred:new g(function(){"1.0"===f._version?e.warn("Cancelling is not supported by the 1.0 remote proxy."):f._postMessage("abort;"+m)}),id:m};this._errorLoading?a.deferred.reject("The iFrame did not load properly: "+this._url):(this._transactions[m]=a,this._postMessage(c));return a.deferred},setLatency:function(a){this._latency=a},setErrorRate:function(a){this._errorRate=a},_postMessage:function(a){this._loaded?this._postMessageNow(a):this._pendingQueue.push(a)},
_handleMessage:function(a){var b,c;if(a.source===this.remoteIframe.contentWindow){c=a.data.indexOf(";");b=a.data.substring(0,c);if(!b)throw Error("Client unable to parse message, no action specified: "+a.data);switch(b){case "ready":this._cleanupFailureChecks();this._loaded=!0;this._flushPending();break;case "sendMessageResponse":this._sendMessageResponse(a,c);break;case "uploadIframeMessage":b=a.data.indexOf(";",c+1);c=a.data.substring(c+1,b);a=a.data.substring(b+1,a.data.length);this._uploadTargetCallbacks[c](a);
break;case "websocketOpened":this.onWebsocketOpen();break;case "websocketClosed":a=a.data.substring(c+1,a.data.length);a=JSON.parse(a);this.onWebsocketClose(a);break;case "websocketMsg":a=a.data.substring(c+1,a.data.length);a=JSON.parse(a);this.onWebsocketMsg(a);break;case "websocketError":this.onWebsocketError();break;default:throw Error("Unknown action: "+b+", data: "+a.data);}}},_sendMessageResponse:function(a,c){var d,e,f=a.data.indexOf(";",c+1);d=a.data.indexOf(";",f+1);var g=a.data.substring(c+
1,f),m=a.data.substring(f+1,d),f=a.data.substring(d+1,a.data.length);if(!g||!m)throw Error("Invalid message from remote iframe: "+a.data);d=this._transactions[g];if(!d)throw Error("Unknown transaction id: "+g+", from remote iframe: "+a.data);delete this._transactions[g];if(!d.deferred.isCanceled())if("success"===m){try{e=f&&b.fromJson(f)}catch(h){e=f}e=""===e?{}:e;d.deferred.resolve(e)}else"fault"===m&&f&&(e=f.split(";"),g=e.length-1,1<=g&&(f.statusCode=e[g])),this.onError(f),d.deferred.reject(f)},
_cleanupFailureChecks:function(){this._checkUrl&&!this._checkUrl.isFulfilled&&this._checkUrl.cancel("iFrame loaded...cancel URL check",!1);this._loadTimeoutHandle&&clearTimeout(this._loadTimeoutHandle);this._checkUrl=this._loadTimeoutHandle=null},_handleLoadTimeout:function(){var a,b;this._cleanupFailureChecks();if(!this._loaded)for(b in a={code:"IframeLoadTimeout",description:"Iframe proxy loading failed due to an HTTP error",message:""},this.onError(a),this._errorLoading=!0,a=this._transactions,
this._transactions={},a)a.hasOwnProperty(b)&&a[b].deferred.reject("Timeout while loading the iFrame "+this._url+" at "+new Date)},_postMessageNow:function(a){function b(){if(0<c._errorRate&&Math.random()<c._errorRate&&0===a.indexOf("sendMessage;")){if(d=a.split(";",2)[1],f=c._transactions[d])delete c._transactions[d],e.error("Generating simulated error. Request was: ",a),c.onError("403 Forbidden;403"),f.deferred.reject("403 Forbidden;403")}else c.remoteIframe.contentWindow.postMessage(a,c._url)}var c=
this,d,f;this._latency?setTimeout(b,this._latency):b()},_flushPending:function(){this._pendingQueue.forEach(this._postMessageNow,this);this._pendingQueue=[]},_getNewMessageId:function(){this._messageId+=1;return this._messageId.toString()},onError:function(){},onWebsocketOpen:function(){},onWebsocketMsg:function(){},onWebsocketClose:function(){},onWebsocketError:function(){},_combineUriPaths:function(){return Array.prototype.slice.call(arguments).reduce(function(a,b){if(0===a.length)return b;0<b.length&&
("/"===b[0]&&a.lastIndexOf("/")===a.length-1?b=b.substring(1):"/"!==b[0]&&a.lastIndexOf("/")!==a.length-1&&(a+="/"));return a+b})}});p.WebSocket=h([],{constructor:function(a){var b=this;this.proxyClient=p.WebSocket.proxyClient;this.proxyClient.computeToken&&0<=a.indexOf("?")&&(a=a+"\x26computeToken\x3d"+this.proxyClient.computeToken);this.proxyClient._postMessage("connectWebsocket;"+a);c.after(this.proxyClient,"onWebsocketOpen",function(){b.onopen.apply(b,arguments)},!0);c.after(this.proxyClient,
"onWebsocketMsg",function(){b.onmessage.apply(b,arguments)},!0);c.after(this.proxyClient,"onWebsocketClose",function(){b.onclose.apply(b,arguments)},!0);c.after(this.proxyClient,"onWebsocketError",function(){b.onerror.apply(b,arguments)},!0)},onopen:function(){},onmessage:function(){},onclose:function(){},onerror:function(){},send:function(a){this.proxyClient._postMessage("websocketSend;"+a)},close:function(){this.proxyClient._postMessage("closeWebsocket;")}});return p})},"mw-remote/iframeproxy/CheckUrlService":function(){define(["dojo/_base/declare",
"dojo/dom","dojo/on","dojo/request/script","mw-log/Log"],function(l,h,g,b,a){return function(c){var d,f,e;if(!c)throw Error("Expected a valid url in urlToEmptyJsFile");d={framedoc:null};f=b.get(c,d,!0);d=h.byId(f.id,d.frameDoc);e=g(d,"error",function(b){a.info("CheckUrlService detected an error accessing url: "+c);f.handleResponse(null,b);e.remove()});return f.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(l,h,g,b,a,c,d,f,e,m,n){function p(a,b){a.canDelete&&s._remove(a.id,b.options.frameDoc,!0)}function k(b){A&&A.length&&(a.forEach(A,function(a){s._remove(a.id,a.frameDoc);a.frameDoc=null}),A=[]);return b.options.jsonp?!b.data:!0}function u(a){return!!this.scriptLoaded}function q(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function r(a,b){if(this.canDelete){var c=this.response.options;A.push({id:this.id,frameDoc:c.ioArgs?c.ioArgs.frameDoc:c.frameDoc});c.ioArgs&&
(c.ioArgs.frameDoc=null);c.frameDoc=null}b?this.reject(b):this.resolve(a)}function s(a,b,e){var f=g.parseArgs(a,g.deepCopy({},b));a=f.url;b=f.options;var m=g.deferred(f,p,k,b.jsonp?null:b.checkString?q:u,r);c.mixin(m,{id:w+y++,canDelete:!1});b.jsonp&&(RegExp("[?\x26]"+b.jsonp+"\x3d").test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+b.jsonp+"\x3d"+(b.frameDoc?"parent.":"")+w+"_callbacks."+m.id),m.canDelete=!0,F[m.id]=function(a){f.data=a;m.handleResponse(f)});g.notify&&g.notify.emit("send",f,m.promise.cancel);
if(!b.canAttach||b.canAttach(m)){var n=s._attach(m.id,a,b.frameDoc);if(!b.jsonp&&!b.checkString)var l=d(n,x,function(a){if("load"===a.type||C.test(n.readyState))l.remove(),m.scriptLoaded=a})}d.once(n,"error",function(a){m.reject(a);s._remove(m.id,b.frameDoc,!0)});h(m);return e?m:m.promise}m.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var w=l.id.replace(/[\/\.\-]/g,
"_"),y=0,x=m("script-readystatechange")?"readystatechange":"load",C=/complete|loaded/,F=b.global[w+"_callbacks"]={},A=[];s.get=s;s._attach=function(a,b,c){c=c||n.doc;var d=c.createElement("script");d.type="text/javascript";d.src=b;d.id=a;d.async=!0;d.charset="utf-8";return c.getElementsByTagName("head")[0].appendChild(d)};s._remove=function(a,b,c){e.destroy(f.byId(a,b));F[a]&&(c?F[a]=function(){delete F[a]}:delete F[a])};s._callbacksProperty=w+"_callbacks";return s})},"mw-messageservice/messageserviceimpl/MessageServiceBase":function(){define("dojo/_base/declare dojo/_base/json dojo/_base/lang dojo/aspect dojo/Deferred mw-statemachine/StateMachine mw-log/Log ./MessageServiceState".split(" "),
function(l,h,g,b,a,c,d,f){return l([f],{logSubscriptions:!1,constructor:function(){this.batching=!0;this.typeSerializers=[];this.typeDeserializers={};this.channelSubscriptions={}},setDelegate:function(a){this.inherited(arguments);b.after(this._delegate,"onMessage",g.hitch(this,this.handleMessage),!0)},publish:function(a,b){if(this.isConnected()||"resubscribing"===this._currentState){var c=this._queuePublish(a,this.serialize(b));this._deferProcessQueue();return c}return this._queuePublish(a,this.serialize(b))},
subscribe:function(a,b,c){this.logSubscriptions&&d.info("MessageService subscribe: "+a,b,c);this._addHandler(this.channelSubscriptions,a,b,c);return this.isConnected()||"resubscribing"===this._currentState?(a=this._queueSubscribe(a,b,c),this._deferProcessQueue(),a):this._queueSubscribe(a,b,c)},unsubscribe:function(b,c,f){this.logSubscriptions&&d.info("MessageService unsubscribe: "+b,c,f);if(this._removeHandler(this.channelSubscriptions,b,c,f))return this.isConnected()||"resubscribing"===this._currentState?
(b=this._queueUnsubscribe(b,c,f),this._deferProcessQueue(),b):(new a).resolve();d.error("Not subscribed to channel: "+b+", can't unsubscribe.");return(new a).reject("Not subscribed to channel: "+b+", can't unsubscribe.")},flush:function(){if(this.isConnected())this._processQueue();else throw Error("Can only manually flush the queue when connected.");},setLatency:function(a){this._delegate&&this._delegate.doSetLatency&&this._delegate.doSetLatency(a)},setErrorRate:function(a){this._delegate&&this._delegate.doSetErrorRate&&
this._delegate.doSetErrorRate(a)},_enterDisconnected:function(){this.inherited("_enterDisconnected",arguments);this._queuedOps=[]},_enterConnecting:function(){this.inherited("_enterConnecting",arguments);Object.keys(this.channelSubscriptions).forEach(function(a){a.subscribed=!1})},_enterConnected:function(){this.inherited("_enterConnected",arguments);this._processQueue()},_enterDisconnecting:function(){this._processQueue();this.inherited("_enterDisconnecting",arguments)},_queuePublish:function(b,
c){var d=new a;this._queuedOps.push({type:"publish",channel:b,data:c,deferred:d});return d.promise},_queueSubscribe:function(b,c,d){var f=new a;this._queuedOps.push({type:"subscribe",channel:b,handler:c,scope:d,deferred:f});return f.promise},_queueUnsubscribe:function(b,c,d){for(var f=new a,g,h=0;h<this._queuedOps.length;h++)if(g=this._queuedOps[h],"subscribe"===g.type&&g.channel===b&&g.handler===c&&g.scope===d)return this._queuedOps.splice(h,1),g.deferred.resolve(),(new a).resolve();this._queuedOps.push({type:"unsubscribe",
channel:b,handler:c,scope:d,deferred:f});return f.promise},_processQueue:function(){var a=this._delegate&&this._delegate.delegateConnected();(!this.isConnected()||!a)&&"disconnecting"!==this._currentState||(this._delegate.doStartBatch(),a=this._queuedOps,this._queuedOps=[],a.forEach(function(a){var b;"publish"===a.type?b=this._delegate.doPublish(a.channel,a.data):"subscribe"===a.type?b=this._doSubscribe(a.channel,a.handler,a.scope):"unsubscribe"===a.type&&(b=this._doUnsubscribe(a.channel,a.handler,
a.scope));b.then(a.deferred.resolve,a.deferred.reject)},this),this._delegate.doEndBatch())},_deferProcessQueue:function(){if(this.batching&&!this._deferredTimeout){var a=this;this._deferredTimeout=setTimeout(function(){a._deferredTimeout=!1;a._processQueue()},0)}else this.batching||this._processQueue()},_doSubscribe:function(b){if(this.channelSubscriptions[b].subscribed)return(new a).resolve();var c=this._delegate.doSubscribe(b);this.channelSubscriptions[b].subscribed=!0;return c},_doUnsubscribe:function(b){return this.channelSubscriptions[b]?
(new a).resolve():this._delegate.doUnsubscribe(b)},handleMessage:function(a){var b;if(a&&a.channel){a.data&&(a.data=this.deserialize(a.data));var c=a.channel.split("/");for(b=1;b<=c.length;b+=1)this._callHandlers(this.channelSubscriptions,c.slice(0,b).concat("**").join("/"),a);this._callHandlers(this.channelSubscriptions,c.slice(0,c.length-1).concat("*").join("/"),a);this._callHandlers(this.channelSubscriptions,c.concat("*").join("/"),a);this._callHandlers(this.channelSubscriptions,a.channel,a)}},
registerMessageHandler:function(a,b,c){d.error("registerMessageHandler is not supported any more.")},deregisterMessageHandler:function(a,b,c){d.error("deregisterMessageHandler is not supported any more.")},registerTypeSerializer:function(a,b,c){this.typeSerializers.push({typeMatcher:a,type:b,serializer:c})},registerTypeDeserializer:function(a,b){this.typeDeserializers[a]=b},serialize:function(a){return g.isArray(a)?this._serializeArray(a):a instanceof Number||a instanceof Boolean||g.isString(a)?a:
this._serializeObject(a)},deserialize:function(a){return g.isArray(a)?this._deserializeArray(a):a instanceof Number||a instanceof Boolean||g.isString(a)?a:this._deserializeObject(a)},_addHandler:function(a,b,c,f){var g;f=f||this;"string"===typeof c&&"function"!==typeof f[c]?d.warn("Not adding invalid handler: "+c):(g=a[b],g||(g=[],a[b]=g),a={channel:b,handler:c,scope:f},g.push(a),g.sort(function(a){return a.exclusive?-1:0}))},_removeHandler:function(a,b,c,d){var f;f=a[b];c=this._getHandlerIndex(f,
{handler:c,scope:d||this});0<=c&&f.splice(c,1);(!f||0===f.length)&&delete a[b];return 0<=c},_callHandlers:function(a,b,c){var f;if(a.hasOwnProperty(b)){a=a[b];for(f=0;f<a.length;f+=1)try{"string"===typeof a[f].handler?a[f].scope[a[f].handler].call(a[f].scope,c):a[f].handler.call(a[f].scope,c)}catch(g){d.error("Error while executing message handler on channel: "+b+", message: "+h.toJson(c)+", error: "+g)}}},_getHandlerIndex:function(a,b){if(!a)return-1;var c;for(c=0;c<a.length;c+=1)if(b.handler===
a[c].handler&&b.scope===a[c].scope)return c;return-1},_serializeObject:function(a){var b,c;for(c=0;c<this.typeSerializers.length;c+=1){var d=this.typeSerializers[c];if(d.typeMatcher(a))return{__type__:d.type,__value__:d.serializer.call(this,a)}}if(a instanceof Image)return a;for(b in a)a.hasOwnProperty(b)&&(a[b]=this.serialize(a[b]));return a},_serializeArray:function(a){var b,c=a.length;for(b=0;b<c;b+=1)a[b]=this.serialize(a[b]);return a},_deserializeObject:function(a){var b;if(void 0===a||null===
a)return null;if(a.hasOwnProperty("__type__")&&a.hasOwnProperty("__value__"))try{return this.typeDeserializers[a.__type__].call(this,a.__value__)}catch(c){d.error("Error while trying to deserialize: ",a)}for(b in a)a.hasOwnProperty(b)&&null!==a[b]&&void 0!==a[b]&&(a[b]=this.deserialize(a[b]));return a},_deserializeArray:function(a){var b,c=a.length;for(b=0;b<c;b+=1)a[b]=this.deserialize(a[b]);return a}})})},"mw-statemachine/StateMachine":function(){define(["dojo/_base/declare","./statemachineimpl/State"],
function(l,h){return l([],{constructor:function(g){g.stateMachine=this;this.state=new h(g)},start:function(){this.state.enter()},stop:function(){this.state.exit()},_changeState:function(g,b){this.state.enter(g,b)},onEnterState:function(g){},onExitState:function(g){}})})},"mw-statemachine/statemachineimpl/State":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log ./EventTrigger ./MessageTrigger ./RemoteTrigger ./TimeoutTrigger ./Transition".split(" "),function(l,h,g,b,a,c,d,f){var e;return e=
l([],{constructor:function(a){this.stateMachine=a.stateMachine||{_changeState:function(){},onEnterState:function(){},onExitState:function(){}};this.namespace=a.namespace||"";this.name=a.name||this.getDefaultName();this.context=a.context||{};this.data=a.data||{};this.composition=a.composition||"XOR";this.defaultSubstate=a.defaultSubstate||"";this.constructSubstates(a.substates);this.constructTriggersAndTransitions(a.transitions);this.active=a.active||!1},getDefaultName:function(){var a;0<this.namespace.length?
(a=this.namespace.split("."),a=a.pop()):g.warn("State: state name is not specified.");return a||""},constructSubstates:function(a){var b={},c,d;for(c in a)a.hasOwnProperty(c)&&(d=a[c],d.name&&d.name!==c&&g.error("State: error constructing substate: "+c+", the specified names don't match: "+d.name),d.name=c,d.namespace=d.namespace||[this.namespace,this.name].join("."),d.stateMachine=d.stateMachine||this.stateMachine,d.context=d.context||this.context,b[d.name]=new e(d));this.substates=b},constructTriggersAndTransitions:function(a){var b,
c={},d=[],e;for(b in a)a.hasOwnProperty(b)&&((e=this.constructTrigger(b))&&d.push(e),c[b]=this.constructTransition(b,a[b]));this.transitions=c;this.triggers=d},constructTrigger:function(e){var f,g,k;f=e.split(" ");if(2===f.length)"subscribe"===f[0]?k=a:"response"===f[0]||"fault"===f[0]?k=c:"timeout"===f[0]&&(k=d);else if("onEnterState"!==e||"onExitState"!==e)k=b;k&&(g=new k({name:e,context:this.context,triggerHandler:h.hitch(this,this.handleTrigger)}));return g},constructTransition:function(a,b){var c;
if(h.isFunction(b)||h.isString(b)||h.isArray(b))"onEnterState"===a||"onExitState"===a?(c=b,b={},b.action=c,b.target=""):(c=b,b={},b.target=c);b.state=this;return new f(b)},enter:function(a,b){this.active||(this.active=!0,this.enableTriggers(),this.stateMachine.onEnterState(this.name),this.handleTrigger.apply(this,["onEnterState"].concat(b)));a?this.changeSubstates(a,b):this.changeToDefaultSubstate(b)},exit:function(){var a=this.activeSubstates();this.active=!1;this.disableTriggers();a.forEach(function(a){a.exit()});
this.handleTrigger("onExitState");this.stateMachine.onExitState(this.name)},enableTriggers:function(){this.triggers.forEach(function(a){a.enable()})},disableTriggers:function(){this.triggers.forEach(function(a){a.disable()})},handleTrigger:function(a){var b,c;if(this.transitions[a]&&(c=Array.prototype.slice.call(arguments,1,arguments.length),b=this.transitions[a].handleTrigger(a,c)))h.isString(b)||(c=b.args,b=b.target),this.stateMachine._changeState(b,c)},changeSubstates:function(a,b){var c=this.activeSubstates();
this.substates[a]&&(0<=c.length&&c[0].name!==a&&c.forEach(function(a){a.exit()}),this.substates[a].enter(void 0,b))},changeToDefaultSubstate:function(a){0===this.activeSubstates().length&&this.substates[this.defaultSubstate]&&this.substates[this.defaultSubstate].enter(void 0,a)},activeSubstates:function(){var a=[],b;for(b in this.substates)this.substates.hasOwnProperty(b)&&this.substates[b].active&&a.push(this.substates[b]);return a}})})},"mw-statemachine/statemachineimpl/EventTrigger":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","mw-log/Log","./Trigger"],function(l,h,g,b,a){return l(a,{constructor:function(){this.connection={}},enable:function(){h.isFunction(this.context[this.name])&&(this.cachedFunction=this.context[this.name]);this.connection=g.after(this.context,this.name,h.hitch(null,this.triggerHandler,this.name),!0)},disable:function(){this.connection.remove();this.cachedFunction&&(this.context[this.name]=this.cachedFunction)}})})},"mw-statemachine/statemachineimpl/Trigger":function(){define(["dojo/_base/declare"],
function(l){return l([],{constructor:function(h){this.name="";this.context={};this.triggerHandler=h.triggerHandler||function(){};l.safeMixin(this,h)},enable:function(){},disable:function(){}})})},"mw-statemachine/statemachineimpl/MessageTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","mw-log/Log","./Trigger"],function(l,h,g,b,a){return l(a,{constructor:function(){var a=this.name.split(" ");(2>a.length||"subscribe"!==a[0])&&b.error("Invalid trigger name for a MessageTrigger. Could not parse out the message name.");
this.messageId=a[1]||"";this.subscrition={}},enable:function(){this.subscription=g.subscribe(this.messageId,h.hitch(null,this.triggerHandler,this.name))},disable:function(){this.subscription.remove()}})})},"mw-statemachine/statemachineimpl/RemoteTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","mw-remote/Remote","./Trigger"],function(l,h,g,b,a){return l(a,{constructor:function(){var a=this.name.split(" ");(2>a.length||"response"!==a[0]&&"fault"!==a[0])&&g.error("Invalid trigger name for a RemoteTrigger. Could not parse out the type of handler.");
(!b.registerResponseHandler||!b.registerFaultHandler)&&g.error("The remote package is not available, this type of trigger will not work.");this.messageId=a[1]||"";this.handlerType=a[0]},enable:function(){"response"===this.handlerType?b.registerResponseHandler(this.messageId,h.hitch(null,this.triggerHandler,this.name)):b.registerFaultHandler(this.messageId,h.hitch(null,this.triggerHandler,this.name))},disable:function(){"response"===this.handlerType?b.deregisterResponseHandler(this.messageId):b.deregisterFaultHandler(this.messageId)}})})},
"mw-remote/Remote":function(){define("dojo/_base/lang dojo/aspect ./iframeproxy/IframeProxyClient ./iframeproxy/IframeJsonTransaction ./impl/FaultManager ./impl/RequestManager ./impl/ResponseManager ./impl/Transaction ./RemoteEndPointsManager mw-log/Log ./serviceRegistryLookup!".split(" "),function(l,h,g,b,a,c,d,f,e,m,n){var p=this,k;k={reset:function(){var u=[],q=new a,r=new d({faultManager:q}),s=new c({responseManager:r});k.faultManager=q;k.responseManager=r;k.requestManager=s;k._serviceRegistryLookup=
n;k._uploadIframeProxyUrlParameters=["?computeToken\x3d","","\x26routingkey\x3d",""];var w=k.proxyClient=new g;k.createUploadIframeTarget=l.hitch(w,w.createUploadIframeTarget);k.cancelUpload=l.hitch(w,w.cancelUpload);e.setIframeProxyClientForEndPoint(e.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT,w);e.setIframeProxyClientForEndPoint(e.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT,w);f.construct=function(a){a=a||{};e.getRoutingHost(e.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT)||k.setEndpoint();
a.allowedMessages=u;a.sendMessage=k.sendMessage;a.computeSessionId=k.getComputeSessionId;return new b(a)};k.registerEndpointLevelFaultHandler=l.hitch(q,q.registerEndpointLevelFaultHandler);k.sendMessage=l.hitch(s,s.sendMessage);k.registerDefaultMessageFactory=l.hitch(s,s.registerDefaultMessageFactory);k.deregisterDefaultMessageFactory=l.hitch(s,s.deregisterDefaultMessageFactory);k.registerResponseHandler=l.hitch(r,r.registerResponseHandler);k.deregisterResponseHandler=l.hitch(r,r.deregisterResponseHandler);
k.registerFaultHandler=l.hitch(q,q.registerFaultHandler);k.deregisterFaultHandler=l.hitch(q,q.deregisterFaultHandler);k.registerTopLevelFaultHandler=l.hitch(q,q.registerTopLevelFaultHandler);k.deregisterTopLevelFaultHandler=l.hitch(q,q.deregisterTopLevelFaultHandler);k.setServiceEndPoint=function(a,b,c){e.setRoutingHostAndRoutingKey(a,b,c)};k.setServicePathSuffixForEndPoint=function(a,b){e.setPathSuffixForEndPoint(a,b)};k.ignoreTopLevelFault=k.registerTopLevelFaultHandler;k.setComputeToken=function(a){k._uploadIframeProxyUrlParameters[1]=
a.computeSessionId;s.computeToken=a};k.setWorkerEndpoint=function(a,b){k._uploadIframeProxyUrlParameters[3]=b;e.setRoutingHostAndRoutingKey(e.getEndPointNames().WORKER_ENDPOINT,a,b)};k.setEndpoint=function(a){a||(a=k._serviceRegistryLookup.getServiceRegistryEndpoint("primary"),a||(m.info("ServiceRegistryLookup is empty, falling back to localhost"),a="/"));if(!a||"/"===a)a=p.location.protocol+"//"+p.location.host+"/";e.setRoutingHostAndRoutingKey(e.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT,a);
e.setRoutingHostAndRoutingKey(e.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT,a);w.setRemotePageHost(a)};k.setAllowedMessages=function(a){u=a};k.allowAllMessages=function(){u=[]};k.getEndPoint=function(){return e.getRoutingHost(e.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT)};k.getUploadIframeProxyUrl=function(){var a=k.getWorkerRoutingHost();"/"===a.slice(-1)&&(a=a.slice(0,-1));return a+w.getUploadIframeProxyUrlPath()+k._uploadIframeProxyUrlParameters.join("")};k.getComputeSessionId=function(){return s.computeToken?
s.computeToken.computeSessionId:12345};k.getWorkerRoutingHost=function(){var a=e.getRoutingHost(e.getEndPointNames().WORKER_ENDPOINT);return a?a:location.protocol+"//"+location.host+"/"};k.getWorkerRoutingKey=function(){return e.getRoutingKey(e.getEndPointNames().WORKER_ENDPOINT)};k.getServiceRegistryEndpoint=function(a){return k._serviceRegistryLookup.getServiceRegistryEndpoint(a)};k.enableServerOnWorkerAsync=function(){e.enableEndPoint(e.getEndPointNames().WORKER_ASYNC_ENDPOINT)};k.disableServerOnWorkerAsync=
function(){e.disableEndPoint(e.getEndPointNames().WORKER_ASYNC_ENDPOINT)};k.isServerOnWorkerAsyncEnabled=function(){return e.isEndPointEnabled(e.getEndPointNames().WORKER_ASYNC_ENDPOINT)};k.enableServerOnWorker=function(){e.enableEndPoint(e.getEndPointNames().WORKER_ENDPOINT)};k.disableServerOnWorker=function(){e.disableEndPoint(e.getEndPointNames().WORKER_ENDPOINT)};k.isWorkerEndpointEnabled=function(){return e.isEndPointEnabled(e.getEndPointNames().WORKER_ENDPOINT)};k.setWorkerOnlyMessageTypes=
function(a){e.setMessageTypesToEndPoint(e.getEndPointNames().WORKER_ENDPOINT,a)};h.after(w,"onError",function(a){a&&q.handleNonTransactionFault(a)},!0)}};k.reset();return k})},"mw-remote/iframeproxy/IframeJsonTransaction":function(){define(["dojo/_base/declare","mw-remote/impl/JsonTransaction","mw-remote/RemoteEndPointsManager"],function(l,h,g){return l([h],{constructor:function(b){b=b||{};this.proxyClient=b.proxyClient;this.workerProxyClient=b.workerProxyClient;this.routingHost=b.routingHost;this.routingKey=
b.routingKey;this.computeSessionId=b.computeSessionId},_doSend:function(b){return g.getIframeProxyClientForEndPoint(this.endPointName).sendMessage(b,g.getRemoteUrlForEndPoint(this.endPointName))}})})},"mw-remote/impl/JsonTransaction":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/json dojo/_base/lang mw-remote/RemoteEndPointsManager ./Transaction".split(" "),function(l,h,g,b,a,c){return l(c,{constructor:function(a){a=a||{};this.uuid=a.uuid||this._generateUuid()},_getRequest:function(b){var c=
null;a.isEndpointMessageContainerBased(this.endPointName)?(c={uuid:this.uuid,messages:b},this.computeToken&&(c.computeToken=this.computeToken)):Object.keys(b).forEach(function(a){c=b[a]});this._sanitizeForJson(c);return g.toJson(c)},_sanitizeForJson:function(a){var c;if(b.isArray(a))a.forEach(this._sanitizeForJson,this);else if(b.isObject(a))for(c in a)a.hasOwnProperty(c)&&(void 0===a[c]?delete a[c]:(b.isObject(a[c])||b.isArray(a[c]))&&this._sanitizeForJson(a[c]))},_doSend:function(a){return h.post({url:this._getEndpoint(),
contentType:"application/json",handleAs:"json",postData:a})},_processResponse:function(a){this.stopTime=(new Date).getTime();a?(a.fault&&(this.fault=a.fault),this.responseMessages=a.messages?a.messages:a):this.fault={faultCode:"Connection.Fault",message:"Unable to communicate with server, no response."}},_processFault:function(a){this.stopTime=(new Date).getTime();this.fault={faultCode:"Connection.Fault",message:a}}})})},"mw-remote/RemoteEndPointsManager":function(){define(["./EndPointsManager"],
function(l){var h=null;null===h&&(h=new l);return h})},"mw-remote/EndPointsManager":function(){define(["dojo/_base/declare","dojo/_base/array","./iframeproxy/IframeProxyClient"],function(l,h,g){return l([],{constructor:function(){this._initializeEndPointsCollection()},_initializeEndPointsCollection:function(){this.endPointsCollection={ROUTER_LEAF_INSECURE_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/json",messages:"RouterLogin CreateAccount CurrentUser Login UpdateAccount ServiceRegistry ClientType AuthorizationDetails".split(" "),
iframeProxyName:"remoteProducer",acceptsMessageContainerMessages:!0},ROUTER_LEAF_SECURE_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/json/secure",messages:[],iframeProxyName:"remoteProducer",acceptsMessageContainerMessages:!0},WORKER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!1,iframeProxyUrl:"",pathSuffix:"messageservice/json/secure",messages:[],iframeProxyName:"remoteWorkerProducer",acceptsMessageContainerMessages:!0},
WORKER_ASYNC_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/async",messages:[],acceptsMessageContainerMessages:!0},USAGE_DATA_ROUTER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"udc/service/v1/events",messages:["UsageDataEventCollection"],iframeProxyName:"remoteUDCProducer",acceptsMessageContainerMessages:!1},HELP_DATA_ROUTER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,
enabled:!0,iframeProxyUrl:"",pathSuffix:"",messages:["HelpDataEventCollection"],iframeProxyName:"doc_center",acceptsMessageContainerMessages:!1}}},reset:function(){this._initializeEndPointsCollection()},setUpNewEndPoint:function(b,a,c,d,f){this.endPointsCollection[b]={routingHost:"",routingKey:"",pathSuffix:c,enabled:a,messages:[],iframeProxy:null,iframeProxyName:d,acceptsMessageContainerMessages:f}},getPathSuffixForEndPoint:function(b){return this.endPointsCollection[b].pathSuffix},setPathSuffixForEndPoint:function(b,
a){this.endPointsCollection[b].pathSuffix=a},getEndPointNames:function(){var b={},a;for(a in this.endPointsCollection)this.endPointsCollection.hasOwnProperty(a)&&(b[a]=a);return b},setRoutingHostAndRoutingKey:function(b,a,c){a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");this.endPointsCollection[b].routingHost=a;c&&(this.endPointsCollection[b].routingKey=c);a&&this._setIframeRoutingHostAndRoutingkey(b)},_setIframeRoutingHostAndRoutingkey:function(b){var a=this.getIframeProxyClientForEndPoint(b);a&&
a.setRemotePageHost(this.endPointsCollection[b].routingHost,this.endPointsCollection[b].routingKey,null,this.endPointsCollection[b].iframeProxyUrl)},getRoutingHost:function(b){return this.endPointsCollection[b].routingHost},getRoutingKey:function(b){return this.endPointsCollection[b].routingKey},getMessageTypesMappedToEndPoint:function(b){return this.endPointsCollection[b].messages},isEndPointEnabled:function(b){return this.endPointsCollection[b].enabled},setMessageTypesToEndPoint:function(b,a){this.endPointsCollection[b].messages=
a},enableEndPoint:function(b){this.endPointsCollection[b].enabled=!0},disableEndPoint:function(b){this.endPointsCollection[b].enabled=!1},getEndPointForMessageType:function(b){var a=null,c;for(c in this.endPointsCollection)if(this.endPointsCollection.hasOwnProperty(c)&&(a=-1<h.lastIndexOf(this.endPointsCollection[c].messages,b)?c:a))if(this.isEndPointEnabled(a))break;else a=null;return a?a:this.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT},getRemoteUrlForEndPoint:function(b){var a=this.endPointsCollection[b].routingHost+
this.endPointsCollection[b].pathSuffix;this.endPointsCollection[b].routingKey&&(a=a+"?routingkey\x3d"+this.endPointsCollection[b].routingKey);return a},setIframeProxyClientForEndPoint:function(b,a){this.endPointsCollection[b].iframeProxy=a},getIframeProxyClientForEndPoint:function(b){var a=this.endPointsCollection[b].iframeProxy;a||(a=new g(this.endPointsCollection[b].iframeProxyName),this.endPointsCollection[b].iframeProxy=a);return a},isEndpointMessageContainerBased:function(b){return b&&this.endPointsCollection[b]?
this.endPointsCollection[b].acceptsMessageContainerMessages:!0},addMessagesTypesToEndPoint:function(b,a){this.endPointsCollection[b]&&-1===this.endPointsCollection[b].messages.indexOf(a)&&this.endPointsCollection[b].messages.push(a)},removeMessageTypesFromEndPoint:function(b,a){if(this.endPointsCollection[b]){var c=this.endPointsCollection[b].messages.indexOf(a);-1<c&&this.endPointsCollection[b].messages.splice(c,1)}}})})},"mw-remote/impl/Transaction":function(){define(["dojo/_base/declare","dojo/_base/Deferred",
"dojo/_base/lang","mw-remote/RemoteEndPointsManager","mw-utils/Utils"],function(l,h,g,b,a){return l([],{constructor:function(a){a=a||{};this.requestMessages=a.requestMessages||{};this.responseMessages=a.responseMessages||{};this.context=a.context;this.computeToken=a.computeToken;this.uuidClassifierMap=a.uuidClassifierMap||{};this.endPointName=a.endPointName||null;this.allowedMessages=a.allowedMessages||[];this.ignoreMessageTypes=a.ignoreMessageTypes||[];this.sendMessage=a.sendMessage},addRequestMessage:function(a,
d,f){if(d){var e=b.isEndpointMessageContainerBased(this.endPointName);this.requestMessages[a]||(this.requestMessages[a]=[]);g.isArray(d)?d.forEach(function(b){this.addRequestMessage(a,b,f)},this):e?(d.uuid=d.uuid||this._generateUuid(),f&&(this.uuidClassifierMap[d.uuid]=f),this.requestMessages[a].push(d)):this.requestMessages[a]=d;this.requestMessages=this._filterMessages(this.requestMessages)}},_filterMessages:function(a){var b={};this.getRequestMessageTypes().forEach(function(f){if(0===this.allowedMessages.length||
0<=this.allowedMessages.indexOf(f))b[f]=a[f]},this);return b},getResponseMessageTypes:function(){var a,b=[];for(a in this.responseMessages)this.responseMessages.hasOwnProperty(a)&&b.push(a);return b},getRequestMessageTypes:function(){var a,b=[];for(a in this.requestMessages)this.requestMessages.hasOwnProperty(a)&&b.push(a);return b},getMessageClassifier:function(a){return a&&a.uuid&&this.uuidClassifierMap.hasOwnProperty(a.uuid)?this.uuidClassifierMap[a.uuid]:""},send:function(){this._removeEmptyMessages();
this._isEmpty(this.requestMessages)?(this.deferred=new h,this.deferred.callback()):(this.startTime=(new Date).getTime(),this.deferred=this._doSend(this._getRequest(this.requestMessages)),this.deferred.addCallback(this,this._processResponse),this.deferred.addErrback(this,this._processFault))},addIgnoreMessageType:function(a,b){if(-1<this.getRequestMessageTypes().indexOf(a))if(b)for(var f in this.uuidClassifierMap)this.uuidClassifierMap.hasOwnProperty(f)&&b&&this.uuidClassifierMap[f]===b&&this.ignoreMessageTypes.push(a+
":"+b);else this.ignoreMessageTypes.push(a)},_removeEmptyMessages:function(){if(!this._isEmpty(this.requestMessages))for(var b in this.requestMessages)this.requestMessages.hasOwnProperty(b)&&g.isArray(this.requestMessages[b])&&0===a.getArrayLength(this.requestMessages[b])&&delete this.requestMessages[b]},_isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},_generateUuid:function(){return a.generateUuid()}})})},"mw-utils/Utils":function(){define(["dojo/_base/lang","dojo/_base/window",
"mw-utils/deprecation"],function(l,h,g){return{generateUuid:function(){return"xxxxxxxx".replace(/[xy]/g,function(b){var a=16*Math.random()|0;return("x"===b?a:a&3|8).toString(16)}).toUpperCase()},isImageData:function(b){return!!b&&(h.global.ImageData&&b instanceof h.global.ImageData||b.hasOwnProperty("width")&&b.hasOwnProperty("height")&&b.hasOwnProperty("data"))},isArray:function(b){g.deprecated({deprecated:{module:"MW/utils/Utils",method:"isArray"},geckNumber:1444368});return Array.isArray(b)},getArrayLength:function(b){var a=
0;if(!l.isArray(b))return!1;b.forEach(function(b){b&&(a+=1)});return a},isWhitespace:function(b){return/^\s+$/.test(b)},removeSurroundingNewLines:function(b){for(;"\n"===b.charAt(0);)b=b.substring(1);for(;"\n"===b.charAt(b.length-1);)b=b.substring(0,b.length-1);return b},getFirstUniqueElement:function(b,a){var c=null;a.some(function(a){if(-1===b.indexOf(a))return c=a,!0});return c},unionOfWordSets:function(b,a,c){b=this._stringToArray(b);a=this._stringToArray(a);b=this.unionOfArrays(b,a);return c?
b.join(" "):b},intersectionOfWordSets:function(b,a,c){b=this._stringToArray(b);a=this._stringToArray(a);b=this.intersectionOfArrays(b,a);return c?b.join(" "):b},differenceOfWordSets:function(b,a,c){b=this._stringToArray(b);a=this._stringToArray(a);b=this.unique(this.differenceOfArrays(b,a));return c?b.join(" "):b},unionOfArrays:function(b,a){return this.unique(b.concat(a))},intersectionOfArrays:function(b,a){return this.nonunique(b.concat(a))},differenceOfArrays:function(b,a){if(void 0===window.Map)return this._legacyDifferenceOfArrays(b,
a);var c,d,f=new Map,e=[];for(d=0;d<a.length;d++)f.set(a[d],null);for(d=0;d<b.length;d++)c=b[d],f.has(c)||e.push(c);return e},_legacyDifferenceOfArrays:function(b,a){return this.unique(b.filter(function(b){return-1===a.indexOf(b)}))},unique:function(b){return b.filter(function(a,c){return b.indexOf(a)===c})},nonunique:function(b){return this.unique(b.filter(function(a,c){return b.indexOf(a)!==c}))},arrayEquals:function(b,a,c){if(b===a)return!0;if(b.length!==a.length)return!1;c||(c=function(a,b){return a===
b});for(var d=0,f=b.length;d<f;d++)if(!c(b[d],a[d]))return!1;return!0},removeEmptyElements:function(b){return b.filter(function(a){return!(""===a||null===a||void 0===a)})},_stringToArray:function(b){return!this._isString(b)?b:this.removeEmptyElements(b.split(" "))},_isString:function(b){return"string"===typeof b||b instanceof String}}})},"mw-utils/deprecation":function(){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"===
typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};define(["dojo/_base/config","mw-log/Log"],function(h,g){var b={deprecated:function(a){var b,d;if((h.isDebug||window.showDeprecationsAsErrors)&&this._isConfigValid(a))d=window.showDeprecationsAsErrors||a.deprecationLevel===this.ERROR?this.ERROR:this.WARN,b="DEPRECATED: ",a.deprecated&&(b+=a.deprecated.module,a.deprecated.method&&(b+="."+a.deprecated.method+"()"),b+="."),a.replacement&&(b+=" Use "+a.replacement.module,a.replacement.method&&
(b+="."+a.replacement.method+"()"),b+=" instead."),a.removalVersion&&(b+=" Will be removed in version: "+a.removalVersion+"."),a.geckNumber&&(b+=" Please use g"+a.geckNumber+" to track latest information regarding this deprecation"),a.additionalInformation&&(b+=" "+a.additionalInformation),g[d](b)},_isConfigValid:function(a){var b=!!a.deprecated&&"object"===l(a.deprecated)&&a.deprecated.hasOwnProperty("module");a.replacement&&(b=b&&"object"===l(a.replacement)&&a.replacement.hasOwnProperty("module"));
a.geckNumber&&(b=b&&"number"===typeof a.geckNumber);b||g.error("Supplied deprecationConfig properties are not valid. Please refer to http://inside.mathworks.com/wiki/Web_Widgets_Deprecation_API for right API");return b}};Object.defineProperties(b,{WARN:{value:"warn",enumerable:!0},ERROR:{value:"error",enumerable:!0}});return b})},"mw-remote/impl/FaultManager":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","mw-remote/RemoteEndPointsManager"],function(l,h,g,b){return h([],
{constructor:function(a){a=a||{};this.faultHandlers=a.faultHandlers||{};this.topLevelHandlers=a.topLevelHandlers||[];this.endPointLevelHandlers=a.endPointLevelHandlers||{}},registerFaultHandler:function(a,b,d){d&&(b=g.hitch(d,b));this.faultHandlers[a]=b},deregisterFaultHandler:function(a){delete this.faultHandlers[a]},registerTopLevelFaultHandler:function(a,b,d){d&&(b=g.hitch(d,b));if(g.isString(a)){if("*"===a)return a={matcher:a,handler:b},this.defaultTopLevelHandler=b,a;a=this._constructMatcherFromQuery(a)}a=
{matcher:a,handler:b};this.topLevelHandlers.push(a);return a},registerEndpointLevelFaultHandler:function(a,b,d,f){f&&(d=g.hitch(f,d));g.isString(b)&&(b=this._constructMatcherFromQuery(b));b={matcher:b,handler:d};this.endPointLevelHandlers[a]||(this.endPointLevelHandlers[a]=[]);this.endPointLevelHandlers[a].push(b);return b},deregisterTopLevelFaultHandler:function(a){var b=this.topLevelHandlers.indexOf(a);-1<b?this.topLevelHandlers.splice(b,1):"*"===a.matcher&&delete this.defaultTopLevelHandler},_constructMatcherFromQuery:function(a){var b=
[];a.split("||").forEach(function(a){a=g.trim(a);a=a.replace(/([\.])/g,"\\$1");a=a.replace(/\*/g,".*");b.push(RegExp("^"+a+"$"))});return function(a){return l.some(b,function(b){return b.test(a.faultCode||a.code||"")})}},handleFault:function(a){var b,d=function(b,c){var d;if(d=a.getMessageClassifier(c))if(d=[b,d].join(":"),this.faultHandlers[d])this.faultHandlers[d](a.fault,a.context)};for(b in a.requestMessages)if(a.requestMessages.hasOwnProperty(b)){if(this.faultHandlers[b])this.faultHandlers[b](a.fault,
a.context);var f=a.requestMessages[b];Array.isArray(f)&&f.forEach(g.hitch(this,d,b))}if(this.faultHandlers["*"])this.faultHandlers["*"](a.fault,a.context);this.endPointLevelHandlers[a.endPointName]?this._handleEndpointLevelFault(a):this._handleTopLevelFault(a)},_handleEndpointLevelFault:function(a){var b=!1,d=l.filter(this.endPointLevelHandlers[a.endPointName],function(b){return b.matcher.call(this,a.fault,a.context)},this);0<d.length&&d[0].handler&&(b=!0,d[0].handler.call(this,a.fault,a.context,
a));return b},_handleTopLevelFault:function(a){var b=l.filter(this.topLevelHandlers,function(b){return b.matcher.call(this,a.fault,a.context)},this);(b=0<b.length?b[0].handler:this.defaultTopLevelHandler)&&b.call(this,a.fault,a.context,a)},handleNonTransactionFault:function(a){var b=l.filter(this.topLevelHandlers,function(b){return b.matcher.call(this,a)},this);(b=0<b.length?b[0].handler:this.defaultTopLevelHandler)&&b.call(this,a)}})})},"mw-remote/impl/RequestManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang mw-remote/RemoteEndPointsManager mw-remote/defaultMessageMapping ./Transaction".split(" "),
function(l,h,g,b,a,c,d){return h([],{defaultMapping:c,constructor:function(a){a=a||{};this.defaultFactories=a.defaultFactories||{};this.mockHandlers=a.mockHandlers||{};this.mapping=a.mapping||this.defaultMapping;this.responseManager=a.responseManager},registerDefaultMessageFactory:function(a,c,d){d&&(c=b.hitch(d,c));this.defaultFactories[a]=c},deregisterDefaultMessageFactory:function(a){delete this.defaultFactories[a]},registerMockResponseGenerator:function(a,c,h){var l=this;c=b.hitch(h||this,c);
this.mockHandlers[a]=function(a,b){var f,h=d.construct(b);(f=c(a,h))||(f=new g,f.callback());f.addCallback(function(){l.responseManager._processResult(h)})}},deregisterMockResponseGenerator:function(a){delete this.mockHandlers[a]},sendMessage:function(a,b,c){var d={},g={};b=b||{};this._createAndFillTransactions(a,b,c,d,g);a=Object.keys(d);for(b=0;b<a.length;b+=1)c=a[b],this._callMocks(g[c]),d[c].send(),this.responseManager.handleTransaction(d[c])},_getTransaction:function(a,b){return d.construct({context:b,
computeToken:this.computeToken,endPointName:a})},_getMockTransaction:function(a,b,c){return d.construct({context:b,computeToken:this.computeToken,endPointName:a,uuid:c})},_createAndFillTransactions:function(b,c,d,g,h){var k,l,q=function(b){var d,f,k,l,m;d=a.getEndPointForMessageType(b);l=g[d];m=h[d];l||(l=this._getTransaction(d,c),m=this._getMockTransaction(d,c,l.uuid),g[d]=l,h[d]=m);if(this.defaultFactories[b]&&(d=this.defaultFactories[b](l.context)))f=b.split(":"),k=f[0],f=f.slice(1,f.length).join(":"),
this.mockHandlers[b]||l.addRequestMessage(k,d,f),m.addRequestMessage(k,d,f)},r,s;for(k in b)b.hasOwnProperty(k)&&(l=a.getEndPointForMessageType(k),r=h[l],s=g[l],g[l]||(s=this._getTransaction(l,c),r=this._getMockTransaction(l,c,s.uuid),g[l]=s,h[l]=r),l=[k,d].join(":"),!this.mockHandlers[k]&&!this.mockHandlers[l]&&s.addRequestMessage(k,b[k],d),r.addRequestMessage(k,b[k],d),this.mapping[l]?this.mapping[l].forEach(q,this):this.mapping[k]&&this.mapping[k].forEach(q,this))},_callMocks:function(a){var c,
d,g=a.context;delete a.context;var h=function(a,b){var d;if(d=c.getMessageClassifier(b))if(d=[a,d].join(":"),this.mockHandlers[d])this.mockHandlers[d]([b],c)};for(d in a.requestMessages)if(a.requestMessages.hasOwnProperty(d)){c=b.mixin({},a);c.context=g;if(this.mockHandlers.hasOwnProperty(d))this.mockHandlers[d](c.requestMessages[d],c);Array.isArray(c.requestMessages[d])?c.requestMessages[d].forEach(b.hitch(this,h,d)):h(d,c.requestMessages[d])}if(this.mockHandlers["*"])this.mockHandlers["*"](d,c.requestMessages[d],
c)}})})},"mw-remote/defaultMessageMapping":function(){define([],function(){return{Eval:["CurrentFolder","ListFolder"],"Eval:Ping":[],"Eval:RunFile":["UpdateFile","CurrentFolder","ListFolder"],"Eval:MlsPublishPre":["UpdateFile"],"FEval:liveEvalInstrumentCode":[],Interrupt:[],"FEval:GetFigures":["CurrentFolder","ListFolder"],"FEval:CloseFigure":["FEval:GetFigures"],"FEval:SelectFigure":["FEval:GetFigures"],"FEval:ResetAxes":["FEval:GetFigures"],"FEval:ResizeFigure":["FEval:GetFigures"],"FEval:AxesInteraction2D":["FEval:GetFigures"],
"FEval:AxesInteraction3D":["FEval:GetFigures"],CurrentUser:["ServiceRegistry"],RouterLogin:["ServiceRegistry"],CurrentFolder:["ListFolder"],MoveFile:["CurrentFolder"],Variable:[],CloseFile:["SaveSession"],UpdateFile:["SaveSession"],SaveSession:["UpdateFile"],Logout:["CloseFile"],UpdateShare:["ListFolder"]}})},"mw-remote/impl/ResponseManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/json dojo/_base/lang mw-log/Log mw-remote/RemoteEndPointsManager".split(" "),
function(l,h,g,b,a,c,d){return h([],{constructor:function(a){a=a||{};this.responseHandlers=a.responseHandlers||{};this.faultManager=a.faultManager;this.transactions=a.transactions||[]},registerResponseHandler:function(b,c,d){d&&(c=a.hitch(d,c));this.responseHandlers[b]=c},deregisterResponseHandler:function(a){delete this.responseHandlers[a]},handleTransaction:function(b){this.transactions.push(b);b.deferred.addCallback(a.hitch(this,this._processAll,b));b.deferred.addCallback(a.hitch(this,this._processResult,
b));b.deferred.addErrback(a.hitch(this,this._processAll,b));b.deferred.addErrback(a.hitch(this,this._processFault,b))},_processAll:function(a){a=this.transactions.indexOf(a);0<=a&&this.transactions.splice(a,1)},_processResult:function(a){a.getResponseMessageTypes().forEach(function(d){var g=a.responseMessages[d],h=[];try{if(Array.isArray(g)){g.forEach(function(b){var c,g=a.getMessageClassifier(b);if(g){c=[d,g].join(":");var l=this,m=!1;a.getRequestMessageTypes().forEach(function(d){d=a.requestMessages[d];
Array.isArray(d)?d.forEach(function(d){l.responseHandlers[c]&&d.uuid===b.uuid&&(l.responseHandlers[c]([b],a.context),m=!0)}):l.responseHandlers[c]&&d.uuid===b.uuid&&(l.responseHandlers[c]([b],a.context),m=!0)});m||h.push(b)}else h.push(b)},this);if(0<h.length&&this.responseHandlers[d])this.responseHandlers[d](h,a.context);if(this.responseHandlers["*"])this.responseHandlers["*"](d,a.responseMessages[d],a.context)}}catch(l){c.error("Remote: Fault occurred while processing response.\nMessage: "+l.message+
"\nType: "+d+"\nResponse: "+b.toJson(g))}},this);this._processUdcResponses(a);a.fault&&this.faultManager.handleFault(a)},_processUdcResponses:function(a){if(!d.isEndpointMessageContainerBased(a.endPointName)){var b=Object.keys(a.requestMessages)[0];if(this.responseHandlers[b])this.responseHandlers[b](a.responseMessages)}},_processFault:function(a){this.faultManager.handleFault(a)}})})},"mw-remote/serviceRegistryLookup":function(){define(["dojo/request/xhr","require"],function(l,h){var g=!1,b={_serviceData:{},
getServiceRegistryEndpoint:function(a){if(b._serviceData.serviceregistry){var c,d;c=b._serviceData.serviceregistry.length;for(d=0;d<c;d+=1)if(b._serviceData.serviceregistry[d].name===a)return b._serviceData.serviceregistry[d].endpoint}return""}};return{load:function(a,c,d){g?d(b):l("/serviceregistrylookup/1/service",{handleAs:"json",failOk:!0,method:"GET",timeout:15E3,sync:!c.async}).then(function(a){b._serviceData=a;g=!0;d(b)},function(a){b._serviceData={};g=!0;d(b)})}}})},"mw-statemachine/statemachineimpl/TimeoutTrigger":function(){define(["dojo/_base/declare",
"dojo/_base/lang","mw-log/Log","./Trigger"],function(l,h,g,b){return l(b,{constructor:function(){var a=this.name.split(" ");(2>a.length||"timeout"!==a[0])&&g.error("Invalid trigger name for a TimeoutTrigger. Could not parse out the type of handler.");this.timeoutInSeconds=parseFloat(a[1]);this.handlerType=a[0]},enable:function(){this.disable();this.timeoutHandle=setTimeout(h.hitch(null,this.triggerHandler,this.name),1E3*this.timeoutInSeconds)},disable:function(){this.timeoutHandle&&(clearTimeout(this.timeoutHandle),
this.timeoutHandle=null)}})})},"mw-statemachine/statemachineimpl/Transition":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log"],function(l,h,g){return l([],{constructor:function(b){this.state={};this.target="";this.action=this.condition=null;l.safeMixin(this,b)},handleTrigger:function(b,a){var c="";this.checkCondition(b,a)&&(this.runAction(b,a),c=this.getTarget(b,this.target,a));return c},checkCondition:function(b,a){return!this.condition?!0:h.hitch(this.state.context,this.condition).apply(null,
[b,this.state.data].concat(a))},runAction:function(b,a){var c;this.action&&(c=h.hitch(this.state.context,this.action),c.apply(null,[b,this.state.data].concat(a)))},getTarget:function(b,a,c){var d,f,e;if(h.isString(a))f=a;else if(h.isFunction(a))a=h.hitch(this.state.context,a),f=a.apply(null,[b,this.state.data].concat(c));else if(h.isArray(a))for(d=0;d<a.length;d+=1){f=this.getTarget(b,a[d],c);if(h.isString(f)){f={target:f};h.mixin(f,e);break}if(f&&f.target){h.mixin(f,e);break}e=f||{}}else g.warn("Transition: improper target: ",
a);return f}})})},"mw-messageservice/messageserviceimpl/MessageServiceState":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/promise/all mw-statemachine/StateMachine mw-log/Log".split(" "),function(l,h,g,b,a,c,d){return l([],{_MAX_RETRIES:30,logStateChanges:!1,constructor:function(){this._stateOptions={context:this,name:"WraDataService",namespace:"MOTW.wra",defaultSubstate:"disconnected",substates:{disconnected:{transitions:{onEnterState:this._enterDisconnected,
start:"connecting"}},connecting:{transitions:{onEnterState:this._enterConnecting,_connectSuccess:"resubscribing",_connectFailure:"reconnecting",stop:"disconnected"}},reconnecting:{transitions:{onEnterState:this._enterReconnecting,_connectSuccess:"resubscribing",_connectFailure:[this._retryFailure,"retryDelay"],stop:"disconnected"}},retryDelay:{transitions:{"timeout 2":"reconnecting",_reconnect:"reconnecting",stop:"disconnected"}},resubscribing:{transitions:{onEnterState:this._enterResubscribing,_resubscribeSuccess:"connected",
_resubscribeFailure:"reconnecting",stop:"disconnecting"}},connected:{transitions:{onEnterState:this._enterConnected,_reconnect:"reconnecting",stop:"disconnecting"}},disconnecting:{transitions:{onEnterState:this._enterDisconnecting,_disconnectSuccess:"disconnected",_disconnectFailure:"disconnected","timeout 2":"disconnected"}},fatallyDisconnected:{transitions:{onEnterState:this._enterFatallyDisconnected,stop:"disconnected"}}}}},setDelegate:function(a){if(this._delegate!==a){this._delegate=a;var b=
this;g.after(a,"onConnectionError",function(){d.warn("MessageService received connection error, reconnecting");b._reconnect()},!0);this._states=new c(this._stateOptions);g.after(this._states,"onEnterState",h.hitch(this,this._enterState),!0);this._states.start()}},onConnected:function(){},onNewlyConnected:function(){},onDisconnected:function(){},onReconnected:function(){},onFatallyDisconnected:function(){},onNotConnected:function(){},isStarted:function(){return"disconnecting"!==this._currentState&&
"disconnected"!==this._currentState},isConnected:function(){return"connected"===this._currentState},isFatallyDisconnected:function(){return"fatallyDisconnected"===this._currentState},isDisconnected:function(){return"disconnected"===this._currentState},start:function(){},stop:function(){},_enterState:function(a){var b=this._currentState;this._currentState=a;this.logStateChanges&&d.info("MessageService state change: "+b+" -\x3e "+a);if("connected"===b)this.onNotConnected();if("connected"===a&&this._previouslyConnected)this.onReconnected();
else if("connected"===a&&!this._previouslyConnected)this.onNewlyConnected()},_enterDisconnected:function(){this._previouslyConnected=!1;this._delegate.cleanup();this.onDisconnected()},_enterConnecting:function(){this._retryCount=0;this._delegate.connect().then(this._connectSuccess,this._connectFailure)},_enterReconnecting:function(){this._retryCount+=1;d.info("Reconnecting message service. Attempt "+this._retryCount,arguments);this._delegate.cleanup();this._delegate.connect().then(this._connectSuccess,
this._connectFailure)},_reconnect:function(){},_connectSuccess:function(){},_connectFailure:function(){},_timeoutAction:function(){this.logStateChanges&&d.info("MessageService timeout:",arguments)},_retryFailure:function(){var a;this._retryCount>=this._MAX_RETRIES&&(d.error("Message service fatally disconnected."),a="fatallyDisconnected");return a},_enterResubscribing:function(){function b(a){g.push(this._delegate.doSubscribe(a.channel))}var c,d,g=[];this._delegate.doStartBatch();for(c in this.channelSubscriptions)this.channelSubscriptions.hasOwnProperty(c)&&
(d=this.channelSubscriptions[c],d.forEach(b,this),this.channelSubscriptions[c].subscribed=!0);this._delegate.doEndBatch();a(g).then(this._resubscribeSuccess,this._resubscribeFailure)},_resubscribeSuccess:function(){},_resubscribeFailure:function(){},_enterConnected:function(){this._delegate.delegateConnected()?(this._retryCount=0,this._previouslyConnected&&d.info("Successfully connected."),this._previouslyConnected=!0,this.onConnected()):this._reconnect()},_enterFatallyDisconnected:function(){this.onFatallyDisconnected()},
_enterDisconnecting:function(){this._delegate.disconnect().then(this._disconnectSuccess,this._disconnectFailure)},_disconnectSuccess:function(){},_disconnectFailure:function(){}})})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(l,h,g){var b=l.some;return function(a){var c,d;a instanceof Array?d=a:a&&"object"===typeof a&&(c=a);var f,e=[];if(c){d=[];for(var l in c)Object.hasOwnProperty.call(c,l)&&(e.push(l),d.push(c[l]));f={}}else d&&(f=[]);if(!d||!d.length)return(new h).resolve(f);
var n=new h;n.promise.always(function(){f=e=null});var p=d.length;b(d,function(a,b){c||e.push(b);g(a,function(a){n.isFulfilled()||(f[e[b]]=a,0===--p&&n.resolve(f))},n.reject);return n.isFulfilled()});return n.promise}})},"mw-messageservice/messageserviceimpl/MessageServiceReqResp":function(){define(["dojo/_base/declare","dojo/Deferred","mw-log/Log"],function(l,h,g){return l([],{pollDelay:50,constructor:function(b,a){this.remote=b;this.messageService=a;this.pending=0;b.registerDefaultMessageFactory("OpaqueMessage",
function(){this.pending+=1;return{opaqueMessageDOs:[]}},this);b.registerResponseHandler("OpaqueMessageResponse",function(b){this.pending-=1;b.forEach(function(b){try{b.opaqueMessageDOs&&b.opaqueMessageDOs.forEach(a.handleMessage,a)}catch(c){g.error("Error while handling message: "+c)}});this.poll()},this)},onMessage:function(b){},onConnectionError:function(b){},connect:function(){this.enabled=!0;this.poll();return(new h).resolve()},disconnect:function(){this.enabled=!1;this.timeout&&(clearTimeout(this.timeout),
this.timeout=null);return(new h).resolve()},cleanup:function(){},poll:function(){if(this.enabled&&0===this.pending){var b=this;this.timeout=setTimeout(function(){b.pending+=1;b.remote.sendMessage({OpaqueMessage:{opaqueMessageDOs:[]}});b.timeout=null},this.pollDelay)}},doPublish:function(b,a){clearTimeout(this.timeout);this.timeout=null;this.pending+=1;this.remote.sendMessage({OpaqueMessage:{opaqueMessageDOs:[{channel:b,data:a}]}})},doSubscribe:function(b){},doUnsubscribe:function(b){},doStartBatch:function(){},
doEndBatch:function(){}})})},"InstallServiceHandler/InstallServiceHandler":function(){require({cache:{"dojo/request":function(){define(["./request/default!"],function(l){return l})},"dojo/request/default":function(){define(["exports","require","../has"],function(l,h,g){var b=g("config-requestProvider");b||(b="./xhr");l.getPlatformDefaultId=function(){return"./xhr"};l.load=function(a,c,d,f){h(["platform"==a?"./xhr":b],function(a){d(a)})}})}}});define("InstallServiceHandler/InstallServiceHandler",["dojo/_base/declare",
"dojo/request"],function(l,h){return l(null,{_DESTINATION:window.location.protocol+"//"+window.location.host+"/messageservice/json/secure",_generateUUID:function(){var g=performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var a=(g+16*Math.random())%16|0;g=Math.floor(g/16);return("x"===b?a:a&3|8).toString(16)})},_getQueryString:function(){return window.location.search},executeService:function(g,b,a){var c=this,d=this._generateUUID(),f="",e="testSession";this._getQueryString().substring(1).split("\x26").forEach(function(a){/^routingkey=/.test(a)&&
(f+="\x26"+a);/^computeToken=/.test(a)&&(e=a.split("\x3d")[1])});g='{"uuid":"'+d+'","messages":'+g+',"computeToken":{"computeSessionId":"'+e+'","servicerUrl":"unset"}}';return h.post(this._DESTINATION+f.replace("\x26","?"),{data:g,handleAs:"json"}).then(function(e){var f=void 0;if(void 0===e.messages)throw c._getException("INVALID_RESPONSE");if(e.fault&&0<e.fault.length)if(void 0!==a)a(e.fault);else throw e.fault;else{if(e.uuid!==d)throw c._getException("UUID",{expected:d,actual:e.uuid});var g=Object.keys(e.messages)[0];
if((g=e.messages[g][0].messageFaults)&&0<g.length)if(void 0!==a)a(g);else throw g;else void 0!==b?(f=b(e.messages),void 0===f&&(f=e.messages)):f=e.messages}return f},function(a){var b={};b.responsePayload=JSON.parse(a.response.options.data).messages;b.status=a.response.xhr.status;b.statusText=a.response.xhr.statusText;throw c._getException("COMM_ERROR",{cause:b});})},_getException:function(g,b){switch(g){case "UUID":return{name:"MismatchedUuidError",message:"Mismatched UUID in response.\nExpected: '"+
b.expected+"'\nReceived: '"+b.actual+"'"};case "INVALID_RESPONSE":return{name:"InvalidServerResponseError",message:"There was no messages member in the response object."};case "COMM_ERROR":return{name:"NetworkCommunicationError",message:"There was an error communicating with the backend services",rootCause:JSON.stringify(b.cause)}}return{name:"UnexpectedError",message:"An unknown error has happened.  There is no information about a cause."}}})})},"dojo/request":function(){define(["./request/default!"],
function(l){return l})},"dojo/request/default":function(){define(["exports","require","../has"],function(l,h,g){var b=g("config-requestProvider");b||(b="./xhr");l.getPlatformDefaultId=function(){return"./xhr"};l.load=function(a,c,d,f){h(["platform"==a?"./xhr":b],function(a){d(a)})}})}}});define("matlab_login/matlab_login",["dojo/_base/declare"],function(l){return l(null,{isUserLoggedIn:function(h,g,b,a){var c=this;require(["matlab_login/LoginServiceIdentifiers"],function(){var d=isUserLoggedInServiceId,
f;f='{"'+d+'":[{'+('"requestedloginlevel":"'+h+'",');f+='"clientstring":"'+g+'"';c._callServiceHandler(f+"}]}",function(a){b(a[d+"Response"][0])},a)})},saveCacheLoginInfo:function(h,g,b,a,c,d,f,e,l,n,p,k){var u=this;require(["matlab_login/LoginServiceIdentifiers"],function(){var q=saveCacheLoginInfoServiceId,r;r='{"'+q+'":[{'+('"firstname":"'+h+'",');r+='"lastname":"'+g+'",';r+='"email":"'+b+'",';r+='"userid":"'+a+'",';r+='"token":"'+c+'",';r+='"profileid":"'+d+'",';r+='"requestedloginlevel":"'+f+
'",';r+='"cacheusername":"'+l+'",';r+='"displayname":"'+n+'",';r+='"rememberme":"'+e+'"';u._callServiceHandler(r+"}]}",function(a){p(a[q+"Response"][0])},k)})},logout:function(h,g){var b=this;require(["matlab_login/LoginServiceIdentifiers"],function(){var a=logoutServiceId;b._callServiceHandler('{"'+a+'":[{}]}',function(b){h(b[a+"Response"][0])},g)})},getInfoToCallEmbeddedLogin:function(h,g){var b=this;require(["matlab_login/LoginServiceIdentifiers"],function(){var a=getInfoToCallEmbeddedLoginServiceId;
b._callServiceHandler('{"'+a+'":[{}]}',function(b){h(b[a+"Response"][0])},g)})},startGettingLoginStatusUpdates:function(h){require(["matlab_login/LoginStatusUpdate"],function(g){new g(h)})},stopGettingLoginStatusUpdates:function(){require(["matlab_login/LoginStatusUpdate"],function(h){(new h).stop()})},_callServiceHandler:function(h,g,b){var a=this;require(["InstallServiceHandler/InstallServiceHandler"],function(c){(new c).executeService(h,g,function(a){a=a[0].message.split(/;/);throw{name:a[1],message:a[2]};
}).then(function(){},function(c){a._handleMessage(c,b)})})},_handleMessage:function(h,g){void 0!==g&&g(h)}})})},"matlab_login_framework/js/LogoutPanel":function(){define("dojo/_base/declare dojo/dom-style dojo/dom-class dojo/dom-attr dojo/on dojo/_base/lang dojo/aspect mw-messageservice/MessageService dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dojo/Evented dijit/_TemplatedMixin mw-overlay-utils/BusyOverlay matlab_login/matlab_login dojo/text!./Templates/LogoutPanel.html".split(" "),
function(l,h,g,b,a,c,d,f,e,m,n,p,k,u,q,r,s){return l([e,m,n,p,k,u],{baseClass:"mwWidget mwLogoutPanel",templateString:s,loginInfo:{},constructor:function(a){this.busyIndicator=new q(q.SIZE.MEDIUM);this.matlabLogin=new r;this.matlabLogin.isUserLoggedIn(2,"logoutPanel",c.hitch(this,function(a){this.loginInfo=a}));d.after(f,"onConnected",c.hitch(this,"subscribeTo"),!1);f.start()},postCreate:function(){this.inherited(arguments);a(this.logOutBtnNode,"click",c.hitch(this,function(){f.publish("/LogoutClicked",
!0);this.matlabLogin.logout(function(){this.emit("logout")});this.updateLogoutPanel()}));this.busyIndicator.set("target",this.spinnerNode)},subscribeTo:function(){f.subscribe("/LoginChannel",function(a){a=JSON.parse(a.data);f.publish("/LoginChannelRelay",a);this.updateLogoutPanel()},this).then(function(){})},updateLogoutPanel:function(){this.matlabLogin.isUserLoggedIn(2,"logoutPanel",c.hitch(this,function(a){this.loginInfo=a;!0===this.loginInfo.isUserLoggedIn?this._updateUserInfo():(this.nameNode.innerHTML=
"",this._clearUserInfo())}))},_updateUserInfo:function(a){this.nameNode.innerHTML=this.loginInfo.userLoginInfo.firstName+" "+this.loginInfo.userLoginInfo.lastName;this.emailNode.innerHTML=this.loginInfo.userLoginInfo.emailAddress;this.myAccountNode.innerHTML="\x3ca href\x3d'#'\x3eMy Account\x3c/a\x3e";this.logOutBtnNode.style.display="block";this.logOutBtnNode.innerHTML="Log Out"},_clearUserInfo:function(){this.emailNode.innerHTML="";this.myAccountNode.innerHTML="";this.logOutBtnNode.innerHTML="";
this.logOutBtnNode.style.display="none"},_showSpinner:function(){this.busyIndicator.show()},_hideSpinner:function(){this.busyIndicator.hide()}})})},"matlab_login_framework/PostMessageChannel":function(){define(function(){var l,h;l=function(g,b){this.type=g;this.body=b};l.serialize=function(g,b,a){g=a+JSON.stringify([g,b]);return g=g.replace('"','"')};l.deserialize=function(g,b){var a;if(0!==g.indexOf(b))return new l;a=JSON.parse(g.replace(b,""));return new l(a[0],a[1])};l.prototype.isValid=function(){return this.type&&
null!==this.body};l.prototype.setEvent=function(g){this.event=g};h=function(g,b){var a=this;this.tag=b||"__mwpmc__";this.localWindow=g;this.listeners={};this.onMessage=function(b){var d=l.deserialize(b.data,a.tag);d.isValid()&&a.hasListener(d.type)&&(d.setEvent(b),a.listeners[d.type].call(a,d))};this.addPostMessageListener()};h.prototype.disconnect=function(){this.targetWindow=null;this.listeners={};this.localWindow.removeEventListener("message",this.onMessage)};h.prototype.listen=function(){this.on("__connect",
function(g){this.setTargetWindow(g.event.source)})};h.prototype.connect=function(g){this.setTargetWindow(g);this.send("__connect",this.localWindow.location.origin);this.send("connect",this.localWindow.location.origin)};h.prototype.on=function(g,b){this.listeners[g]=b};h.prototype.hasListener=function(g){return void 0!==this.listeners[g]};h.prototype.send=function(g,b){this.targetWindow.postMessage(l.serialize(g,b||"",this.tag),"*")};h.prototype.addPostMessageListener=function(){this.localWindow.addEventListener("message",
this.onMessage,!1)};h.prototype.setTargetWindow=function(g){this.targetWindow=g};return h})},"url:mw-overlay-utils/templates/busyOverlayTemplate.html":'\x3cdiv class\x3d"mw-busyIndicator" data-dojo-attach-point\x3d"_busyOverlayNode"\x3e\n\t\x3cdiv class\x3d"underlayNode" data-dojo-attach-point\x3d"_underlayNode"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"spinnerNode" data-dojo-attach-point\x3d"_spinnerNode" \x3e\x3c/div\x3e\n\x3c/div\x3e\n',"url:matlab_login_framework/js/Templates/LoginPanel.html":'\x3cdiv class\x3d"mwLoginPanel"\x3e\n    \x3cdiv class\x3d"mwFrameContainerNode" data-dojo-attach-point\x3d"frameContainerNode"\x3e\n        \x3cdiv class\x3d"mwCloseNode" data-dojo-attach-point\x3d"closeNode"\x3eX\x3c/div\x3e\n        \x3ciframe scrolling\x3d"no" width\x3d"450" height\x3d"450" name\x3d"imgbox" data-dojo-attach-point\x3d"frameNode"\x3e\x3c/iframe\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"errorContainer" data-dojo-attach-point\x3d"errorContainerNode"\x3e\n        \x3cdiv class\x3d"alert"\x3e\n            \x3cdiv class\x3d"error-heading" data-dojo-attach-point\x3d"errorHeadingNode"\x3e\x3c/div\x3e\n            \x3cdiv class\x3d"error-msg" data-dojo-attach-point\x3d"errorMsgNode"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"actionBtnsContainer"\x3e\n            \x3cdiv data-dojo-attach-point\x3d"cancelBtnNode" class\x3d"btn cancel-btn"\x3e\x3c/div\x3e\n            \x3cdiv data-dojo-attach-point\x3d"retryBtnNode" class\x3d"btn retry-btn"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"spinnerNode" class\x3d"spinnerNode1"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\n',
"url:matlab_login_framework/js/Templates/LogoutPanel.html":'\x3cdiv class\x3d"mwLogoutPanel"\x3e\n    \x3cdiv class\x3d"mwNameNode packed" data-dojo-attach-point\x3d"nameNode"\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"mwEmailNode packed" data-dojo-attach-point\x3d"emailNode"\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"mwMyAccountNode" data-dojo-attach-point\x3d"myAccountNode"\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"actionBtnsContainer"\x3e\n        \x3cdiv data-dojo-attach-point\x3d"logOutBtnNode" class\x3d"btn retry-btn"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"*now":function(l){l(['dojo/i18n!*preload*matlab_login_framework/nls/matlab_login_framework*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});define("matlab_login_framework/matlab_login_framework",["matlab_login_framework/js/MatlabLoginFramework"],function(l){return{getInstance:function(h){return new l(h||{})}}});
//# sourceMappingURL=matlab_login_framework.js.map